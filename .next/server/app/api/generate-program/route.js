"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-program/route";
exports.ids = ["app/api/generate-program/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kyler_NeuralLift_app_api_generate_program_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-program/route.ts */ \"(rsc)/./app/api/generate-program/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-program/route\",\n        pathname: \"/api/generate-program\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-program/route\"\n    },\n    resolvedPagePath: \"/Users/kyler/NeuralLift/app/api/generate-program/route.ts\",\n    nextConfigOutput,\n    userland: _Users_kyler_NeuralLift_app_api_generate_program_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-program/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1wcm9ncmFtJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnZW5lcmF0ZS1wcm9ncmFtJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VuZXJhdGUtcHJvZ3JhbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmt5bGVyJTJGTmV1cmFsTGlmdCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZreWxlciUyRk5ldXJhbExpZnQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1M7QUFDdEY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXVyYWxpZnQvPzBiMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2t5bGVyL05ldXJhbExpZnQvYXBwL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGUtcHJvZ3JhbVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9reWxlci9OZXVyYWxMaWZ0L2FwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-program/route.ts":
/*!*******************************************!*\
  !*** ./app/api/generate-program/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/program-generator */ \"(rsc)/./lib/program-generator.ts\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ajv */ \"(rsc)/./node_modules/ajv/dist/ajv.js\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _types_program_schema_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/types/program.schema.json */ \"(rsc)/./types/program.schema.json\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/supabase-server */ \"(rsc)/./lib/supabase-server.ts\");\n\n\n\n\n\nasync function GET(req) {\n    const url = new URL(req.url);\n    const id = url.searchParams.get(\"id\") ?? \"demo\";\n    const input = _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.OnboardingInput.parse({\n        experience_level: \"Intermediate\",\n        training_frequency_preference: 5,\n        equipment_available: [\n            \"Gym\"\n        ],\n        big3_PRs: {\n            bench: 185,\n            squat: 185,\n            deadlift: 225\n        },\n        preferred_split: undefined,\n        session_length_min: 60\n    });\n    const weeks = (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateFullProgram)(input);\n    const program = {\n        program_id: id,\n        name: \"12-week Hypertrophy Program\",\n        paid: false,\n        weeks,\n        metadata: {\n            created_at: new Date().toISOString(),\n            source: [\n                \"science-refs\",\n                \"Jeff Nippard\",\n                \"TNF\",\n                \"Mike Israetel\"\n            ],\n            volume_profile: {}\n        }\n    };\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(program, {\n        status: 200\n    });\n}\nasync function POST(req) {\n    const body = await req.json();\n    const input = _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.OnboardingInput.parse(body.input);\n    const gpt = Boolean(body.useGPT);\n    const base = {\n        program_id: body.programId ?? crypto.randomUUID(),\n        name: \"12-week Hypertrophy Program\",\n        paid: false,\n        weeks: (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateFullProgram)(input),\n        metadata: {\n            created_at: new Date().toISOString(),\n            source: [\n                \"science-refs\",\n                \"Jeff Nippard\",\n                \"TNF\",\n                \"Mike Israetel\"\n            ],\n            volume_profile: {}\n        }\n    };\n    const program = gpt ? await (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.refineWithGPT)(base, body.citations ?? []) : base;\n    // Validate program against JSON schema before saving\n    try {\n        const ajv = new (ajv__WEBPACK_IMPORTED_MODULE_2___default())({\n            allErrors: true,\n            strict: false\n        });\n        const validate = ajv.compile(_types_program_schema_json__WEBPACK_IMPORTED_MODULE_3__);\n        const valid = validate(program);\n        if (!valid) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid program payload\",\n                details: validate.errors\n            }, {\n                status: 400\n            });\n        }\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Schema validation failed\",\n            details: e?.message ?? String(e)\n        }, {\n            status: 500\n        });\n    }\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_4__.getServiceSupabaseClient)();\n    await supabase.from(\"programs\").upsert({\n        id: program.program_id,\n        user_id: body.userId ?? null,\n        name: program.name,\n        data: program,\n        paid: program.paid ?? false\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(program, {\n        status: 201\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLXByb2dyYW0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDc0M7QUFDeEU7QUFDa0M7QUFDUztBQUUxRCxlQUFlTyxJQUFJQyxHQUFnQjtJQUN4QyxNQUFNQyxNQUFNLElBQUlDLElBQUlGLElBQUlDLEdBQUc7SUFDM0IsTUFBTUUsS0FBS0YsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUMsU0FBUztJQUN6QyxNQUFNQyxRQUFRYixtRUFBZUEsQ0FBQ2MsS0FBSyxDQUFDO1FBQ2xDQyxrQkFBa0I7UUFDbEJDLCtCQUErQjtRQUMvQkMscUJBQXFCO1lBQUM7U0FBTTtRQUM1QkMsVUFBVTtZQUFFQyxPQUFPO1lBQUtDLE9BQU87WUFBS0MsVUFBVTtRQUFJO1FBQ2xEQyxpQkFBaUJDO1FBQ2pCQyxvQkFBb0I7SUFDdEI7SUFFQSxNQUFNQyxRQUFReEIsMkVBQW1CQSxDQUFDWTtJQUNsQyxNQUFNYSxVQUFVO1FBQ2RDLFlBQVlqQjtRQUNaa0IsTUFBTTtRQUNOQyxNQUFNO1FBQ05KO1FBQ0FLLFVBQVU7WUFBRUMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1lBQUlDLFFBQVE7Z0JBQUM7Z0JBQWdCO2dCQUFnQjtnQkFBTzthQUFnQjtZQUFFQyxnQkFBZ0IsQ0FBQztRQUFFO0lBQ3pJO0lBRUEsT0FBT3BDLHFEQUFZQSxDQUFDcUMsSUFBSSxDQUFDVixTQUFTO1FBQUVXLFFBQVE7SUFBSTtBQUNsRDtBQUVPLGVBQWVDLEtBQUsvQixHQUFnQjtJQUN6QyxNQUFNZ0MsT0FBTyxNQUFNaEMsSUFBSTZCLElBQUk7SUFDM0IsTUFBTXZCLFFBQVFiLG1FQUFlQSxDQUFDYyxLQUFLLENBQUN5QixLQUFLMUIsS0FBSztJQUM5QyxNQUFNMkIsTUFBTUMsUUFBUUYsS0FBS0csTUFBTTtJQUMvQixNQUFNQyxPQUFPO1FBQ1hoQixZQUFZWSxLQUFLSyxTQUFTLElBQUlDLE9BQU9DLFVBQVU7UUFDL0NsQixNQUFNO1FBQ05DLE1BQU07UUFDTkosT0FBT3hCLDJFQUFtQkEsQ0FBQ1k7UUFDM0JpQixVQUFVO1lBQUVDLFlBQVksSUFBSUMsT0FBT0MsV0FBVztZQUFJQyxRQUFRO2dCQUFDO2dCQUFnQjtnQkFBZ0I7Z0JBQU87YUFBZ0I7WUFBRUMsZ0JBQWdCLENBQUM7UUFBRTtJQUN6STtJQUVBLE1BQU1ULFVBQVVjLE1BQU0sTUFBTXRDLHFFQUFhQSxDQUFDeUMsTUFBTUosS0FBS1EsU0FBUyxJQUFJLEVBQUUsSUFBSUo7SUFDeEUscURBQXFEO0lBQ3JELElBQUk7UUFDRixNQUFNSyxNQUFNLElBQUk3Qyw0Q0FBR0EsQ0FBQztZQUFFOEMsV0FBVztZQUFNQyxRQUFRO1FBQU07UUFDckQsTUFBTUMsV0FBV0gsSUFBSUksT0FBTyxDQUFDaEQsdURBQWFBO1FBQzFDLE1BQU1pRCxRQUFRRixTQUFTekI7UUFDdkIsSUFBSSxDQUFDMkIsT0FBTztZQUNWLE9BQU90RCxxREFBWUEsQ0FBQ3FDLElBQUksQ0FBQztnQkFBRWtCLE9BQU87Z0JBQTJCQyxTQUFTSixTQUFTSyxNQUFNO1lBQUMsR0FBRztnQkFBRW5CLFFBQVE7WUFBSTtRQUN6RztJQUNGLEVBQUUsT0FBT29CLEdBQVE7UUFDZixPQUFPMUQscURBQVlBLENBQUNxQyxJQUFJLENBQUM7WUFBRWtCLE9BQU87WUFBNEJDLFNBQVNFLEdBQUdDLFdBQVdDLE9BQU9GO1FBQUcsR0FBRztZQUFFcEIsUUFBUTtRQUFJO0lBQ2xIO0lBQ0EsTUFBTXVCLFdBQVd2RCw4RUFBd0JBO0lBQ3pDLE1BQU11RCxTQUFTQyxJQUFJLENBQUMsWUFBWUMsTUFBTSxDQUFDO1FBQUVwRCxJQUFJZ0IsUUFBUUMsVUFBVTtRQUFFb0MsU0FBU3hCLEtBQUt5QixNQUFNLElBQUk7UUFBTXBDLE1BQU1GLFFBQVFFLElBQUk7UUFBRXFDLE1BQU12QztRQUFTRyxNQUFNSCxRQUFRRyxJQUFJLElBQUk7SUFBTTtJQUM5SixPQUFPOUIscURBQVlBLENBQUNxQyxJQUFJLENBQUNWLFNBQVM7UUFBRVcsUUFBUTtJQUFJO0FBQ2xEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV1cmFsaWZ0Ly4vYXBwL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlLnRzP2E0OTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IE9uYm9hcmRpbmdJbnB1dCwgZ2VuZXJhdGVGdWxsUHJvZ3JhbSwgcmVmaW5lV2l0aEdQVCB9IGZyb20gJ0AvbGliL3Byb2dyYW0tZ2VuZXJhdG9yJztcbmltcG9ydCBBanYgZnJvbSAnYWp2JztcbmltcG9ydCBwcm9ncmFtU2NoZW1hIGZyb20gJ0AvdHlwZXMvcHJvZ3JhbS5zY2hlbWEuanNvbic7XG5pbXBvcnQgeyBnZXRTZXJ2aWNlU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS1zZXJ2ZXInO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgY29uc3QgaWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnaWQnKSA/PyAnZGVtbyc7XG4gIGNvbnN0IGlucHV0ID0gT25ib2FyZGluZ0lucHV0LnBhcnNlKHtcbiAgICBleHBlcmllbmNlX2xldmVsOiAnSW50ZXJtZWRpYXRlJyxcbiAgICB0cmFpbmluZ19mcmVxdWVuY3lfcHJlZmVyZW5jZTogNSxcbiAgICBlcXVpcG1lbnRfYXZhaWxhYmxlOiBbJ0d5bSddLFxuICAgIGJpZzNfUFJzOiB7IGJlbmNoOiAxODUsIHNxdWF0OiAxODUsIGRlYWRsaWZ0OiAyMjUgfSxcbiAgICBwcmVmZXJyZWRfc3BsaXQ6IHVuZGVmaW5lZCxcbiAgICBzZXNzaW9uX2xlbmd0aF9taW46IDYwXG4gIH0pO1xuXG4gIGNvbnN0IHdlZWtzID0gZ2VuZXJhdGVGdWxsUHJvZ3JhbShpbnB1dCk7XG4gIGNvbnN0IHByb2dyYW0gPSB7XG4gICAgcHJvZ3JhbV9pZDogaWQsXG4gICAgbmFtZTogJzEyLXdlZWsgSHlwZXJ0cm9waHkgUHJvZ3JhbScsXG4gICAgcGFpZDogZmFsc2UsXG4gICAgd2Vla3MsXG4gICAgbWV0YWRhdGE6IHsgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBzb3VyY2U6IFsnc2NpZW5jZS1yZWZzJywgJ0plZmYgTmlwcGFyZCcsICdUTkYnLCAnTWlrZSBJc3JhZXRlbCddLCB2b2x1bWVfcHJvZmlsZToge30gfVxuICB9O1xuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihwcm9ncmFtLCB7IHN0YXR1czogMjAwIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICBjb25zdCBpbnB1dCA9IE9uYm9hcmRpbmdJbnB1dC5wYXJzZShib2R5LmlucHV0KTtcbiAgY29uc3QgZ3B0ID0gQm9vbGVhbihib2R5LnVzZUdQVCk7XG4gIGNvbnN0IGJhc2UgPSB7XG4gICAgcHJvZ3JhbV9pZDogYm9keS5wcm9ncmFtSWQgPz8gY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICBuYW1lOiAnMTItd2VlayBIeXBlcnRyb3BoeSBQcm9ncmFtJyxcbiAgICBwYWlkOiBmYWxzZSxcbiAgICB3ZWVrczogZ2VuZXJhdGVGdWxsUHJvZ3JhbShpbnB1dCksXG4gICAgbWV0YWRhdGE6IHsgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBzb3VyY2U6IFsnc2NpZW5jZS1yZWZzJywgJ0plZmYgTmlwcGFyZCcsICdUTkYnLCAnTWlrZSBJc3JhZXRlbCddLCB2b2x1bWVfcHJvZmlsZToge30gfVxuICB9O1xuXG4gIGNvbnN0IHByb2dyYW0gPSBncHQgPyBhd2FpdCByZWZpbmVXaXRoR1BUKGJhc2UsIGJvZHkuY2l0YXRpb25zID8/IFtdKSA6IGJhc2U7XG4gIC8vIFZhbGlkYXRlIHByb2dyYW0gYWdhaW5zdCBKU09OIHNjaGVtYSBiZWZvcmUgc2F2aW5nXG4gIHRyeSB7XG4gICAgY29uc3QgYWp2ID0gbmV3IEFqdih7IGFsbEVycm9yczogdHJ1ZSwgc3RyaWN0OiBmYWxzZSB9KTtcbiAgICBjb25zdCB2YWxpZGF0ZSA9IGFqdi5jb21waWxlKHByb2dyYW1TY2hlbWEgYXMgYW55KTtcbiAgICBjb25zdCB2YWxpZCA9IHZhbGlkYXRlKHByb2dyYW0pO1xuICAgIGlmICghdmFsaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBwcm9ncmFtIHBheWxvYWQnLCBkZXRhaWxzOiB2YWxpZGF0ZS5lcnJvcnMgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnU2NoZW1hIHZhbGlkYXRpb24gZmFpbGVkJywgZGV0YWlsczogZT8ubWVzc2FnZSA/PyBTdHJpbmcoZSkgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxuICBjb25zdCBzdXBhYmFzZSA9IGdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCgpO1xuICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9ncmFtcycpLnVwc2VydCh7IGlkOiBwcm9ncmFtLnByb2dyYW1faWQsIHVzZXJfaWQ6IGJvZHkudXNlcklkID8/IG51bGwsIG5hbWU6IHByb2dyYW0ubmFtZSwgZGF0YTogcHJvZ3JhbSwgcGFpZDogcHJvZ3JhbS5wYWlkID8/IGZhbHNlIH0pO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocHJvZ3JhbSwgeyBzdGF0dXM6IDIwMSB9KTtcbn1cblxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiT25ib2FyZGluZ0lucHV0IiwiZ2VuZXJhdGVGdWxsUHJvZ3JhbSIsInJlZmluZVdpdGhHUFQiLCJBanYiLCJwcm9ncmFtU2NoZW1hIiwiZ2V0U2VydmljZVN1cGFiYXNlQ2xpZW50IiwiR0VUIiwicmVxIiwidXJsIiwiVVJMIiwiaWQiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJpbnB1dCIsInBhcnNlIiwiZXhwZXJpZW5jZV9sZXZlbCIsInRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlIiwiZXF1aXBtZW50X2F2YWlsYWJsZSIsImJpZzNfUFJzIiwiYmVuY2giLCJzcXVhdCIsImRlYWRsaWZ0IiwicHJlZmVycmVkX3NwbGl0IiwidW5kZWZpbmVkIiwic2Vzc2lvbl9sZW5ndGhfbWluIiwid2Vla3MiLCJwcm9ncmFtIiwicHJvZ3JhbV9pZCIsIm5hbWUiLCJwYWlkIiwibWV0YWRhdGEiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic291cmNlIiwidm9sdW1lX3Byb2ZpbGUiLCJqc29uIiwic3RhdHVzIiwiUE9TVCIsImJvZHkiLCJncHQiLCJCb29sZWFuIiwidXNlR1BUIiwiYmFzZSIsInByb2dyYW1JZCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJjaXRhdGlvbnMiLCJhanYiLCJhbGxFcnJvcnMiLCJzdHJpY3QiLCJ2YWxpZGF0ZSIsImNvbXBpbGUiLCJ2YWxpZCIsImVycm9yIiwiZGV0YWlscyIsImVycm9ycyIsImUiLCJtZXNzYWdlIiwiU3RyaW5nIiwic3VwYWJhc2UiLCJmcm9tIiwidXBzZXJ0IiwidXNlcl9pZCIsInVzZXJJZCIsImRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-program/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/program-generator.ts":
/*!**********************************!*\
  !*** ./lib/program-generator.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OnboardingInput: () => (/* binding */ OnboardingInput),\n/* harmony export */   canViewWeek: () => (/* binding */ canViewWeek),\n/* harmony export */   generateDeterministicWeek: () => (/* binding */ generateDeterministicWeek),\n/* harmony export */   generateFullProgram: () => (/* binding */ generateFullProgram),\n/* harmony export */   refineWithGPT: () => (/* binding */ refineWithGPT),\n/* harmony export */   saveProgramToSupabase: () => (/* binding */ saveProgramToSupabase)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst OnboardingInput = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    age: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    sex: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"male\",\n        \"female\"\n    ]).optional(),\n    BW: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    experience_level: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"Beginner\",\n        \"Intermediate\",\n        \"Advanced\"\n    ]),\n    training_frequency_preference: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(2).max(6),\n    equipment_available: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).default([]),\n    goals: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).default([\n        \"hypertrophy\"\n    ]),\n    big3_PRs: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        bench: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        squat: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        deadlift: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n    }),\n    injuries: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).default([]),\n    movement_preferences: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).default([]),\n    preferred_split: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"Push/Pull/Legs\",\n        \"Upper/Lower\",\n        \"Full body\",\n        \"Custom\"\n    ]).optional(),\n    focus_point: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"Arms\",\n        \"Chest\",\n        \"Back\",\n        \"Quads\",\n        \"Glutes\",\n        \"Delts\"\n    ]).optional(),\n    session_length_min: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(30).max(120).default(60),\n    rest_pref: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"auto\",\n        \"custom\"\n    ]).default(\"auto\"),\n    nutrition: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"deficit\",\n        \"surplus\",\n        \"maintenance\"\n    ]).default(\"maintenance\")\n});\nfunction generateDeterministicWeek(input) {\n    const exp = input.experience_level;\n    const basePct = exp === \"Beginner\" ? 0.65 : exp === \"Intermediate\" ? 0.72 : 0.75;\n    const restCompound = 120;\n    const restAccessory = input.rest_pref === \"custom\" ? 75 : 90;\n    const bpPct = Math.min(0.8, basePct);\n    const sqPct = Math.min(0.78, basePct);\n    const dlPct = Math.min(0.8, basePct);\n    const day1 = [\n        {\n            id: \"bp-01\",\n            name: \"Barbell Bench Press\",\n            sets: 4,\n            reps: \"6-8\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound,\n            intensity_pct: bpPct\n        },\n        {\n            id: \"ohp-01\",\n            name: \"Seated Dumbbell Shoulder Press\",\n            sets: 3,\n            reps: \"8-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restAccessory\n        },\n        {\n            id: \"incl-01\",\n            name: \"Incline Dumbbell Press\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restAccessory\n        },\n        {\n            id: \"fly-01\",\n            name: \"Cable Fly\",\n            sets: 3,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        },\n        {\n            id: \"tri-01\",\n            name: \"Overhead Triceps Extension\",\n            sets: 3,\n            reps: \"10-15\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: 60\n        }\n    ];\n    const day2 = [\n        {\n            id: \"sq-01\",\n            name: \"Barbell Back Squat\",\n            sets: 4,\n            reps: \"6-8\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound,\n            intensity_pct: sqPct\n        },\n        {\n            id: \"rdl-01\",\n            name: \"Romanian Deadlift\",\n            sets: 3,\n            reps: \"8-10\",\n            rpe: 8,\n            tempo: \"3-0-1\",\n            rest_seconds: restCompound\n        },\n        {\n            id: \"legp-01\",\n            name: \"Leg Press\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restAccessory\n        },\n        {\n            id: \"ext-01\",\n            name: \"Leg Extension\",\n            sets: 2,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        },\n        {\n            id: \"calf-01\",\n            name: \"Seated Calf Raise\",\n            sets: 3,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        }\n    ];\n    const day3 = [\n        {\n            id: \"row-01\",\n            name: \"Barbell Row\",\n            sets: 4,\n            reps: \"6-10\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound\n        },\n        {\n            id: \"pull-01\",\n            name: \"Lat Pulldown\",\n            sets: 3,\n            reps: \"8-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restAccessory\n        },\n        {\n            id: \"face-01\",\n            name: \"Face Pull\",\n            sets: 3,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        },\n        {\n            id: \"curl-01\",\n            name: \"EZ Bar Curl\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: 60\n        }\n    ];\n    const day4 = [\n        {\n            id: \"dl-01\",\n            name: \"Conventional Deadlift\",\n            sets: 3,\n            reps: \"5-6\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: 180,\n            intensity_pct: dlPct\n        },\n        {\n            id: \"fsq-01\",\n            name: \"Front Squat\",\n            sets: 3,\n            reps: \"6-8\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound\n        },\n        {\n            id: \"curl-02\",\n            name: \"Lying Leg Curl\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 90\n        },\n        {\n            id: \"abs-01\",\n            name: \"Cable Crunch\",\n            sets: 3,\n            reps: \"10-15\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: 60\n        }\n    ];\n    const day5 = [\n        {\n            id: \"bp-02\",\n            name: \"Close-Grip Bench Press\",\n            sets: 3,\n            reps: \"6-8\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound,\n            intensity_pct: Math.max(0.68, bpPct - 0.03)\n        },\n        {\n            id: \"ohp-02\",\n            name: \"Standing Overhead Press\",\n            sets: 3,\n            reps: \"6-8\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound\n        },\n        {\n            id: \"lat-01\",\n            name: \"Lateral Raise\",\n            sets: 3,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        },\n        {\n            id: \"dip-01\",\n            name: \"Cable Triceps Pushdown\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: 60\n        }\n    ];\n    return {\n        week_number: 1,\n        days: [\n            {\n                day_number: 1,\n                focus: \"Upper — Push\",\n                exercises: day1,\n                notes: \"Add 2.5–5 lb if last set ≤ RPE 7 for 2 sessions.\"\n            },\n            {\n                day_number: 2,\n                focus: \"Lower — Squat focus\",\n                exercises: day2\n            },\n            {\n                day_number: 3,\n                focus: \"Upper — Pull\",\n                exercises: day3\n            },\n            {\n                day_number: 4,\n                focus: \"Lower — Deadlift focus\",\n                exercises: day4\n            },\n            {\n                day_number: 5,\n                focus: \"Upper — Chest/Delts bias\",\n                exercises: day5,\n                notes: \"Optional rear delt work if recovered.\"\n            }\n        ]\n    };\n}\nfunction generateFullProgram(input) {\n    const weeks = [];\n    const daysPerWeek = input.training_frequency_preference;\n    for(let w = 1; w <= 12; w++){\n        const baseWeek = generateDeterministicWeek(input);\n        // Progression: 3-week accumulation, 1-week deload cycle\n        const cyclePos = (w - 1) % 4 + 1; // 1..4\n        const volumeMultiplier = cyclePos === 4 ? 0.6 : 1 + 0.05 * (cyclePos - 1); // 1.0, 1.05, 1.10, 0.6\n        const intensityBump = cyclePos === 4 ? -0.05 : 0.01 * (w - 1); // slight upward trend, deload down\n        let plannedDays = baseWeek.days.slice(0, Math.min(daysPerWeek, 6));\n        if (daysPerWeek === 2) {\n            plannedDays = [\n                {\n                    ...baseWeek.days[0],\n                    focus: \"Full body A\"\n                },\n                {\n                    ...baseWeek.days[1],\n                    focus: \"Full body B\"\n                }\n            ];\n        } else if (daysPerWeek === 3) {\n            plannedDays = [\n                {\n                    ...baseWeek.days[0],\n                    focus: \"Upper\"\n                },\n                {\n                    ...baseWeek.days[1],\n                    focus: \"Lower\"\n                },\n                {\n                    ...baseWeek.days[2],\n                    focus: \"Full body\"\n                }\n            ];\n        } else if (daysPerWeek === 4) {\n            plannedDays = [\n                {\n                    ...baseWeek.days[0],\n                    focus: \"Upper 1\"\n                },\n                {\n                    ...baseWeek.days[1],\n                    focus: \"Lower 1\"\n                },\n                {\n                    ...baseWeek.days[2],\n                    focus: \"Upper 2\"\n                },\n                {\n                    ...baseWeek.days[3],\n                    focus: \"Lower 2\"\n                }\n            ];\n        } else if (daysPerWeek === 5) {\n            plannedDays = [\n                {\n                    ...baseWeek.days[0],\n                    focus: \"Push\"\n                },\n                {\n                    ...baseWeek.days[2],\n                    focus: \"Pull\"\n                },\n                {\n                    ...baseWeek.days[3],\n                    focus: \"Legs\"\n                },\n                {\n                    ...baseWeek.days[1],\n                    focus: \"Upper\"\n                },\n                {\n                    ...baseWeek.days[4],\n                    focus: \"Lower\"\n                }\n            ];\n        } else if (daysPerWeek === 6) {\n            const focus = input.focus_point ?? \"Arms\";\n            plannedDays = [\n                {\n                    ...baseWeek.days[0],\n                    focus: \"Push\"\n                },\n                {\n                    ...baseWeek.days[2],\n                    focus: \"Pull\"\n                },\n                {\n                    ...baseWeek.days[3],\n                    focus: \"Legs\"\n                },\n                {\n                    ...baseWeek.days[1],\n                    focus: \"Upper\"\n                },\n                {\n                    ...baseWeek.days[4],\n                    focus: \"Lower\"\n                },\n                {\n                    ...baseWeek.days[2],\n                    focus: `Focus — ${focus}`\n                }\n            ];\n        }\n        const adjustedDays = plannedDays.map((day)=>({\n                ...day,\n                exercises: day.exercises.map((ex)=>{\n                    const sets = Math.max(1, Math.round(ex.sets * volumeMultiplier));\n                    const intensity_pct = ex.intensity_pct != null ? Math.max(0.5, Math.min(0.9, ex.intensity_pct + intensityBump)) : undefined;\n                    return {\n                        ...ex,\n                        sets,\n                        intensity_pct\n                    };\n                })\n            }));\n        weeks.push({\n            week_number: w,\n            days: adjustedDays\n        });\n    }\n    return weeks;\n}\nasync function refineWithGPT(baseProgram, citations) {\n    if (!process.env.OPENAI_API_KEY) return baseProgram;\n    try {\n        const { OpenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node\"), __webpack_require__.e(\"vendor-chunks/openai\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/humanize-ms\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const client = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n        const prompt = `You are a strength coach. Refine the provided 12-week hypertrophy program JSON by adding microprogression notes, deload adjustments (3:1), and safe swaps respecting injuries/equipment. Return valid JSON only. Citations: ${citations.join(\", \")}`;\n        const response = await client.responses.create({\n            model: \"gpt-4o-mini\",\n            temperature: 0.2,\n            input: [\n                {\n                    role: \"system\",\n                    content: \"Return JSON only.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                },\n                {\n                    role: \"user\",\n                    content: JSON.stringify(baseProgram)\n                }\n            ]\n        });\n        const text = response.output_text ?? response.choices?.[0]?.message?.content;\n        if (!text) return baseProgram;\n        const jsonStart = text.indexOf(\"{\");\n        const jsonEnd = text.lastIndexOf(\"}\");\n        if (jsonStart >= 0 && jsonEnd > jsonStart) {\n            const refined = JSON.parse(text.slice(jsonStart, jsonEnd + 1));\n            return refined;\n        }\n    } catch  {\n        return baseProgram;\n    }\n    return baseProgram;\n}\nasync function saveProgramToSupabase(program) {\n    try {\n        const { getSupabaseClient } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_supabase_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./supabase */ \"(rsc)/./lib/supabase.ts\"));\n        const supabase = getSupabaseClient();\n        await supabase.from(\"programs\").upsert({\n            id: program.program_id,\n            name: program.name,\n            data: program,\n            paid: program.paid ?? false\n        });\n    } catch  {}\n}\nfunction canViewWeek(week, paid) {\n    return week <= 1 || paid;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVO1lBQUV0RSxNQUFNaUUsUUFBUWpFLElBQUk7WUFBRXVFLE1BQU1OO1lBQVNPLE1BQU1QLFFBQVFPLElBQUksSUFBSTtRQUFNO0lBQ2xJLEVBQUUsT0FBTSxDQUFDO0FBQ1g7QUFFTyxTQUFTQyxZQUFZQyxJQUFZLEVBQUVGLElBQWE7SUFDckQsT0FBT0UsUUFBUSxLQUFLRjtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJhbGlmdC8uL2xpYi9wcm9ncmFtLWdlbmVyYXRvci50cz8wYmZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5leHBvcnQgY29uc3QgT25ib2FyZGluZ0lucHV0ID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBhZ2U6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgc2V4OiB6LmVudW0oWydtYWxlJywgJ2ZlbWFsZSddKS5vcHRpb25hbCgpLFxuICBCVzogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBleHBlcmllbmNlX2xldmVsOiB6LmVudW0oWydCZWdpbm5lcicsICdJbnRlcm1lZGlhdGUnLCAnQWR2YW5jZWQnXSksXG4gIHRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlOiB6Lm51bWJlcigpLmludCgpLm1pbigyKS5tYXgoNiksXG4gIGVxdWlwbWVudF9hdmFpbGFibGU6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG4gIGdvYWxzOiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoWydoeXBlcnRyb3BoeSddKSxcbiAgYmlnM19QUnM6IHoub2JqZWN0KHsgYmVuY2g6IHoubnVtYmVyKCkub3B0aW9uYWwoKSwgc3F1YXQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSwgZGVhZGxpZnQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSB9KSxcbiAgaW5qdXJpZXM6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG4gIG1vdmVtZW50X3ByZWZlcmVuY2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoW10pLFxuICBwcmVmZXJyZWRfc3BsaXQ6IHouZW51bShbJ1B1c2gvUHVsbC9MZWdzJywgJ1VwcGVyL0xvd2VyJywgJ0Z1bGwgYm9keScsICdDdXN0b20nXSkub3B0aW9uYWwoKSxcbiAgZm9jdXNfcG9pbnQ6IHouZW51bShbJ0FybXMnLCAnQ2hlc3QnLCAnQmFjaycsICdRdWFkcycsICdHbHV0ZXMnLCAnRGVsdHMnXSkub3B0aW9uYWwoKSxcbiAgc2Vzc2lvbl9sZW5ndGhfbWluOiB6Lm51bWJlcigpLmludCgpLm1pbigzMCkubWF4KDEyMCkuZGVmYXVsdCg2MCksXG4gIHJlc3RfcHJlZjogei5lbnVtKFsnYXV0bycsICdjdXN0b20nXSkuZGVmYXVsdCgnYXV0bycpLFxuICBudXRyaXRpb246IHouZW51bShbJ2RlZmljaXQnLCAnc3VycGx1cycsICdtYWludGVuYW5jZSddKS5kZWZhdWx0KCdtYWludGVuYW5jZScpXG59KTtcblxuZXhwb3J0IHR5cGUgT25ib2FyZGluZ0lucHV0ID0gei5pbmZlcjx0eXBlb2YgT25ib2FyZGluZ0lucHV0PjtcblxudHlwZSBFeGVyY2lzZSA9IHtcbiAgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyBzZXRzOiBudW1iZXI7IHJlcHM6IHN0cmluZzsgcnBlOiBudW1iZXI7IHRlbXBvOiBzdHJpbmc7IHJlc3Rfc2Vjb25kczogbnVtYmVyOyBpbnRlbnNpdHlfcGN0PzogbnVtYmVyO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRGV0ZXJtaW5pc3RpY1dlZWsoaW5wdXQ6IE9uYm9hcmRpbmdJbnB1dCkge1xuICBjb25zdCBleHAgPSBpbnB1dC5leHBlcmllbmNlX2xldmVsO1xuICBjb25zdCBiYXNlUGN0ID0gZXhwID09PSAnQmVnaW5uZXInID8gMC42NSA6IGV4cCA9PT0gJ0ludGVybWVkaWF0ZScgPyAwLjcyIDogMC43NTtcbiAgY29uc3QgcmVzdENvbXBvdW5kID0gMTIwO1xuICBjb25zdCByZXN0QWNjZXNzb3J5ID0gaW5wdXQucmVzdF9wcmVmID09PSAnY3VzdG9tJyA/IDc1IDogOTA7XG5cbiAgY29uc3QgYnBQY3QgPSBNYXRoLm1pbigwLjgsIGJhc2VQY3QpO1xuICBjb25zdCBzcVBjdCA9IE1hdGgubWluKDAuNzgsIGJhc2VQY3QpO1xuICBjb25zdCBkbFBjdCA9IE1hdGgubWluKDAuOCwgYmFzZVBjdCk7XG5cbiAgY29uc3QgZGF5MTogRXhlcmNpc2VbXSA9IFtcbiAgICB7IGlkOiAnYnAtMDEnLCBuYW1lOiAnQmFyYmVsbCBCZW5jaCBQcmVzcycsIHNldHM6IDQsIHJlcHM6ICc2LTgnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCwgaW50ZW5zaXR5X3BjdDogYnBQY3QgfSxcbiAgICB7IGlkOiAnb2hwLTAxJywgbmFtZTogJ1NlYXRlZCBEdW1iYmVsbCBTaG91bGRlciBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgeyBpZDogJ2luY2wtMDEnLCBuYW1lOiAnSW5jbGluZSBEdW1iYmVsbCBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICcxMC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgIHsgaWQ6ICdmbHktMDEnLCBuYW1lOiAnQ2FibGUgRmx5Jywgc2V0czogMywgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgIHsgaWQ6ICd0cmktMDEnLCBuYW1lOiAnT3ZlcmhlYWQgVHJpY2VwcyBFeHRlbnNpb24nLCBzZXRzOiAzLCByZXBzOiAnMTAtMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gIF07XG5cbiAgY29uc3QgZGF5MjogRXhlcmNpc2VbXSA9IFtcbiAgICB7IGlkOiAnc3EtMDEnLCBuYW1lOiAnQmFyYmVsbCBCYWNrIFNxdWF0Jywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBzcVBjdCB9LFxuICAgIHsgaWQ6ICdyZGwtMDEnLCBuYW1lOiAnUm9tYW5pYW4gRGVhZGxpZnQnLCBzZXRzOiAzLCByZXBzOiAnOC0xMCcsIHJwZTogOCwgdGVtcG86ICczLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgeyBpZDogJ2xlZ3AtMDEnLCBuYW1lOiAnTGVnIFByZXNzJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgeyBpZDogJ2V4dC0wMScsIG5hbWU6ICdMZWcgRXh0ZW5zaW9uJywgc2V0czogMiwgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgIHsgaWQ6ICdjYWxmLTAxJywgbmFtZTogJ1NlYXRlZCBDYWxmIFJhaXNlJywgc2V0czogMywgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICBdO1xuXG4gIGNvbnN0IGRheTM6IEV4ZXJjaXNlW10gPSBbXG4gICAgeyBpZDogJ3Jvdy0wMScsIG5hbWU6ICdCYXJiZWxsIFJvdycsIHNldHM6IDQsIHJlcHM6ICc2LTEwJywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICB7IGlkOiAncHVsbC0wMScsIG5hbWU6ICdMYXQgUHVsbGRvd24nLCBzZXRzOiAzLCByZXBzOiAnOC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgIHsgaWQ6ICdmYWNlLTAxJywgbmFtZTogJ0ZhY2UgUHVsbCcsIHNldHM6IDMsIHJlcHM6ICcxMi0xNScsIHJwZTogOCwgdGVtcG86ICcyLTEtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICB7IGlkOiAnY3VybC0wMScsIG5hbWU6ICdFWiBCYXIgQ3VybCcsIHNldHM6IDMsIHJlcHM6ICcxMC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgXTtcblxuICBjb25zdCBkYXk0OiBFeGVyY2lzZVtdID0gW1xuICAgIHsgaWQ6ICdkbC0wMScsIG5hbWU6ICdDb252ZW50aW9uYWwgRGVhZGxpZnQnLCBzZXRzOiAzLCByZXBzOiAnNS02JywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiAxODAsIGludGVuc2l0eV9wY3Q6IGRsUGN0IH0sXG4gICAgeyBpZDogJ2ZzcS0wMScsIG5hbWU6ICdGcm9udCBTcXVhdCcsIHNldHM6IDMsIHJlcHM6ICc2LTgnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgIHsgaWQ6ICdjdXJsLTAyJywgbmFtZTogJ0x5aW5nIExlZyBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA5MCB9LFxuICAgIHsgaWQ6ICdhYnMtMDEnLCBuYW1lOiAnQ2FibGUgQ3J1bmNoJywgc2V0czogMywgcmVwczogJzEwLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICBdO1xuXG4gIGNvbnN0IGRheTU6IEV4ZXJjaXNlW10gPSBbXG4gICAgeyBpZDogJ2JwLTAyJywgbmFtZTogJ0Nsb3NlLUdyaXAgQmVuY2ggUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnNi04JywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQsIGludGVuc2l0eV9wY3Q6IE1hdGgubWF4KDAuNjgsIGJwUGN0IC0gMC4wMykgfSxcbiAgICB7IGlkOiAnb2hwLTAyJywgbmFtZTogJ1N0YW5kaW5nIE92ZXJoZWFkIFByZXNzJywgc2V0czogMywgcmVwczogJzYtOCcsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgeyBpZDogJ2xhdC0wMScsIG5hbWU6ICdMYXRlcmFsIFJhaXNlJywgc2V0czogMywgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgIHsgaWQ6ICdkaXAtMDEnLCBuYW1lOiAnQ2FibGUgVHJpY2VwcyBQdXNoZG93bicsIHNldHM6IDMsIHJlcHM6ICcxMC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgXTtcblxuICByZXR1cm4ge1xuICAgIHdlZWtfbnVtYmVyOiAxLFxuICAgIGRheXM6IFtcbiAgICAgIHsgZGF5X251bWJlcjogMSwgZm9jdXM6ICdVcHBlciDigJQgUHVzaCcsIGV4ZXJjaXNlczogZGF5MSwgbm90ZXM6ICdBZGQgMi414oCTNSBsYiBpZiBsYXN0IHNldCDiiaQgUlBFIDcgZm9yIDIgc2Vzc2lvbnMuJyB9LFxuICAgICAgeyBkYXlfbnVtYmVyOiAyLCBmb2N1czogJ0xvd2VyIOKAlCBTcXVhdCBmb2N1cycsIGV4ZXJjaXNlczogZGF5MiB9LFxuICAgICAgeyBkYXlfbnVtYmVyOiAzLCBmb2N1czogJ1VwcGVyIOKAlCBQdWxsJywgZXhlcmNpc2VzOiBkYXkzIH0sXG4gICAgICB7IGRheV9udW1iZXI6IDQsIGZvY3VzOiAnTG93ZXIg4oCUIERlYWRsaWZ0IGZvY3VzJywgZXhlcmNpc2VzOiBkYXk0IH0sXG4gICAgICB7IGRheV9udW1iZXI6IDUsIGZvY3VzOiAnVXBwZXIg4oCUIENoZXN0L0RlbHRzIGJpYXMnLCBleGVyY2lzZXM6IGRheTUsIG5vdGVzOiAnT3B0aW9uYWwgcmVhciBkZWx0IHdvcmsgaWYgcmVjb3ZlcmVkLicgfSxcbiAgICBdXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUZ1bGxQcm9ncmFtKGlucHV0OiBPbmJvYXJkaW5nSW5wdXQpIHtcbiAgY29uc3Qgd2Vla3MgPSBbXSBhcyBBcnJheTx7IHdlZWtfbnVtYmVyOiBudW1iZXI7IGRheXM6IGFueVtdIH0+O1xuICBjb25zdCBkYXlzUGVyV2VlayA9IGlucHV0LnRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlO1xuICBmb3IgKGxldCB3ID0gMTsgdyA8PSAxMjsgdysrKSB7XG4gICAgY29uc3QgYmFzZVdlZWsgPSBnZW5lcmF0ZURldGVybWluaXN0aWNXZWVrKGlucHV0KTtcbiAgICAvLyBQcm9ncmVzc2lvbjogMy13ZWVrIGFjY3VtdWxhdGlvbiwgMS13ZWVrIGRlbG9hZCBjeWNsZVxuICAgIGNvbnN0IGN5Y2xlUG9zID0gKCh3IC0gMSkgJSA0KSArIDE7IC8vIDEuLjRcbiAgICBjb25zdCB2b2x1bWVNdWx0aXBsaWVyID0gY3ljbGVQb3MgPT09IDQgPyAwLjYgOiAxICsgMC4wNSAqIChjeWNsZVBvcyAtIDEpOyAvLyAxLjAsIDEuMDUsIDEuMTAsIDAuNlxuICAgIGNvbnN0IGludGVuc2l0eUJ1bXAgPSBjeWNsZVBvcyA9PT0gNCA/IC0wLjA1IDogMC4wMSAqICh3IC0gMSk7IC8vIHNsaWdodCB1cHdhcmQgdHJlbmQsIGRlbG9hZCBkb3duXG5cbiAgICBsZXQgcGxhbm5lZERheXMgPSBiYXNlV2Vlay5kYXlzLnNsaWNlKDAsIE1hdGgubWluKGRheXNQZXJXZWVrLCA2KSk7XG4gICAgaWYgKGRheXNQZXJXZWVrID09PSAyKSB7XG4gICAgICBwbGFubmVkRGF5cyA9IFtcbiAgICAgICAgeyAuLi5iYXNlV2Vlay5kYXlzWzBdLCBmb2N1czogJ0Z1bGwgYm9keSBBJyB9LFxuICAgICAgICB7IC4uLmJhc2VXZWVrLmRheXNbMV0sIGZvY3VzOiAnRnVsbCBib2R5IEInIH1cbiAgICAgIF07XG4gICAgfSBlbHNlIGlmIChkYXlzUGVyV2VlayA9PT0gMykge1xuICAgICAgcGxhbm5lZERheXMgPSBbXG4gICAgICAgIHsgLi4uYmFzZVdlZWsuZGF5c1swXSwgZm9jdXM6ICdVcHBlcicgfSxcbiAgICAgICAgeyAuLi5iYXNlV2Vlay5kYXlzWzFdLCBmb2N1czogJ0xvd2VyJyB9LFxuICAgICAgICB7IC4uLmJhc2VXZWVrLmRheXNbMl0sIGZvY3VzOiAnRnVsbCBib2R5JyB9XG4gICAgICBdO1xuICAgIH0gZWxzZSBpZiAoZGF5c1BlcldlZWsgPT09IDQpIHtcbiAgICAgIHBsYW5uZWREYXlzID0gW1xuICAgICAgICB7IC4uLmJhc2VXZWVrLmRheXNbMF0sIGZvY3VzOiAnVXBwZXIgMScgfSxcbiAgICAgICAgeyAuLi5iYXNlV2Vlay5kYXlzWzFdLCBmb2N1czogJ0xvd2VyIDEnIH0sXG4gICAgICAgIHsgLi4uYmFzZVdlZWsuZGF5c1syXSwgZm9jdXM6ICdVcHBlciAyJyB9LFxuICAgICAgICB7IC4uLmJhc2VXZWVrLmRheXNbM10sIGZvY3VzOiAnTG93ZXIgMicgfVxuICAgICAgXTtcbiAgICB9IGVsc2UgaWYgKGRheXNQZXJXZWVrID09PSA1KSB7XG4gICAgICBwbGFubmVkRGF5cyA9IFtcbiAgICAgICAgeyAuLi5iYXNlV2Vlay5kYXlzWzBdLCBmb2N1czogJ1B1c2gnIH0sXG4gICAgICAgIHsgLi4uYmFzZVdlZWsuZGF5c1syXSwgZm9jdXM6ICdQdWxsJyB9LFxuICAgICAgICB7IC4uLmJhc2VXZWVrLmRheXNbM10sIGZvY3VzOiAnTGVncycgfSxcbiAgICAgICAgeyAuLi5iYXNlV2Vlay5kYXlzWzFdLCBmb2N1czogJ1VwcGVyJyB9LFxuICAgICAgICB7IC4uLmJhc2VXZWVrLmRheXNbNF0sIGZvY3VzOiAnTG93ZXInIH1cbiAgICAgIF07XG4gICAgfSBlbHNlIGlmIChkYXlzUGVyV2VlayA9PT0gNikge1xuICAgICAgY29uc3QgZm9jdXMgPSBpbnB1dC5mb2N1c19wb2ludCA/PyAnQXJtcyc7XG4gICAgICBwbGFubmVkRGF5cyA9IFtcbiAgICAgICAgeyAuLi5iYXNlV2Vlay5kYXlzWzBdLCBmb2N1czogJ1B1c2gnIH0sXG4gICAgICAgIHsgLi4uYmFzZVdlZWsuZGF5c1syXSwgZm9jdXM6ICdQdWxsJyB9LFxuICAgICAgICB7IC4uLmJhc2VXZWVrLmRheXNbM10sIGZvY3VzOiAnTGVncycgfSxcbiAgICAgICAgeyAuLi5iYXNlV2Vlay5kYXlzWzFdLCBmb2N1czogJ1VwcGVyJyB9LFxuICAgICAgICB7IC4uLmJhc2VXZWVrLmRheXNbNF0sIGZvY3VzOiAnTG93ZXInIH0sXG4gICAgICAgIHsgLi4uYmFzZVdlZWsuZGF5c1syXSwgZm9jdXM6IGBGb2N1cyDigJQgJHtmb2N1c31gIH1cbiAgICAgIF07XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWREYXlzID0gcGxhbm5lZERheXMubWFwKGRheSA9PiAoe1xuICAgICAgLi4uZGF5LFxuICAgICAgZXhlcmNpc2VzOiBkYXkuZXhlcmNpc2VzLm1hcChleCA9PiB7XG4gICAgICAgIGNvbnN0IHNldHMgPSBNYXRoLm1heCgxLCBNYXRoLnJvdW5kKGV4LnNldHMgKiB2b2x1bWVNdWx0aXBsaWVyKSk7XG4gICAgICAgIGNvbnN0IGludGVuc2l0eV9wY3QgPSBleC5pbnRlbnNpdHlfcGN0ICE9IG51bGwgPyBNYXRoLm1heCgwLjUsIE1hdGgubWluKDAuOSwgKGV4LmludGVuc2l0eV9wY3QgKyBpbnRlbnNpdHlCdW1wKSkpIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4geyAuLi5leCwgc2V0cywgaW50ZW5zaXR5X3BjdCB9O1xuICAgICAgfSlcbiAgICB9KSk7XG5cbiAgICB3ZWVrcy5wdXNoKHsgd2Vla19udW1iZXI6IHcsIGRheXM6IGFkanVzdGVkRGF5cyB9KTtcbiAgfVxuICByZXR1cm4gd2Vla3M7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWZpbmVXaXRoR1BUKGJhc2VQcm9ncmFtOiBhbnksIGNpdGF0aW9uczogc3RyaW5nW10pIHtcbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkgcmV0dXJuIGJhc2VQcm9ncmFtO1xuICB0cnkge1xuICAgIGNvbnN0IHsgT3BlbkFJIH0gPSBhd2FpdCBpbXBvcnQoJ29wZW5haScpO1xuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBPcGVuQUkoeyBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIH0pO1xuICAgIGNvbnN0IHByb21wdCA9IGBZb3UgYXJlIGEgc3RyZW5ndGggY29hY2guIFJlZmluZSB0aGUgcHJvdmlkZWQgMTItd2VlayBoeXBlcnRyb3BoeSBwcm9ncmFtIEpTT04gYnkgYWRkaW5nIG1pY3JvcHJvZ3Jlc3Npb24gbm90ZXMsIGRlbG9hZCBhZGp1c3RtZW50cyAoMzoxKSwgYW5kIHNhZmUgc3dhcHMgcmVzcGVjdGluZyBpbmp1cmllcy9lcXVpcG1lbnQuIFJldHVybiB2YWxpZCBKU09OIG9ubHkuIENpdGF0aW9uczogJHtjaXRhdGlvbnMuam9pbignLCAnKX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnJlc3BvbnNlcy5jcmVhdGUoe1xuICAgICAgbW9kZWw6ICdncHQtNG8tbWluaScsXG4gICAgICB0ZW1wZXJhdHVyZTogMC4yLFxuICAgICAgaW5wdXQ6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1JldHVybiBKU09OIG9ubHkuJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBKU09OLnN0cmluZ2lmeShiYXNlUHJvZ3JhbSkgfVxuICAgICAgXSBhcyBhbnlcbiAgICB9IGFzIGFueSk7XG4gICAgY29uc3QgdGV4dCA9IChyZXNwb25zZSBhcyBhbnkpLm91dHB1dF90ZXh0ID8/IChyZXNwb25zZSBhcyBhbnkpLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudDtcbiAgICBpZiAoIXRleHQpIHJldHVybiBiYXNlUHJvZ3JhbTtcbiAgICBjb25zdCBqc29uU3RhcnQgPSB0ZXh0LmluZGV4T2YoJ3snKTtcbiAgICBjb25zdCBqc29uRW5kID0gdGV4dC5sYXN0SW5kZXhPZignfScpO1xuICAgIGlmIChqc29uU3RhcnQgPj0gMCAmJiBqc29uRW5kID4ganNvblN0YXJ0KSB7XG4gICAgICBjb25zdCByZWZpbmVkID0gSlNPTi5wYXJzZSh0ZXh0LnNsaWNlKGpzb25TdGFydCwganNvbkVuZCArIDEpKTtcbiAgICAgIHJldHVybiByZWZpbmVkO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGJhc2VQcm9ncmFtO1xuICB9XG4gIHJldHVybiBiYXNlUHJvZ3JhbTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVQcm9ncmFtVG9TdXBhYmFzZShwcm9ncmFtOiBhbnkpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGdldFN1cGFiYXNlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4vc3VwYWJhc2UnKTtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KCk7XG4gICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZ3JhbXMnKS51cHNlcnQoeyBpZDogcHJvZ3JhbS5wcm9ncmFtX2lkLCBuYW1lOiBwcm9ncmFtLm5hbWUsIGRhdGE6IHByb2dyYW0sIHBhaWQ6IHByb2dyYW0ucGFpZCA/PyBmYWxzZSB9KTtcbiAgfSBjYXRjaCB7fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuVmlld1dlZWsod2VlazogbnVtYmVyLCBwYWlkOiBib29sZWFuKSB7XG4gIHJldHVybiB3ZWVrIDw9IDEgfHwgcGFpZDtcbn1cblxuXG4iXSwibmFtZXMiOlsieiIsIk9uYm9hcmRpbmdJbnB1dCIsIm9iamVjdCIsImlkIiwic3RyaW5nIiwib3B0aW9uYWwiLCJhZ2UiLCJudW1iZXIiLCJzZXgiLCJlbnVtIiwiQlciLCJleHBlcmllbmNlX2xldmVsIiwidHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2UiLCJpbnQiLCJtaW4iLCJtYXgiLCJlcXVpcG1lbnRfYXZhaWxhYmxlIiwiYXJyYXkiLCJkZWZhdWx0IiwiZ29hbHMiLCJiaWczX1BScyIsImJlbmNoIiwic3F1YXQiLCJkZWFkbGlmdCIsImluanVyaWVzIiwibW92ZW1lbnRfcHJlZmVyZW5jZXMiLCJwcmVmZXJyZWRfc3BsaXQiLCJmb2N1c19wb2ludCIsInNlc3Npb25fbGVuZ3RoX21pbiIsInJlc3RfcHJlZiIsIm51dHJpdGlvbiIsImdlbmVyYXRlRGV0ZXJtaW5pc3RpY1dlZWsiLCJpbnB1dCIsImV4cCIsImJhc2VQY3QiLCJyZXN0Q29tcG91bmQiLCJyZXN0QWNjZXNzb3J5IiwiYnBQY3QiLCJNYXRoIiwic3FQY3QiLCJkbFBjdCIsImRheTEiLCJuYW1lIiwic2V0cyIsInJlcHMiLCJycGUiLCJ0ZW1wbyIsInJlc3Rfc2Vjb25kcyIsImludGVuc2l0eV9wY3QiLCJkYXkyIiwiZGF5MyIsImRheTQiLCJkYXk1Iiwid2Vla19udW1iZXIiLCJkYXlzIiwiZGF5X251bWJlciIsImZvY3VzIiwiZXhlcmNpc2VzIiwibm90ZXMiLCJnZW5lcmF0ZUZ1bGxQcm9ncmFtIiwid2Vla3MiLCJkYXlzUGVyV2VlayIsInciLCJiYXNlV2VlayIsImN5Y2xlUG9zIiwidm9sdW1lTXVsdGlwbGllciIsImludGVuc2l0eUJ1bXAiLCJwbGFubmVkRGF5cyIsInNsaWNlIiwiYWRqdXN0ZWREYXlzIiwibWFwIiwiZGF5IiwiZXgiLCJyb3VuZCIsInVuZGVmaW5lZCIsInB1c2giLCJyZWZpbmVXaXRoR1BUIiwiYmFzZVByb2dyYW0iLCJjaXRhdGlvbnMiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJPcGVuQUkiLCJjbGllbnQiLCJhcGlLZXkiLCJwcm9tcHQiLCJqb2luIiwicmVzcG9uc2UiLCJyZXNwb25zZXMiLCJjcmVhdGUiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwicm9sZSIsImNvbnRlbnQiLCJKU09OIiwic3RyaW5naWZ5IiwidGV4dCIsIm91dHB1dF90ZXh0IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJqc29uU3RhcnQiLCJpbmRleE9mIiwianNvbkVuZCIsImxhc3RJbmRleE9mIiwicmVmaW5lZCIsInBhcnNlIiwic2F2ZVByb2dyYW1Ub1N1cGFiYXNlIiwicHJvZ3JhbSIsImdldFN1cGFiYXNlQ2xpZW50Iiwic3VwYWJhc2UiLCJmcm9tIiwidXBzZXJ0IiwicHJvZ3JhbV9pZCIsImRhdGEiLCJwYWlkIiwiY2FuVmlld1dlZWsiLCJ3ZWVrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/program-generator.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.ts":
/*!********************************!*\
  !*** ./lib/supabase-server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServiceSupabaseClient: () => (/* binding */ getServiceSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nfunction getServiceSupabaseClient() {\n    const url = \"https://ltozsbrlhquklxtvgjrx.supabase.co\";\n    const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!url || !serviceKey) {\n        throw new Error(\"Missing Supabase service role env vars\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, serviceKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRTlDLFNBQVNDO0lBQ2QsTUFBTUMsTUFBTUMsMENBQW9DO0lBQ2hELE1BQU1HLGFBQWFILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0lBQ3hELElBQUksQ0FBQ0wsT0FBTyxDQUFDSSxZQUFZO1FBQ3ZCLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtJQUNBLE9BQU9SLG1FQUFZQSxDQUFDRSxLQUFLSTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJhbGlmdC8uL2xpYi9zdXBhYmFzZS1zZXJ2ZXIudHM/MDk0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVN1cGFiYXNlQ2xpZW50KCkge1xuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gIGNvbnN0IHNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuICBpZiAoIXVybCB8fCAhc2VydmljZUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBzZXJ2aWNlIHJvbGUgZW52IHZhcnMnKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHVybCwgc2VydmljZUtleSk7XG59XG5cblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.ts\n");

/***/ }),

/***/ "(rsc)/./types/program.schema.json":
/*!***********************************!*\
  !*** ./types/program.schema.json ***!
  \***********************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://neuralift.app/schemas/program.schema.json","title":"NeuralLiftProgram","type":"object","required":["program_id","name","weeks","metadata"],"properties":{"program_id":{"type":"string"},"name":{"type":"string"},"paid":{"type":"boolean","default":false},"weeks":{"type":"array","minItems":12,"items":{"type":"object","required":["week_number","days"],"properties":{"week_number":{"type":"integer","minimum":1,"maximum":12},"days":{"type":"array","minItems":2,"maxItems":6,"items":{"type":"object","required":["day_number","focus","exercises"],"properties":{"day_number":{"type":"integer","minimum":1},"focus":{"type":"string"},"exercises":{"type":"array","items":{"type":"object","required":["id","name","sets","reps","rpe","tempo","rest_seconds"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"sets":{"type":"integer","minimum":1,"maximum":8},"reps":{"type":"string"},"rpe":{"type":"number","minimum":5,"maximum":10},"tempo":{"type":"string"},"rest_seconds":{"type":"integer","minimum":30,"maximum":300},"intensity_pct":{"type":"number","minimum":0.4,"maximum":0.9}}}},"notes":{"type":"string"}}}}}}},"metadata":{"type":"object","required":["created_at","source","volume_profile"],"properties":{"created_at":{"type":"string","format":"date-time"},"source":{"type":"array","items":{"type":"string"}},"volume_profile":{"type":"object","additionalProperties":{"type":"integer"}}},"additionalProperties":true}},"additionalProperties":false}');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/ajv","vendor-chunks/zod","vendor-chunks/fast-uri","vendor-chunks/json-schema-traverse","vendor-chunks/fast-deep-equal"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();