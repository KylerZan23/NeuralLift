"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-program/route";
exports.ids = ["app/api/generate-program/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kyler_NeuralLift_app_api_generate_program_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-program/route.ts */ \"(rsc)/./app/api/generate-program/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-program/route\",\n        pathname: \"/api/generate-program\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-program/route\"\n    },\n    resolvedPagePath: \"/Users/kyler/NeuralLift/app/api/generate-program/route.ts\",\n    nextConfigOutput,\n    userland: _Users_kyler_NeuralLift_app_api_generate_program_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-program/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1wcm9ncmFtJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnZW5lcmF0ZS1wcm9ncmFtJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VuZXJhdGUtcHJvZ3JhbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmt5bGVyJTJGTmV1cmFsTGlmdCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZreWxlciUyRk5ldXJhbExpZnQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1M7QUFDdEY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXVyYWxpZnQvPzBiMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2t5bGVyL05ldXJhbExpZnQvYXBwL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGUtcHJvZ3JhbVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9reWxlci9OZXVyYWxMaWZ0L2FwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-program/route.ts":
/*!*******************************************!*\
  !*** ./app/api/generate-program/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/program-generator */ \"(rsc)/./lib/program-generator.ts\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ajv */ \"(rsc)/./node_modules/ajv/dist/ajv.js\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _types_program_schema_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/types/program.schema.json */ \"(rsc)/./types/program.schema.json\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/supabase-server */ \"(rsc)/./lib/supabase-server.ts\");\n\n\n\n\n\nasync function GET(req) {\n    const url = new URL(req.url);\n    const id = url.searchParams.get(\"id\") ?? \"demo\";\n    const input = _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.OnboardingInput.parse({\n        experience_level: \"Intermediate\",\n        training_frequency_preference: 5,\n        equipment_available: [\n            \"Gym\"\n        ],\n        big3_PRs: {\n            bench: 185,\n            squat: 185,\n            deadlift: 225\n        },\n        preferred_split: \"Push/Pull/Legs\",\n        session_length_min: 60\n    });\n    const weeks = (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateFullProgram)(input);\n    const program = {\n        program_id: id,\n        name: \"12-week Hypertrophy Program\",\n        paid: false,\n        weeks,\n        metadata: {\n            created_at: new Date().toISOString(),\n            source: [\n                \"science-refs\",\n                \"Jeff Nippard\",\n                \"TNF\",\n                \"Mike Israetel\"\n            ],\n            volume_profile: {}\n        }\n    };\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(program, {\n        status: 200\n    });\n}\nasync function POST(req) {\n    const body = await req.json();\n    const input = _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.OnboardingInput.parse(body.input);\n    const gpt = Boolean(body.useGPT);\n    const base = {\n        program_id: body.programId ?? crypto.randomUUID(),\n        name: \"12-week Hypertrophy Program\",\n        paid: false,\n        weeks: (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateFullProgram)(input),\n        metadata: {\n            created_at: new Date().toISOString(),\n            source: [\n                \"science-refs\",\n                \"Jeff Nippard\",\n                \"TNF\",\n                \"Mike Israetel\"\n            ],\n            volume_profile: {}\n        }\n    };\n    const program = gpt ? await (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.refineWithGPT)(base, body.citations ?? []) : base;\n    // Validate program against JSON schema before saving\n    try {\n        const ajv = new (ajv__WEBPACK_IMPORTED_MODULE_2___default())({\n            allErrors: true,\n            strict: false\n        });\n        const validate = ajv.compile(_types_program_schema_json__WEBPACK_IMPORTED_MODULE_3__);\n        const valid = validate(program);\n        if (!valid) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid program payload\",\n                details: validate.errors\n            }, {\n                status: 400\n            });\n        }\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Schema validation failed\",\n            details: e?.message ?? String(e)\n        }, {\n            status: 500\n        });\n    }\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_4__.getServiceSupabaseClient)();\n    await supabase.from(\"programs\").upsert({\n        id: program.program_id,\n        user_id: body.userId ?? null,\n        name: program.name,\n        data: program,\n        paid: program.paid ?? false\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(program, {\n        status: 201\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLXByb2dyYW0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDc0M7QUFDeEU7QUFDa0M7QUFDUztBQUUxRCxlQUFlTyxJQUFJQyxHQUFnQjtJQUN4QyxNQUFNQyxNQUFNLElBQUlDLElBQUlGLElBQUlDLEdBQUc7SUFDM0IsTUFBTUUsS0FBS0YsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUMsU0FBUztJQUN6QyxNQUFNQyxRQUFRYixtRUFBZUEsQ0FBQ2MsS0FBSyxDQUFDO1FBQ2xDQyxrQkFBa0I7UUFDbEJDLCtCQUErQjtRQUMvQkMscUJBQXFCO1lBQUM7U0FBTTtRQUM1QkMsVUFBVTtZQUFFQyxPQUFPO1lBQUtDLE9BQU87WUFBS0MsVUFBVTtRQUFJO1FBQ2xEQyxpQkFBaUI7UUFDakJDLG9CQUFvQjtJQUN0QjtJQUVBLE1BQU1DLFFBQVF2QiwyRUFBbUJBLENBQUNZO0lBQ2xDLE1BQU1ZLFVBQVU7UUFDZEMsWUFBWWhCO1FBQ1ppQixNQUFNO1FBQ05DLE1BQU07UUFDTko7UUFDQUssVUFBVTtZQUFFQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7WUFBSUMsUUFBUTtnQkFBQztnQkFBZ0I7Z0JBQWdCO2dCQUFPO2FBQWdCO1lBQUVDLGdCQUFnQixDQUFDO1FBQUU7SUFDekk7SUFFQSxPQUFPbkMscURBQVlBLENBQUNvQyxJQUFJLENBQUNWLFNBQVM7UUFBRVcsUUFBUTtJQUFJO0FBQ2xEO0FBRU8sZUFBZUMsS0FBSzlCLEdBQWdCO0lBQ3pDLE1BQU0rQixPQUFPLE1BQU0vQixJQUFJNEIsSUFBSTtJQUMzQixNQUFNdEIsUUFBUWIsbUVBQWVBLENBQUNjLEtBQUssQ0FBQ3dCLEtBQUt6QixLQUFLO0lBQzlDLE1BQU0wQixNQUFNQyxRQUFRRixLQUFLRyxNQUFNO0lBQy9CLE1BQU1DLE9BQU87UUFDWGhCLFlBQVlZLEtBQUtLLFNBQVMsSUFBSUMsT0FBT0MsVUFBVTtRQUMvQ2xCLE1BQU07UUFDTkMsTUFBTTtRQUNOSixPQUFPdkIsMkVBQW1CQSxDQUFDWTtRQUMzQmdCLFVBQVU7WUFBRUMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1lBQUlDLFFBQVE7Z0JBQUM7Z0JBQWdCO2dCQUFnQjtnQkFBTzthQUFnQjtZQUFFQyxnQkFBZ0IsQ0FBQztRQUFFO0lBQ3pJO0lBRUEsTUFBTVQsVUFBVWMsTUFBTSxNQUFNckMscUVBQWFBLENBQUN3QyxNQUFNSixLQUFLUSxTQUFTLElBQUksRUFBRSxJQUFJSjtJQUN4RSxxREFBcUQ7SUFDckQsSUFBSTtRQUNGLE1BQU1LLE1BQU0sSUFBSTVDLDRDQUFHQSxDQUFDO1lBQUU2QyxXQUFXO1lBQU1DLFFBQVE7UUFBTTtRQUNyRCxNQUFNQyxXQUFXSCxJQUFJSSxPQUFPLENBQUMvQyx1REFBYUE7UUFDMUMsTUFBTWdELFFBQVFGLFNBQVN6QjtRQUN2QixJQUFJLENBQUMyQixPQUFPO1lBQ1YsT0FBT3JELHFEQUFZQSxDQUFDb0MsSUFBSSxDQUFDO2dCQUFFa0IsT0FBTztnQkFBMkJDLFNBQVNKLFNBQVNLLE1BQU07WUFBQyxHQUFHO2dCQUFFbkIsUUFBUTtZQUFJO1FBQ3pHO0lBQ0YsRUFBRSxPQUFPb0IsR0FBUTtRQUNmLE9BQU96RCxxREFBWUEsQ0FBQ29DLElBQUksQ0FBQztZQUFFa0IsT0FBTztZQUE0QkMsU0FBU0UsR0FBR0MsV0FBV0MsT0FBT0Y7UUFBRyxHQUFHO1lBQUVwQixRQUFRO1FBQUk7SUFDbEg7SUFDQSxNQUFNdUIsV0FBV3RELDhFQUF3QkE7SUFDekMsTUFBTXNELFNBQVNDLElBQUksQ0FBQyxZQUFZQyxNQUFNLENBQUM7UUFBRW5ELElBQUllLFFBQVFDLFVBQVU7UUFBRW9DLFNBQVN4QixLQUFLeUIsTUFBTSxJQUFJO1FBQU1wQyxNQUFNRixRQUFRRSxJQUFJO1FBQUVxQyxNQUFNdkM7UUFBU0csTUFBTUgsUUFBUUcsSUFBSSxJQUFJO0lBQU07SUFDOUosT0FBTzdCLHFEQUFZQSxDQUFDb0MsSUFBSSxDQUFDVixTQUFTO1FBQUVXLFFBQVE7SUFBSTtBQUNsRCIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJhbGlmdC8uL2FwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZS50cz9hNDk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBPbmJvYXJkaW5nSW5wdXQsIGdlbmVyYXRlRnVsbFByb2dyYW0sIHJlZmluZVdpdGhHUFQgfSBmcm9tICdAL2xpYi9wcm9ncmFtLWdlbmVyYXRvcic7XG5pbXBvcnQgQWp2IGZyb20gJ2Fqdic7XG5pbXBvcnQgcHJvZ3JhbVNjaGVtYSBmcm9tICdAL3R5cGVzL3Byb2dyYW0uc2NoZW1hLmpzb24nO1xuaW1wb3J0IHsgZ2V0U2VydmljZVN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2Utc2VydmVyJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gIGNvbnN0IGlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2lkJykgPz8gJ2RlbW8nO1xuICBjb25zdCBpbnB1dCA9IE9uYm9hcmRpbmdJbnB1dC5wYXJzZSh7XG4gICAgZXhwZXJpZW5jZV9sZXZlbDogJ0ludGVybWVkaWF0ZScsXG4gICAgdHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2U6IDUsXG4gICAgZXF1aXBtZW50X2F2YWlsYWJsZTogWydHeW0nXSxcbiAgICBiaWczX1BSczogeyBiZW5jaDogMTg1LCBzcXVhdDogMTg1LCBkZWFkbGlmdDogMjI1IH0sXG4gICAgcHJlZmVycmVkX3NwbGl0OiAnUHVzaC9QdWxsL0xlZ3MnLFxuICAgIHNlc3Npb25fbGVuZ3RoX21pbjogNjBcbiAgfSk7XG5cbiAgY29uc3Qgd2Vla3MgPSBnZW5lcmF0ZUZ1bGxQcm9ncmFtKGlucHV0KTtcbiAgY29uc3QgcHJvZ3JhbSA9IHtcbiAgICBwcm9ncmFtX2lkOiBpZCxcbiAgICBuYW1lOiAnMTItd2VlayBIeXBlcnRyb3BoeSBQcm9ncmFtJyxcbiAgICBwYWlkOiBmYWxzZSxcbiAgICB3ZWVrcyxcbiAgICBtZXRhZGF0YTogeyBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIHNvdXJjZTogWydzY2llbmNlLXJlZnMnLCAnSmVmZiBOaXBwYXJkJywgJ1RORicsICdNaWtlIElzcmFldGVsJ10sIHZvbHVtZV9wcm9maWxlOiB7fSB9XG4gIH07XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHByb2dyYW0sIHsgc3RhdHVzOiAyMDAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gIGNvbnN0IGlucHV0ID0gT25ib2FyZGluZ0lucHV0LnBhcnNlKGJvZHkuaW5wdXQpO1xuICBjb25zdCBncHQgPSBCb29sZWFuKGJvZHkudXNlR1BUKTtcbiAgY29uc3QgYmFzZSA9IHtcbiAgICBwcm9ncmFtX2lkOiBib2R5LnByb2dyYW1JZCA/PyBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgIG5hbWU6ICcxMi13ZWVrIEh5cGVydHJvcGh5IFByb2dyYW0nLFxuICAgIHBhaWQ6IGZhbHNlLFxuICAgIHdlZWtzOiBnZW5lcmF0ZUZ1bGxQcm9ncmFtKGlucHV0KSxcbiAgICBtZXRhZGF0YTogeyBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIHNvdXJjZTogWydzY2llbmNlLXJlZnMnLCAnSmVmZiBOaXBwYXJkJywgJ1RORicsICdNaWtlIElzcmFldGVsJ10sIHZvbHVtZV9wcm9maWxlOiB7fSB9XG4gIH07XG5cbiAgY29uc3QgcHJvZ3JhbSA9IGdwdCA/IGF3YWl0IHJlZmluZVdpdGhHUFQoYmFzZSwgYm9keS5jaXRhdGlvbnMgPz8gW10pIDogYmFzZTtcbiAgLy8gVmFsaWRhdGUgcHJvZ3JhbSBhZ2FpbnN0IEpTT04gc2NoZW1hIGJlZm9yZSBzYXZpbmdcbiAgdHJ5IHtcbiAgICBjb25zdCBhanYgPSBuZXcgQWp2KHsgYWxsRXJyb3JzOiB0cnVlLCBzdHJpY3Q6IGZhbHNlIH0pO1xuICAgIGNvbnN0IHZhbGlkYXRlID0gYWp2LmNvbXBpbGUocHJvZ3JhbVNjaGVtYSBhcyBhbnkpO1xuICAgIGNvbnN0IHZhbGlkID0gdmFsaWRhdGUocHJvZ3JhbSk7XG4gICAgaWYgKCF2YWxpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHByb2dyYW0gcGF5bG9hZCcsIGRldGFpbHM6IHZhbGlkYXRlLmVycm9ycyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdTY2hlbWEgdmFsaWRhdGlvbiBmYWlsZWQnLCBkZXRhaWxzOiBlPy5tZXNzYWdlID8/IFN0cmluZyhlKSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U2VydmljZVN1cGFiYXNlQ2xpZW50KCk7XG4gIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2dyYW1zJykudXBzZXJ0KHsgaWQ6IHByb2dyYW0ucHJvZ3JhbV9pZCwgdXNlcl9pZDogYm9keS51c2VySWQgPz8gbnVsbCwgbmFtZTogcHJvZ3JhbS5uYW1lLCBkYXRhOiBwcm9ncmFtLCBwYWlkOiBwcm9ncmFtLnBhaWQgPz8gZmFsc2UgfSk7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihwcm9ncmFtLCB7IHN0YXR1czogMjAxIH0pO1xufVxuXG5cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJPbmJvYXJkaW5nSW5wdXQiLCJnZW5lcmF0ZUZ1bGxQcm9ncmFtIiwicmVmaW5lV2l0aEdQVCIsIkFqdiIsInByb2dyYW1TY2hlbWEiLCJnZXRTZXJ2aWNlU3VwYWJhc2VDbGllbnQiLCJHRVQiLCJyZXEiLCJ1cmwiLCJVUkwiLCJpZCIsInNlYXJjaFBhcmFtcyIsImdldCIsImlucHV0IiwicGFyc2UiLCJleHBlcmllbmNlX2xldmVsIiwidHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2UiLCJlcXVpcG1lbnRfYXZhaWxhYmxlIiwiYmlnM19QUnMiLCJiZW5jaCIsInNxdWF0IiwiZGVhZGxpZnQiLCJwcmVmZXJyZWRfc3BsaXQiLCJzZXNzaW9uX2xlbmd0aF9taW4iLCJ3ZWVrcyIsInByb2dyYW0iLCJwcm9ncmFtX2lkIiwibmFtZSIsInBhaWQiLCJtZXRhZGF0YSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzb3VyY2UiLCJ2b2x1bWVfcHJvZmlsZSIsImpzb24iLCJzdGF0dXMiLCJQT1NUIiwiYm9keSIsImdwdCIsIkJvb2xlYW4iLCJ1c2VHUFQiLCJiYXNlIiwicHJvZ3JhbUlkIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImNpdGF0aW9ucyIsImFqdiIsImFsbEVycm9ycyIsInN0cmljdCIsInZhbGlkYXRlIiwiY29tcGlsZSIsInZhbGlkIiwiZXJyb3IiLCJkZXRhaWxzIiwiZXJyb3JzIiwiZSIsIm1lc3NhZ2UiLCJTdHJpbmciLCJzdXBhYmFzZSIsImZyb20iLCJ1cHNlcnQiLCJ1c2VyX2lkIiwidXNlcklkIiwiZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-program/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/program-generator.ts":
/*!**********************************!*\
  !*** ./lib/program-generator.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OnboardingInput: () => (/* binding */ OnboardingInput),\n/* harmony export */   canViewWeek: () => (/* binding */ canViewWeek),\n/* harmony export */   generateDeterministicWeek: () => (/* binding */ generateDeterministicWeek),\n/* harmony export */   generateFullProgram: () => (/* binding */ generateFullProgram),\n/* harmony export */   refineWithGPT: () => (/* binding */ refineWithGPT),\n/* harmony export */   saveProgramToSupabase: () => (/* binding */ saveProgramToSupabase)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst OnboardingInput = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    age: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    sex: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"male\",\n        \"female\"\n    ]).optional(),\n    BW: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    experience_level: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"Beginner\",\n        \"Intermediate\",\n        \"Advanced\"\n    ]),\n    training_frequency_preference: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(3).max(6),\n    equipment_available: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).default([]),\n    goals: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).default([\n        \"hypertrophy\"\n    ]),\n    big3_PRs: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        bench: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        squat: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        deadlift: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n    }),\n    injuries: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).default([]),\n    movement_preferences: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).default([]),\n    preferred_split: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"Push/Pull/Legs\",\n        \"Upper/Lower\",\n        \"Full body\",\n        \"Custom\"\n    ]).default(\"Upper/Lower\"),\n    session_length_min: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(30).max(120).default(60),\n    rest_pref: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"auto\",\n        \"custom\"\n    ]).default(\"auto\"),\n    nutrition: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"deficit\",\n        \"surplus\",\n        \"maintenance\"\n    ]).default(\"maintenance\")\n});\nfunction generateDeterministicWeek(input) {\n    const exp = input.experience_level;\n    const basePct = exp === \"Beginner\" ? 0.65 : exp === \"Intermediate\" ? 0.72 : 0.75;\n    const restCompound = 120;\n    const restAccessory = input.rest_pref === \"custom\" ? 75 : 90;\n    const bpPct = Math.min(0.8, basePct);\n    const sqPct = Math.min(0.78, basePct);\n    const dlPct = Math.min(0.8, basePct);\n    const day1 = [\n        {\n            id: \"bp-01\",\n            name: \"Barbell Bench Press\",\n            sets: 4,\n            reps: \"6-8\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound,\n            intensity_pct: bpPct\n        },\n        {\n            id: \"ohp-01\",\n            name: \"Seated Dumbbell Shoulder Press\",\n            sets: 3,\n            reps: \"8-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restAccessory\n        },\n        {\n            id: \"incl-01\",\n            name: \"Incline Dumbbell Press\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restAccessory\n        },\n        {\n            id: \"fly-01\",\n            name: \"Cable Fly\",\n            sets: 3,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        },\n        {\n            id: \"tri-01\",\n            name: \"Overhead Triceps Extension\",\n            sets: 3,\n            reps: \"10-15\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: 60\n        }\n    ];\n    const day2 = [\n        {\n            id: \"sq-01\",\n            name: \"Barbell Back Squat\",\n            sets: 4,\n            reps: \"6-8\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound,\n            intensity_pct: sqPct\n        },\n        {\n            id: \"rdl-01\",\n            name: \"Romanian Deadlift\",\n            sets: 3,\n            reps: \"8-10\",\n            rpe: 8,\n            tempo: \"3-0-1\",\n            rest_seconds: restCompound\n        },\n        {\n            id: \"legp-01\",\n            name: \"Leg Press\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restAccessory\n        },\n        {\n            id: \"ext-01\",\n            name: \"Leg Extension\",\n            sets: 2,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        },\n        {\n            id: \"calf-01\",\n            name: \"Seated Calf Raise\",\n            sets: 3,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        }\n    ];\n    const day3 = [\n        {\n            id: \"row-01\",\n            name: \"Barbell Row\",\n            sets: 4,\n            reps: \"6-10\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound\n        },\n        {\n            id: \"pull-01\",\n            name: \"Lat Pulldown\",\n            sets: 3,\n            reps: \"8-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restAccessory\n        },\n        {\n            id: \"face-01\",\n            name: \"Face Pull\",\n            sets: 3,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        },\n        {\n            id: \"curl-01\",\n            name: \"EZ Bar Curl\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: 60\n        }\n    ];\n    const day4 = [\n        {\n            id: \"dl-01\",\n            name: \"Conventional Deadlift\",\n            sets: 3,\n            reps: \"5-6\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: 180,\n            intensity_pct: dlPct\n        },\n        {\n            id: \"fsq-01\",\n            name: \"Front Squat\",\n            sets: 3,\n            reps: \"6-8\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound\n        },\n        {\n            id: \"curl-02\",\n            name: \"Lying Leg Curl\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 90\n        },\n        {\n            id: \"abs-01\",\n            name: \"Cable Crunch\",\n            sets: 3,\n            reps: \"10-15\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: 60\n        }\n    ];\n    const day5 = [\n        {\n            id: \"bp-02\",\n            name: \"Close-Grip Bench Press\",\n            sets: 3,\n            reps: \"6-8\",\n            rpe: 7,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound,\n            intensity_pct: Math.max(0.68, bpPct - 0.03)\n        },\n        {\n            id: \"ohp-02\",\n            name: \"Standing Overhead Press\",\n            sets: 3,\n            reps: \"6-8\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: restCompound\n        },\n        {\n            id: \"lat-01\",\n            name: \"Lateral Raise\",\n            sets: 3,\n            reps: \"12-15\",\n            rpe: 8,\n            tempo: \"2-1-1\",\n            rest_seconds: 60\n        },\n        {\n            id: \"dip-01\",\n            name: \"Cable Triceps Pushdown\",\n            sets: 3,\n            reps: \"10-12\",\n            rpe: 8,\n            tempo: \"2-0-1\",\n            rest_seconds: 60\n        }\n    ];\n    return {\n        week_number: 1,\n        days: [\n            {\n                day_number: 1,\n                focus: \"Upper — Push\",\n                exercises: day1,\n                notes: \"Add 2.5–5 lb if last set ≤ RPE 7 for 2 sessions.\"\n            },\n            {\n                day_number: 2,\n                focus: \"Lower — Squat focus\",\n                exercises: day2\n            },\n            {\n                day_number: 3,\n                focus: \"Upper — Pull\",\n                exercises: day3\n            },\n            {\n                day_number: 4,\n                focus: \"Lower — Deadlift focus\",\n                exercises: day4\n            },\n            {\n                day_number: 5,\n                focus: \"Upper — Chest/Delts bias\",\n                exercises: day5,\n                notes: \"Optional rear delt work if recovered.\"\n            }\n        ]\n    };\n}\nfunction generateFullProgram(input) {\n    const weeks = [];\n    const daysPerWeek = input.training_frequency_preference;\n    for(let w = 1; w <= 12; w++){\n        const baseWeek = generateDeterministicWeek(input);\n        // Progression: 3-week accumulation, 1-week deload cycle\n        const cyclePos = (w - 1) % 4 + 1; // 1..4\n        const volumeMultiplier = cyclePos === 4 ? 0.6 : 1 + 0.05 * (cyclePos - 1); // 1.0, 1.05, 1.10, 0.6\n        const intensityBump = cyclePos === 4 ? -0.05 : 0.01 * (w - 1); // slight upward trend, deload down\n        const adjustedDays = baseWeek.days.slice(0, daysPerWeek).map((day)=>({\n                ...day,\n                exercises: day.exercises.map((ex)=>{\n                    const sets = Math.max(1, Math.round(ex.sets * volumeMultiplier));\n                    const intensity_pct = ex.intensity_pct != null ? Math.max(0.5, Math.min(0.9, ex.intensity_pct + intensityBump)) : undefined;\n                    return {\n                        ...ex,\n                        sets,\n                        intensity_pct\n                    };\n                })\n            }));\n        weeks.push({\n            week_number: w,\n            days: adjustedDays\n        });\n    }\n    return weeks;\n}\nasync function refineWithGPT(baseProgram, citations) {\n    if (!process.env.OPENAI_API_KEY) return baseProgram;\n    try {\n        const { OpenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node\"), __webpack_require__.e(\"vendor-chunks/openai\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/humanize-ms\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const client = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n        const prompt = `You are a strength coach. Refine the provided 12-week hypertrophy program JSON by adding microprogression notes, deload adjustments (3:1), and safe swaps respecting injuries/equipment. Return valid JSON only. Citations: ${citations.join(\", \")}`;\n        const response = await client.responses.create({\n            model: \"gpt-4o-mini\",\n            temperature: 0.2,\n            input: [\n                {\n                    role: \"system\",\n                    content: \"Return JSON only.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                },\n                {\n                    role: \"user\",\n                    content: JSON.stringify(baseProgram)\n                }\n            ]\n        });\n        const text = response.output_text ?? response.choices?.[0]?.message?.content;\n        if (!text) return baseProgram;\n        const jsonStart = text.indexOf(\"{\");\n        const jsonEnd = text.lastIndexOf(\"}\");\n        if (jsonStart >= 0 && jsonEnd > jsonStart) {\n            const refined = JSON.parse(text.slice(jsonStart, jsonEnd + 1));\n            return refined;\n        }\n    } catch  {\n        return baseProgram;\n    }\n    return baseProgram;\n}\nasync function saveProgramToSupabase(program) {\n    try {\n        const { getSupabaseClient } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_supabase_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./supabase */ \"(rsc)/./lib/supabase.ts\"));\n        const supabase = getSupabaseClient();\n        await supabase.from(\"programs\").upsert({\n            id: program.program_id,\n            name: program.name,\n            data: program,\n            paid: program.paid ?? false\n        });\n    } catch  {}\n}\nfunction canViewWeek(week, paid) {\n    return week <= 1 || paid;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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K0IsV0FBV0UsVUFBVTtZQUMzRCxPQUFPRTtRQUNUO0lBQ0YsRUFBRSxPQUFNO1FBQ04sT0FBTzNCO0lBQ1Q7SUFDQSxPQUFPQTtBQUNUO0FBRU8sZUFBZTZCLHNCQUFzQkMsT0FBWTtJQUN0RCxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxpQkFBaUIsRUFBRSxHQUFHLE1BQU0sOEpBQU87UUFDM0MsTUFBTUMsV0FBV0Q7UUFDakIsTUFBTUMsU0FBU0MsSUFBSSxDQUFDLFlBQVlDLE1BQU0sQ0FBQztZQUFFMUcsSUFBSXNHLFFBQVFLLFVBQVU7WUFBRXJFLE1BQU1nRSxRQUFRaEUsSUFBSTtZQUFFc0UsTUFBTU47WUFBU08sTUFBTVAsUUFBUU8sSUFBSSxJQUFJO1FBQU07SUFDbEksRUFBRSxPQUFNLENBQUM7QUFDWDtBQUVPLFNBQVNDLFlBQVlDLElBQVksRUFBRUYsSUFBYTtJQUNyRCxPQUFPRSxRQUFRLEtBQUtGO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV1cmFsaWZ0Ly4vbGliL3Byb2dyYW0tZ2VuZXJhdG9yLnRzPzBiZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbmV4cG9ydCBjb25zdCBPbmJvYXJkaW5nSW5wdXQgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGFnZTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBzZXg6IHouZW51bShbJ21hbGUnLCAnZmVtYWxlJ10pLm9wdGlvbmFsKCksXG4gIEJXOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIGV4cGVyaWVuY2VfbGV2ZWw6IHouZW51bShbJ0JlZ2lubmVyJywgJ0ludGVybWVkaWF0ZScsICdBZHZhbmNlZCddKSxcbiAgdHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2U6IHoubnVtYmVyKCkuaW50KCkubWluKDMpLm1heCg2KSxcbiAgZXF1aXBtZW50X2F2YWlsYWJsZTogei5hcnJheSh6LnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgZ29hbHM6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbJ2h5cGVydHJvcGh5J10pLFxuICBiaWczX1BSczogei5vYmplY3QoeyBiZW5jaDogei5udW1iZXIoKS5vcHRpb25hbCgpLCBzcXVhdDogei5udW1iZXIoKS5vcHRpb25hbCgpLCBkZWFkbGlmdDogei5udW1iZXIoKS5vcHRpb25hbCgpIH0pLFxuICBpbmp1cmllczogei5hcnJheSh6LnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgbW92ZW1lbnRfcHJlZmVyZW5jZXM6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG4gIHByZWZlcnJlZF9zcGxpdDogei5lbnVtKFsnUHVzaC9QdWxsL0xlZ3MnLCAnVXBwZXIvTG93ZXInLCAnRnVsbCBib2R5JywgJ0N1c3RvbSddKS5kZWZhdWx0KCdVcHBlci9Mb3dlcicpLFxuICBzZXNzaW9uX2xlbmd0aF9taW46IHoubnVtYmVyKCkuaW50KCkubWluKDMwKS5tYXgoMTIwKS5kZWZhdWx0KDYwKSxcbiAgcmVzdF9wcmVmOiB6LmVudW0oWydhdXRvJywgJ2N1c3RvbSddKS5kZWZhdWx0KCdhdXRvJyksXG4gIG51dHJpdGlvbjogei5lbnVtKFsnZGVmaWNpdCcsICdzdXJwbHVzJywgJ21haW50ZW5hbmNlJ10pLmRlZmF1bHQoJ21haW50ZW5hbmNlJylcbn0pO1xuXG5leHBvcnQgdHlwZSBPbmJvYXJkaW5nSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBPbmJvYXJkaW5nSW5wdXQ+O1xuXG50eXBlIEV4ZXJjaXNlID0ge1xuICBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHNldHM6IG51bWJlcjsgcmVwczogc3RyaW5nOyBycGU6IG51bWJlcjsgdGVtcG86IHN0cmluZzsgcmVzdF9zZWNvbmRzOiBudW1iZXI7IGludGVuc2l0eV9wY3Q/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVEZXRlcm1pbmlzdGljV2VlayhpbnB1dDogT25ib2FyZGluZ0lucHV0KSB7XG4gIGNvbnN0IGV4cCA9IGlucHV0LmV4cGVyaWVuY2VfbGV2ZWw7XG4gIGNvbnN0IGJhc2VQY3QgPSBleHAgPT09ICdCZWdpbm5lcicgPyAwLjY1IDogZXhwID09PSAnSW50ZXJtZWRpYXRlJyA/IDAuNzIgOiAwLjc1O1xuICBjb25zdCByZXN0Q29tcG91bmQgPSAxMjA7XG4gIGNvbnN0IHJlc3RBY2Nlc3NvcnkgPSBpbnB1dC5yZXN0X3ByZWYgPT09ICdjdXN0b20nID8gNzUgOiA5MDtcblxuICBjb25zdCBicFBjdCA9IE1hdGgubWluKDAuOCwgYmFzZVBjdCk7XG4gIGNvbnN0IHNxUGN0ID0gTWF0aC5taW4oMC43OCwgYmFzZVBjdCk7XG4gIGNvbnN0IGRsUGN0ID0gTWF0aC5taW4oMC44LCBiYXNlUGN0KTtcblxuICBjb25zdCBkYXkxOiBFeGVyY2lzZVtdID0gW1xuICAgIHsgaWQ6ICdicC0wMScsIG5hbWU6ICdCYXJiZWxsIEJlbmNoIFByZXNzJywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBicFBjdCB9LFxuICAgIHsgaWQ6ICdvaHAtMDEnLCBuYW1lOiAnU2VhdGVkIER1bWJiZWxsIFNob3VsZGVyIFByZXNzJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICB7IGlkOiAnaW5jbC0wMScsIG5hbWU6ICdJbmNsaW5lIER1bWJiZWxsIFByZXNzJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgeyBpZDogJ2ZseS0wMScsIG5hbWU6ICdDYWJsZSBGbHknLCBzZXRzOiAzLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgeyBpZDogJ3RyaS0wMScsIG5hbWU6ICdPdmVyaGVhZCBUcmljZXBzIEV4dGVuc2lvbicsIHNldHM6IDMsIHJlcHM6ICcxMC0xNScsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgXTtcblxuICBjb25zdCBkYXkyOiBFeGVyY2lzZVtdID0gW1xuICAgIHsgaWQ6ICdzcS0wMScsIG5hbWU6ICdCYXJiZWxsIEJhY2sgU3F1YXQnLCBzZXRzOiA0LCByZXBzOiAnNi04JywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQsIGludGVuc2l0eV9wY3Q6IHNxUGN0IH0sXG4gICAgeyBpZDogJ3JkbC0wMScsIG5hbWU6ICdSb21hbmlhbiBEZWFkbGlmdCcsIHNldHM6IDMsIHJlcHM6ICc4LTEwJywgcnBlOiA4LCB0ZW1wbzogJzMtMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICB7IGlkOiAnbGVncC0wMScsIG5hbWU6ICdMZWcgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICB7IGlkOiAnZXh0LTAxJywgbmFtZTogJ0xlZyBFeHRlbnNpb24nLCBzZXRzOiAyLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgeyBpZDogJ2NhbGYtMDEnLCBuYW1lOiAnU2VhdGVkIENhbGYgUmFpc2UnLCBzZXRzOiAzLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gIF07XG5cbiAgY29uc3QgZGF5MzogRXhlcmNpc2VbXSA9IFtcbiAgICB7IGlkOiAncm93LTAxJywgbmFtZTogJ0JhcmJlbGwgUm93Jywgc2V0czogNCwgcmVwczogJzYtMTAnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgIHsgaWQ6ICdwdWxsLTAxJywgbmFtZTogJ0xhdCBQdWxsZG93bicsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgeyBpZDogJ2ZhY2UtMDEnLCBuYW1lOiAnRmFjZSBQdWxsJywgc2V0czogMywgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgIHsgaWQ6ICdjdXJsLTAxJywgbmFtZTogJ0VaIEJhciBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICBdO1xuXG4gIGNvbnN0IGRheTQ6IEV4ZXJjaXNlW10gPSBbXG4gICAgeyBpZDogJ2RsLTAxJywgbmFtZTogJ0NvbnZlbnRpb25hbCBEZWFkbGlmdCcsIHNldHM6IDMsIHJlcHM6ICc1LTYnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDE4MCwgaW50ZW5zaXR5X3BjdDogZGxQY3QgfSxcbiAgICB7IGlkOiAnZnNxLTAxJywgbmFtZTogJ0Zyb250IFNxdWF0Jywgc2V0czogMywgcmVwczogJzYtOCcsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgeyBpZDogJ2N1cmwtMDInLCBuYW1lOiAnTHlpbmcgTGVnIEN1cmwnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDkwIH0sXG4gICAgeyBpZDogJ2Ficy0wMScsIG5hbWU6ICdDYWJsZSBDcnVuY2gnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gIF07XG5cbiAgY29uc3QgZGF5NTogRXhlcmNpc2VbXSA9IFtcbiAgICB7IGlkOiAnYnAtMDInLCBuYW1lOiAnQ2xvc2UtR3JpcCBCZW5jaCBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICc2LTgnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCwgaW50ZW5zaXR5X3BjdDogTWF0aC5tYXgoMC42OCwgYnBQY3QgLSAwLjAzKSB9LFxuICAgIHsgaWQ6ICdvaHAtMDInLCBuYW1lOiAnU3RhbmRpbmcgT3ZlcmhlYWQgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnNi04JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICB7IGlkOiAnbGF0LTAxJywgbmFtZTogJ0xhdGVyYWwgUmFpc2UnLCBzZXRzOiAzLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgeyBpZDogJ2RpcC0wMScsIG5hbWU6ICdDYWJsZSBUcmljZXBzIFB1c2hkb3duJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICBdO1xuXG4gIHJldHVybiB7XG4gICAgd2Vla19udW1iZXI6IDEsXG4gICAgZGF5czogW1xuICAgICAgeyBkYXlfbnVtYmVyOiAxLCBmb2N1czogJ1VwcGVyIOKAlCBQdXNoJywgZXhlcmNpc2VzOiBkYXkxLCBub3RlczogJ0FkZCAyLjXigJM1IGxiIGlmIGxhc3Qgc2V0IOKJpCBSUEUgNyBmb3IgMiBzZXNzaW9ucy4nIH0sXG4gICAgICB7IGRheV9udW1iZXI6IDIsIGZvY3VzOiAnTG93ZXIg4oCUIFNxdWF0IGZvY3VzJywgZXhlcmNpc2VzOiBkYXkyIH0sXG4gICAgICB7IGRheV9udW1iZXI6IDMsIGZvY3VzOiAnVXBwZXIg4oCUIFB1bGwnLCBleGVyY2lzZXM6IGRheTMgfSxcbiAgICAgIHsgZGF5X251bWJlcjogNCwgZm9jdXM6ICdMb3dlciDigJQgRGVhZGxpZnQgZm9jdXMnLCBleGVyY2lzZXM6IGRheTQgfSxcbiAgICAgIHsgZGF5X251bWJlcjogNSwgZm9jdXM6ICdVcHBlciDigJQgQ2hlc3QvRGVsdHMgYmlhcycsIGV4ZXJjaXNlczogZGF5NSwgbm90ZXM6ICdPcHRpb25hbCByZWFyIGRlbHQgd29yayBpZiByZWNvdmVyZWQuJyB9LFxuICAgIF1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRnVsbFByb2dyYW0oaW5wdXQ6IE9uYm9hcmRpbmdJbnB1dCkge1xuICBjb25zdCB3ZWVrcyA9IFtdIGFzIEFycmF5PHsgd2Vla19udW1iZXI6IG51bWJlcjsgZGF5czogYW55W10gfT47XG4gIGNvbnN0IGRheXNQZXJXZWVrID0gaW5wdXQudHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2U7XG4gIGZvciAobGV0IHcgPSAxOyB3IDw9IDEyOyB3KyspIHtcbiAgICBjb25zdCBiYXNlV2VlayA9IGdlbmVyYXRlRGV0ZXJtaW5pc3RpY1dlZWsoaW5wdXQpO1xuICAgIC8vIFByb2dyZXNzaW9uOiAzLXdlZWsgYWNjdW11bGF0aW9uLCAxLXdlZWsgZGVsb2FkIGN5Y2xlXG4gICAgY29uc3QgY3ljbGVQb3MgPSAoKHcgLSAxKSAlIDQpICsgMTsgLy8gMS4uNFxuICAgIGNvbnN0IHZvbHVtZU11bHRpcGxpZXIgPSBjeWNsZVBvcyA9PT0gNCA/IDAuNiA6IDEgKyAwLjA1ICogKGN5Y2xlUG9zIC0gMSk7IC8vIDEuMCwgMS4wNSwgMS4xMCwgMC42XG4gICAgY29uc3QgaW50ZW5zaXR5QnVtcCA9IGN5Y2xlUG9zID09PSA0ID8gLTAuMDUgOiAwLjAxICogKHcgLSAxKTsgLy8gc2xpZ2h0IHVwd2FyZCB0cmVuZCwgZGVsb2FkIGRvd25cblxuICAgIGNvbnN0IGFkanVzdGVkRGF5cyA9IGJhc2VXZWVrLmRheXMuc2xpY2UoMCwgZGF5c1BlcldlZWspLm1hcChkYXkgPT4gKHtcbiAgICAgIC4uLmRheSxcbiAgICAgIGV4ZXJjaXNlczogZGF5LmV4ZXJjaXNlcy5tYXAoZXggPT4ge1xuICAgICAgICBjb25zdCBzZXRzID0gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZChleC5zZXRzICogdm9sdW1lTXVsdGlwbGllcikpO1xuICAgICAgICBjb25zdCBpbnRlbnNpdHlfcGN0ID0gZXguaW50ZW5zaXR5X3BjdCAhPSBudWxsID8gTWF0aC5tYXgoMC41LCBNYXRoLm1pbigwLjksIChleC5pbnRlbnNpdHlfcGN0ICsgaW50ZW5zaXR5QnVtcCkpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHsgLi4uZXgsIHNldHMsIGludGVuc2l0eV9wY3QgfTtcbiAgICAgIH0pXG4gICAgfSkpO1xuXG4gICAgd2Vla3MucHVzaCh7IHdlZWtfbnVtYmVyOiB3LCBkYXlzOiBhZGp1c3RlZERheXMgfSk7XG4gIH1cbiAgcmV0dXJuIHdlZWtzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmaW5lV2l0aEdQVChiYXNlUHJvZ3JhbTogYW55LCBjaXRhdGlvbnM6IHN0cmluZ1tdKSB7XG4gIGlmICghcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkpIHJldHVybiBiYXNlUHJvZ3JhbTtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IE9wZW5BSSB9ID0gYXdhaXQgaW1wb3J0KCdvcGVuYWknKTtcbiAgICBjb25zdCBjbGllbnQgPSBuZXcgT3BlbkFJKHsgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB9KTtcbiAgICBjb25zdCBwcm9tcHQgPSBgWW91IGFyZSBhIHN0cmVuZ3RoIGNvYWNoLiBSZWZpbmUgdGhlIHByb3ZpZGVkIDEyLXdlZWsgaHlwZXJ0cm9waHkgcHJvZ3JhbSBKU09OIGJ5IGFkZGluZyBtaWNyb3Byb2dyZXNzaW9uIG5vdGVzLCBkZWxvYWQgYWRqdXN0bWVudHMgKDM6MSksIGFuZCBzYWZlIHN3YXBzIHJlc3BlY3RpbmcgaW5qdXJpZXMvZXF1aXBtZW50LiBSZXR1cm4gdmFsaWQgSlNPTiBvbmx5LiBDaXRhdGlvbnM6ICR7Y2l0YXRpb25zLmpvaW4oJywgJyl9YDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5yZXNwb25zZXMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmknLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuMixcbiAgICAgIGlucHV0OiBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6ICdSZXR1cm4gSlNPTiBvbmx5LicgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHByb21wdCB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogSlNPTi5zdHJpbmdpZnkoYmFzZVByb2dyYW0pIH1cbiAgICAgIF0gYXMgYW55XG4gICAgfSBhcyBhbnkpO1xuICAgIGNvbnN0IHRleHQgPSAocmVzcG9uc2UgYXMgYW55KS5vdXRwdXRfdGV4dCA/PyAocmVzcG9uc2UgYXMgYW55KS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ7XG4gICAgaWYgKCF0ZXh0KSByZXR1cm4gYmFzZVByb2dyYW07XG4gICAgY29uc3QganNvblN0YXJ0ID0gdGV4dC5pbmRleE9mKCd7Jyk7XG4gICAgY29uc3QganNvbkVuZCA9IHRleHQubGFzdEluZGV4T2YoJ30nKTtcbiAgICBpZiAoanNvblN0YXJ0ID49IDAgJiYganNvbkVuZCA+IGpzb25TdGFydCkge1xuICAgICAgY29uc3QgcmVmaW5lZCA9IEpTT04ucGFyc2UodGV4dC5zbGljZShqc29uU3RhcnQsIGpzb25FbmQgKyAxKSk7XG4gICAgICByZXR1cm4gcmVmaW5lZDtcbiAgICB9XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBiYXNlUHJvZ3JhbTtcbiAgfVxuICByZXR1cm4gYmFzZVByb2dyYW07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlUHJvZ3JhbVRvU3VwYWJhc2UocHJvZ3JhbTogYW55KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBnZXRTdXBhYmFzZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCcuL3N1cGFiYXNlJyk7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUNsaWVudCgpO1xuICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2dyYW1zJykudXBzZXJ0KHsgaWQ6IHByb2dyYW0ucHJvZ3JhbV9pZCwgbmFtZTogcHJvZ3JhbS5uYW1lLCBkYXRhOiBwcm9ncmFtLCBwYWlkOiBwcm9ncmFtLnBhaWQgPz8gZmFsc2UgfSk7XG4gIH0gY2F0Y2gge31cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhblZpZXdXZWVrKHdlZWs6IG51bWJlciwgcGFpZDogYm9vbGVhbikge1xuICByZXR1cm4gd2VlayA8PSAxIHx8IHBhaWQ7XG59XG5cblxuIl0sIm5hbWVzIjpbInoiLCJPbmJvYXJkaW5nSW5wdXQiLCJvYmplY3QiLCJpZCIsInN0cmluZyIsIm9wdGlvbmFsIiwiYWdlIiwibnVtYmVyIiwic2V4IiwiZW51bSIsIkJXIiwiZXhwZXJpZW5jZV9sZXZlbCIsInRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlIiwiaW50IiwibWluIiwibWF4IiwiZXF1aXBtZW50X2F2YWlsYWJsZSIsImFycmF5IiwiZGVmYXVsdCIsImdvYWxzIiwiYmlnM19QUnMiLCJiZW5jaCIsInNxdWF0IiwiZGVhZGxpZnQiLCJpbmp1cmllcyIsIm1vdmVtZW50X3ByZWZlcmVuY2VzIiwicHJlZmVycmVkX3NwbGl0Iiwic2Vzc2lvbl9sZW5ndGhfbWluIiwicmVzdF9wcmVmIiwibnV0cml0aW9uIiwiZ2VuZXJhdGVEZXRlcm1pbmlzdGljV2VlayIsImlucHV0IiwiZXhwIiwiYmFzZVBjdCIsInJlc3RDb21wb3VuZCIsInJlc3RBY2Nlc3NvcnkiLCJicFBjdCIsIk1hdGgiLCJzcVBjdCIsImRsUGN0IiwiZGF5MSIsIm5hbWUiLCJzZXRzIiwicmVwcyIsInJwZSIsInRlbXBvIiwicmVzdF9zZWNvbmRzIiwiaW50ZW5zaXR5X3BjdCIsImRheTIiLCJkYXkzIiwiZGF5NCIsImRheTUiLCJ3ZWVrX251bWJlciIsImRheXMiLCJkYXlfbnVtYmVyIiwiZm9jdXMiLCJleGVyY2lzZXMiLCJub3RlcyIsImdlbmVyYXRlRnVsbFByb2dyYW0iLCJ3ZWVrcyIsImRheXNQZXJXZWVrIiwidyIsImJhc2VXZWVrIiwiY3ljbGVQb3MiLCJ2b2x1bWVNdWx0aXBsaWVyIiwiaW50ZW5zaXR5QnVtcCIsImFkanVzdGVkRGF5cyIsInNsaWNlIiwibWFwIiwiZGF5IiwiZXgiLCJyb3VuZCIsInVuZGVmaW5lZCIsInB1c2giLCJyZWZpbmVXaXRoR1BUIiwiYmFzZVByb2dyYW0iLCJjaXRhdGlvbnMiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJPcGVuQUkiLCJjbGllbnQiLCJhcGlLZXkiLCJwcm9tcHQiLCJqb2luIiwicmVzcG9uc2UiLCJyZXNwb25zZXMiLCJjcmVhdGUiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwicm9sZSIsImNvbnRlbnQiLCJKU09OIiwic3RyaW5naWZ5IiwidGV4dCIsIm91dHB1dF90ZXh0IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJqc29uU3RhcnQiLCJpbmRleE9mIiwianNvbkVuZCIsImxhc3RJbmRleE9mIiwicmVmaW5lZCIsInBhcnNlIiwic2F2ZVByb2dyYW1Ub1N1cGFiYXNlIiwicHJvZ3JhbSIsImdldFN1cGFiYXNlQ2xpZW50Iiwic3VwYWJhc2UiLCJmcm9tIiwidXBzZXJ0IiwicHJvZ3JhbV9pZCIsImRhdGEiLCJwYWlkIiwiY2FuVmlld1dlZWsiLCJ3ZWVrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/program-generator.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.ts":
/*!********************************!*\
  !*** ./lib/supabase-server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServiceSupabaseClient: () => (/* binding */ getServiceSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nfunction getServiceSupabaseClient() {\n    const url = \"https://ltozsbrlhquklxtvgjrx.supabase.co\";\n    const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!url || !serviceKey) {\n        throw new Error(\"Missing Supabase service role env vars\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, serviceKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRTlDLFNBQVNDO0lBQ2QsTUFBTUMsTUFBTUMsMENBQW9DO0lBQ2hELE1BQU1HLGFBQWFILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0lBQ3hELElBQUksQ0FBQ0wsT0FBTyxDQUFDSSxZQUFZO1FBQ3ZCLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtJQUNBLE9BQU9SLG1FQUFZQSxDQUFDRSxLQUFLSTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJhbGlmdC8uL2xpYi9zdXBhYmFzZS1zZXJ2ZXIudHM/MDk0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVN1cGFiYXNlQ2xpZW50KCkge1xuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gIGNvbnN0IHNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuICBpZiAoIXVybCB8fCAhc2VydmljZUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBzZXJ2aWNlIHJvbGUgZW52IHZhcnMnKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHVybCwgc2VydmljZUtleSk7XG59XG5cblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.ts\n");

/***/ }),

/***/ "(rsc)/./types/program.schema.json":
/*!***********************************!*\
  !*** ./types/program.schema.json ***!
  \***********************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://neuralift.app/schemas/program.schema.json","title":"NeuralLiftProgram","type":"object","required":["program_id","name","weeks","metadata"],"properties":{"program_id":{"type":"string"},"name":{"type":"string"},"paid":{"type":"boolean","default":false},"weeks":{"type":"array","minItems":12,"items":{"type":"object","required":["week_number","days"],"properties":{"week_number":{"type":"integer","minimum":1,"maximum":12},"days":{"type":"array","minItems":3,"maxItems":6,"items":{"type":"object","required":["day_number","focus","exercises"],"properties":{"day_number":{"type":"integer","minimum":1},"focus":{"type":"string"},"exercises":{"type":"array","items":{"type":"object","required":["id","name","sets","reps","rpe","tempo","rest_seconds"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"sets":{"type":"integer","minimum":1,"maximum":8},"reps":{"type":"string"},"rpe":{"type":"number","minimum":5,"maximum":10},"tempo":{"type":"string"},"rest_seconds":{"type":"integer","minimum":30,"maximum":300},"intensity_pct":{"type":"number","minimum":0.4,"maximum":0.9}}}},"notes":{"type":"string"}}}}}}},"metadata":{"type":"object","required":["created_at","source","volume_profile"],"properties":{"created_at":{"type":"string","format":"date-time"},"source":{"type":"array","items":{"type":"string"}},"volume_profile":{"type":"object","additionalProperties":{"type":"integer"}}},"additionalProperties":true}},"additionalProperties":false}');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/ajv","vendor-chunks/zod","vendor-chunks/fast-uri","vendor-chunks/json-schema-traverse","vendor-chunks/fast-deep-equal"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();