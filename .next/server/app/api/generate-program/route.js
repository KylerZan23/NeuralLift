"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-program/route";
exports.ids = ["app/api/generate-program/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kyler_NeuralLift_app_api_generate_program_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-program/route.ts */ \"(rsc)/./app/api/generate-program/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-program/route\",\n        pathname: \"/api/generate-program\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-program/route\"\n    },\n    resolvedPagePath: \"/Users/kyler/NeuralLift/app/api/generate-program/route.ts\",\n    nextConfigOutput,\n    userland: _Users_kyler_NeuralLift_app_api_generate_program_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-program/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1wcm9ncmFtJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnZW5lcmF0ZS1wcm9ncmFtJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VuZXJhdGUtcHJvZ3JhbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmt5bGVyJTJGTmV1cmFsTGlmdCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZreWxlciUyRk5ldXJhbExpZnQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1M7QUFDdEY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXVyYWxpZnQvPzBiMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2t5bGVyL05ldXJhbExpZnQvYXBwL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGUtcHJvZ3JhbVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9reWxlci9OZXVyYWxMaWZ0L2FwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-program/route.ts":
/*!*******************************************!*\
  !*** ./app/api/generate-program/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/program-generator */ \"(rsc)/./lib/program-generator.ts\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ajv */ \"(rsc)/./node_modules/ajv/dist/ajv.js\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _types_program_schema_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/types/program.schema.json */ \"(rsc)/./types/program.schema.json\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/supabase-server */ \"(rsc)/./lib/supabase-server.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n\n\n\nconst ajv = new (ajv__WEBPACK_IMPORTED_MODULE_2___default())({\n    allErrors: true,\n    strict: false\n});\nconst validateProgram = ajv.compile(_types_program_schema_json__WEBPACK_IMPORTED_MODULE_3__);\nconst RateLimitSchema = zod__WEBPACK_IMPORTED_MODULE_5__.object({\n    ip: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1),\n    key: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1)\n});\nasync function GET(req) {\n    const url = new URL(req.url);\n    const id = url.searchParams.get(\"id\") ?? \"demo\";\n    const input = _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.OnboardingInput.parse({\n        experience_level: \"Intermediate\",\n        training_frequency_preference: 5,\n        equipment_available: [\n            \"Gym\"\n        ],\n        big3_PRs: {\n            bench: 185,\n            squat: 185,\n            deadlift: 225\n        },\n        preferred_split: undefined,\n        session_length_min: 60\n    });\n    const weeks = (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateFullProgram)(input);\n    const program = {\n        program_id: id,\n        name: \"12-week Hypertrophy Program\",\n        paid: false,\n        weeks,\n        metadata: {\n            created_at: new Date().toISOString(),\n            source: [\n                \"science-refs\",\n                \"Jeff Nippard\",\n                \"TNF\",\n                \"Mike Israetel\"\n            ],\n            volume_profile: {}\n        }\n    };\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(program, {\n        status: 200\n    });\n}\nasync function POST(req) {\n    const body = await req.json();\n    const input = _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.OnboardingInput.parse(body.input);\n    const gpt = Boolean(body.useGPT);\n    const programId = body.programId ?? crypto.randomUUID();\n    let program;\n    if (gpt) {\n        program = await (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateProgramWithLLM)(input, {\n            programId,\n            citations: body.citations ?? []\n        });\n    } else {\n        const base = {\n            program_id: programId,\n            name: \"12-week Hypertrophy Program\",\n            paid: false,\n            weeks: (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateFullProgram)(input),\n            metadata: {\n                created_at: new Date().toISOString(),\n                source: [\n                    \"science-refs\",\n                    \"Jeff Nippard\",\n                    \"TNF\",\n                    \"Mike Israetel\"\n                ],\n                volume_profile: {}\n            }\n        };\n        program = base;\n    }\n    // Validate program against JSON schema before saving\n    const valid = validateProgram(program);\n    if (!valid) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid program payload\",\n            details: validateProgram.errors\n        }, {\n            status: 400\n        });\n    }\n    // Simple in-memory rate limit per IP per minute (best-effort; for production use Upstash Redis)\n    try {\n        const ip = req.headers.get(\"x-forwarded-for\") ?? \"unknown\";\n        const key = `gen:${ip}:${new Date().getUTCMinutes()}`;\n        RateLimitSchema.parse({\n            ip,\n            key\n        });\n        global.__GEN_RATE__ = global.__GEN_RATE__ ?? new Map();\n        const map = global.__GEN_RATE__;\n        const count = (map.get(key) ?? 0) + 1;\n        map.set(key, count);\n        if (count > 5) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Rate limit exceeded\"\n            }, {\n                status: 429\n            });\n        }\n    } catch  {}\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_4__.getServiceSupabaseClient)();\n    await supabase.from(\"programs\").upsert({\n        id: program.program_id,\n        user_id: body.userId ?? null,\n        name: program.name,\n        data: program,\n        paid: program.paid ?? false\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(program, {\n        status: 201\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLXByb2dyYW0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQzhEO0FBQ2hHO0FBQ2tDO0FBQ1M7QUFFekM7QUFFeEIsTUFBTVEsTUFBTSxJQUFJSiw0Q0FBR0EsQ0FBQztJQUFFSyxXQUFXO0lBQU1DLFFBQVE7QUFBTTtBQUNyRCxNQUFNQyxrQkFBa0JILElBQUlJLE9BQU8sQ0FBQ1AsdURBQWFBO0FBRWpELE1BQU1RLGtCQUFrQk4sdUNBQVEsQ0FBQztJQUMvQlEsSUFBSVIsdUNBQVEsR0FBR1UsR0FBRyxDQUFDO0lBQ25CQyxLQUFLWCx1Q0FBUSxHQUFHVSxHQUFHLENBQUM7QUFDdEI7QUFFTyxlQUFlRSxJQUFJQyxHQUFnQjtJQUN4QyxNQUFNQyxNQUFNLElBQUlDLElBQUlGLElBQUlDLEdBQUc7SUFDM0IsTUFBTUUsS0FBS0YsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUMsU0FBUztJQUN6QyxNQUFNQyxRQUFRekIsbUVBQWVBLENBQUMwQixLQUFLLENBQUM7UUFDbENDLGtCQUFrQjtRQUNsQkMsK0JBQStCO1FBQy9CQyxxQkFBcUI7WUFBQztTQUFNO1FBQzVCQyxVQUFVO1lBQUVDLE9BQU87WUFBS0MsT0FBTztZQUFLQyxVQUFVO1FBQUk7UUFDbERDLGlCQUFpQkM7UUFDakJDLG9CQUFvQjtJQUN0QjtJQUVBLE1BQU1DLFFBQVFwQywyRUFBbUJBLENBQUN3QjtJQUNsQyxNQUFNYSxVQUFtQjtRQUN2QkMsWUFBWWpCO1FBQ1prQixNQUFNO1FBQ05DLE1BQU07UUFDTko7UUFDQUssVUFBVTtZQUFFQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7WUFBSUMsUUFBUTtnQkFBQztnQkFBZ0I7Z0JBQWdCO2dCQUFPO2FBQWdCO1lBQUVDLGdCQUFnQixDQUFDO1FBQUU7SUFDekk7SUFFQSxPQUFPaEQscURBQVlBLENBQUNpRCxJQUFJLENBQUNWLFNBQVM7UUFBRVcsUUFBUTtJQUFJO0FBQ2xEO0FBRU8sZUFBZUMsS0FBSy9CLEdBQWdCO0lBQ3pDLE1BQU1nQyxPQUFPLE1BQU1oQyxJQUFJNkIsSUFBSTtJQUMzQixNQUFNdkIsUUFBUXpCLG1FQUFlQSxDQUFDMEIsS0FBSyxDQUFDeUIsS0FBSzFCLEtBQUs7SUFDOUMsTUFBTTJCLE1BQU1DLFFBQVFGLEtBQUtHLE1BQU07SUFDL0IsTUFBTUMsWUFBWUosS0FBS0ksU0FBUyxJQUFJQyxPQUFPQyxVQUFVO0lBQ3JELElBQUluQjtJQUNKLElBQUljLEtBQUs7UUFDUGQsVUFBVSxNQUFNcEMsOEVBQXNCQSxDQUFDdUIsT0FBTztZQUFFOEI7WUFBV0csV0FBV1AsS0FBS08sU0FBUyxJQUFJLEVBQUU7UUFBQztJQUM3RixPQUFPO1FBQ0wsTUFBTUMsT0FBZ0I7WUFDcEJwQixZQUFZZ0I7WUFDWmYsTUFBTTtZQUNOQyxNQUFNO1lBQ05KLE9BQU9wQywyRUFBbUJBLENBQUN3QjtZQUMzQmlCLFVBQVU7Z0JBQUVDLFlBQVksSUFBSUMsT0FBT0MsV0FBVztnQkFBSUMsUUFBUTtvQkFBQztvQkFBZ0I7b0JBQWdCO29CQUFPO2lCQUFnQjtnQkFBRUMsZ0JBQWdCLENBQUM7WUFBRTtRQUN6STtRQUNBVCxVQUFVcUI7SUFDWjtJQUNBLHFEQUFxRDtJQUNyRCxNQUFNQyxRQUFRbEQsZ0JBQWdCNEI7SUFDOUIsSUFBSSxDQUFDc0IsT0FBTztRQUNWLE9BQU83RCxxREFBWUEsQ0FBQ2lELElBQUksQ0FBQztZQUFFYSxPQUFPO1lBQTJCQyxTQUFTcEQsZ0JBQWdCcUQsTUFBTTtRQUFDLEdBQUc7WUFBRWQsUUFBUTtRQUFJO0lBQ2hIO0lBRUEsZ0dBQWdHO0lBQ2hHLElBQUk7UUFDRixNQUFNbkMsS0FBS0ssSUFBSTZDLE9BQU8sQ0FBQ3hDLEdBQUcsQ0FBQyxzQkFBc0I7UUFDakQsTUFBTVAsTUFBTSxDQUFDLElBQUksRUFBRUgsR0FBRyxDQUFDLEVBQUUsSUFBSThCLE9BQU9xQixhQUFhLEdBQUcsQ0FBQztRQUNyRHJELGdCQUFnQmMsS0FBSyxDQUFDO1lBQUVaO1lBQUlHO1FBQUk7UUFDOUJpRCxPQUFlQyxZQUFZLEdBQUcsT0FBZ0JBLFlBQVksSUFBSSxJQUFJQztRQUNwRSxNQUFNQyxNQUEyQixPQUFnQkYsWUFBWTtRQUM3RCxNQUFNRyxRQUFRLENBQUNELElBQUk3QyxHQUFHLENBQUNQLFFBQVEsS0FBSztRQUNwQ29ELElBQUlFLEdBQUcsQ0FBQ3RELEtBQUtxRDtRQUNiLElBQUlBLFFBQVEsR0FBRztZQUNiLE9BQU92RSxxREFBWUEsQ0FBQ2lELElBQUksQ0FBQztnQkFBRWEsT0FBTztZQUFzQixHQUFHO2dCQUFFWixRQUFRO1lBQUk7UUFDM0U7SUFDRixFQUFFLE9BQU0sQ0FBQztJQUNULE1BQU11QixXQUFXbkUsOEVBQXdCQTtJQUN6QyxNQUFNbUUsU0FBU0MsSUFBSSxDQUFDLFlBQVlDLE1BQU0sQ0FBQztRQUFFcEQsSUFBSWdCLFFBQVFDLFVBQVU7UUFBRW9DLFNBQVN4QixLQUFLeUIsTUFBTSxJQUFJO1FBQU1wQyxNQUFNRixRQUFRRSxJQUFJO1FBQUVxQyxNQUFNdkM7UUFBU0csTUFBTUgsUUFBUUcsSUFBSSxJQUFJO0lBQU07SUFDOUosT0FBTzFDLHFEQUFZQSxDQUFDaUQsSUFBSSxDQUFDVixTQUFTO1FBQUVXLFFBQVE7SUFBSTtBQUNsRCIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJhbGlmdC8uL2FwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZS50cz9hNDk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBPbmJvYXJkaW5nSW5wdXQsIGdlbmVyYXRlRnVsbFByb2dyYW0sIHJlZmluZVdpdGhHUFQsIGdlbmVyYXRlUHJvZ3JhbVdpdGhMTE0gfSBmcm9tICdAL2xpYi9wcm9ncmFtLWdlbmVyYXRvcic7XG5pbXBvcnQgQWp2IGZyb20gJ2Fqdic7XG5pbXBvcnQgcHJvZ3JhbVNjaGVtYSBmcm9tICdAL3R5cGVzL3Byb2dyYW0uc2NoZW1hLmpzb24nO1xuaW1wb3J0IHsgZ2V0U2VydmljZVN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2Utc2VydmVyJztcbmltcG9ydCB0eXBlIHsgUHJvZ3JhbSB9IGZyb20gJ0AvdHlwZXMvcHJvZ3JhbSc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuY29uc3QgYWp2ID0gbmV3IEFqdih7IGFsbEVycm9yczogdHJ1ZSwgc3RyaWN0OiBmYWxzZSB9KTtcbmNvbnN0IHZhbGlkYXRlUHJvZ3JhbSA9IGFqdi5jb21waWxlKHByb2dyYW1TY2hlbWEgYXMgYW55KTtcblxuY29uc3QgUmF0ZUxpbWl0U2NoZW1hID0gei5vYmplY3Qoe1xuICBpcDogei5zdHJpbmcoKS5taW4oMSksXG4gIGtleTogei5zdHJpbmcoKS5taW4oMSlcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgY29uc3QgaWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnaWQnKSA/PyAnZGVtbyc7XG4gIGNvbnN0IGlucHV0ID0gT25ib2FyZGluZ0lucHV0LnBhcnNlKHtcbiAgICBleHBlcmllbmNlX2xldmVsOiAnSW50ZXJtZWRpYXRlJyxcbiAgICB0cmFpbmluZ19mcmVxdWVuY3lfcHJlZmVyZW5jZTogNSxcbiAgICBlcXVpcG1lbnRfYXZhaWxhYmxlOiBbJ0d5bSddLFxuICAgIGJpZzNfUFJzOiB7IGJlbmNoOiAxODUsIHNxdWF0OiAxODUsIGRlYWRsaWZ0OiAyMjUgfSxcbiAgICBwcmVmZXJyZWRfc3BsaXQ6IHVuZGVmaW5lZCxcbiAgICBzZXNzaW9uX2xlbmd0aF9taW46IDYwXG4gIH0pO1xuXG4gIGNvbnN0IHdlZWtzID0gZ2VuZXJhdGVGdWxsUHJvZ3JhbShpbnB1dCk7XG4gIGNvbnN0IHByb2dyYW06IFByb2dyYW0gPSB7XG4gICAgcHJvZ3JhbV9pZDogaWQsXG4gICAgbmFtZTogJzEyLXdlZWsgSHlwZXJ0cm9waHkgUHJvZ3JhbScsXG4gICAgcGFpZDogZmFsc2UsXG4gICAgd2Vla3MsXG4gICAgbWV0YWRhdGE6IHsgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBzb3VyY2U6IFsnc2NpZW5jZS1yZWZzJywgJ0plZmYgTmlwcGFyZCcsICdUTkYnLCAnTWlrZSBJc3JhZXRlbCddLCB2b2x1bWVfcHJvZmlsZToge30gfVxuICB9O1xuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihwcm9ncmFtLCB7IHN0YXR1czogMjAwIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICBjb25zdCBpbnB1dCA9IE9uYm9hcmRpbmdJbnB1dC5wYXJzZShib2R5LmlucHV0KTtcbiAgY29uc3QgZ3B0ID0gQm9vbGVhbihib2R5LnVzZUdQVCk7XG4gIGNvbnN0IHByb2dyYW1JZCA9IGJvZHkucHJvZ3JhbUlkID8/IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gIGxldCBwcm9ncmFtOiBQcm9ncmFtO1xuICBpZiAoZ3B0KSB7XG4gICAgcHJvZ3JhbSA9IGF3YWl0IGdlbmVyYXRlUHJvZ3JhbVdpdGhMTE0oaW5wdXQsIHsgcHJvZ3JhbUlkLCBjaXRhdGlvbnM6IGJvZHkuY2l0YXRpb25zID8/IFtdIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGJhc2U6IFByb2dyYW0gPSB7XG4gICAgICBwcm9ncmFtX2lkOiBwcm9ncmFtSWQsXG4gICAgICBuYW1lOiAnMTItd2VlayBIeXBlcnRyb3BoeSBQcm9ncmFtJyxcbiAgICAgIHBhaWQ6IGZhbHNlLFxuICAgICAgd2Vla3M6IGdlbmVyYXRlRnVsbFByb2dyYW0oaW5wdXQpLFxuICAgICAgbWV0YWRhdGE6IHsgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBzb3VyY2U6IFsnc2NpZW5jZS1yZWZzJywgJ0plZmYgTmlwcGFyZCcsICdUTkYnLCAnTWlrZSBJc3JhZXRlbCddLCB2b2x1bWVfcHJvZmlsZToge30gfVxuICAgIH07XG4gICAgcHJvZ3JhbSA9IGJhc2U7XG4gIH1cbiAgLy8gVmFsaWRhdGUgcHJvZ3JhbSBhZ2FpbnN0IEpTT04gc2NoZW1hIGJlZm9yZSBzYXZpbmdcbiAgY29uc3QgdmFsaWQgPSB2YWxpZGF0ZVByb2dyYW0ocHJvZ3JhbSk7XG4gIGlmICghdmFsaWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgcHJvZ3JhbSBwYXlsb2FkJywgZGV0YWlsczogdmFsaWRhdGVQcm9ncmFtLmVycm9ycyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICB9XG5cbiAgLy8gU2ltcGxlIGluLW1lbW9yeSByYXRlIGxpbWl0IHBlciBJUCBwZXIgbWludXRlIChiZXN0LWVmZm9ydDsgZm9yIHByb2R1Y3Rpb24gdXNlIFVwc3Rhc2ggUmVkaXMpXG4gIHRyeSB7XG4gICAgY29uc3QgaXAgPSByZXEuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpID8/ICd1bmtub3duJztcbiAgICBjb25zdCBrZXkgPSBgZ2VuOiR7aXB9OiR7bmV3IERhdGUoKS5nZXRVVENNaW51dGVzKCl9YDtcbiAgICBSYXRlTGltaXRTY2hlbWEucGFyc2UoeyBpcCwga2V5IH0pO1xuICAgIDsoZ2xvYmFsIGFzIGFueSkuX19HRU5fUkFURV9fID0gKGdsb2JhbCBhcyBhbnkpLl9fR0VOX1JBVEVfXyA/PyBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgIGNvbnN0IG1hcDogTWFwPHN0cmluZywgbnVtYmVyPiA9IChnbG9iYWwgYXMgYW55KS5fX0dFTl9SQVRFX187XG4gICAgY29uc3QgY291bnQgPSAobWFwLmdldChrZXkpID8/IDApICsgMTtcbiAgICBtYXAuc2V0KGtleSwgY291bnQpO1xuICAgIGlmIChjb3VudCA+IDUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnUmF0ZSBsaW1pdCBleGNlZWRlZCcgfSwgeyBzdGF0dXM6IDQyOSB9KTtcbiAgICB9XG4gIH0gY2F0Y2gge31cbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTZXJ2aWNlU3VwYWJhc2VDbGllbnQoKTtcbiAgYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZ3JhbXMnKS51cHNlcnQoeyBpZDogcHJvZ3JhbS5wcm9ncmFtX2lkLCB1c2VyX2lkOiBib2R5LnVzZXJJZCA/PyBudWxsLCBuYW1lOiBwcm9ncmFtLm5hbWUsIGRhdGE6IHByb2dyYW0sIHBhaWQ6IHByb2dyYW0ucGFpZCA/PyBmYWxzZSB9KTtcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHByb2dyYW0sIHsgc3RhdHVzOiAyMDEgfSk7XG59XG5cblxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk9uYm9hcmRpbmdJbnB1dCIsImdlbmVyYXRlRnVsbFByb2dyYW0iLCJnZW5lcmF0ZVByb2dyYW1XaXRoTExNIiwiQWp2IiwicHJvZ3JhbVNjaGVtYSIsImdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCIsInoiLCJhanYiLCJhbGxFcnJvcnMiLCJzdHJpY3QiLCJ2YWxpZGF0ZVByb2dyYW0iLCJjb21waWxlIiwiUmF0ZUxpbWl0U2NoZW1hIiwib2JqZWN0IiwiaXAiLCJzdHJpbmciLCJtaW4iLCJrZXkiLCJHRVQiLCJyZXEiLCJ1cmwiLCJVUkwiLCJpZCIsInNlYXJjaFBhcmFtcyIsImdldCIsImlucHV0IiwicGFyc2UiLCJleHBlcmllbmNlX2xldmVsIiwidHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2UiLCJlcXVpcG1lbnRfYXZhaWxhYmxlIiwiYmlnM19QUnMiLCJiZW5jaCIsInNxdWF0IiwiZGVhZGxpZnQiLCJwcmVmZXJyZWRfc3BsaXQiLCJ1bmRlZmluZWQiLCJzZXNzaW9uX2xlbmd0aF9taW4iLCJ3ZWVrcyIsInByb2dyYW0iLCJwcm9ncmFtX2lkIiwibmFtZSIsInBhaWQiLCJtZXRhZGF0YSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzb3VyY2UiLCJ2b2x1bWVfcHJvZmlsZSIsImpzb24iLCJzdGF0dXMiLCJQT1NUIiwiYm9keSIsImdwdCIsIkJvb2xlYW4iLCJ1c2VHUFQiLCJwcm9ncmFtSWQiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiY2l0YXRpb25zIiwiYmFzZSIsInZhbGlkIiwiZXJyb3IiLCJkZXRhaWxzIiwiZXJyb3JzIiwiaGVhZGVycyIsImdldFVUQ01pbnV0ZXMiLCJnbG9iYWwiLCJfX0dFTl9SQVRFX18iLCJNYXAiLCJtYXAiLCJjb3VudCIsInNldCIsInN1cGFiYXNlIiwiZnJvbSIsInVwc2VydCIsInVzZXJfaWQiLCJ1c2VySWQiLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-program/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/program-generator.ts":
/*!**********************************!*\
  !*** ./lib/program-generator.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OnboardingInput: () => (/* binding */ OnboardingInput),\n/* harmony export */   canViewWeek: () => (/* binding */ canViewWeek),\n/* harmony export */   generateDeterministicWeek: () => (/* binding */ generateDeterministicWeek),\n/* harmony export */   generateFullProgram: () => (/* binding */ generateFullProgram),\n/* harmony export */   generateProgramWithLLM: () => (/* binding */ generateProgramWithLLM),\n/* harmony export */   refineWithGPT: () => (/* binding */ refineWithGPT),\n/* harmony export */   saveProgramToSupabase: () => (/* binding */ saveProgramToSupabase)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ajv */ \"(rsc)/./node_modules/ajv/dist/ajv.js\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _types_program_schema_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/types/program.schema.json */ \"(rsc)/./types/program.schema.json\");\n\n\n\nconst OnboardingInput = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    age: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional(),\n    sex: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"male\",\n        \"female\"\n    ]).optional(),\n    BW: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional(),\n    experience_level: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"Beginner\",\n        \"Intermediate\",\n        \"Advanced\"\n    ]),\n    training_frequency_preference: zod__WEBPACK_IMPORTED_MODULE_2__.number().int().min(2).max(6),\n    equipment_available: zod__WEBPACK_IMPORTED_MODULE_2__.array(zod__WEBPACK_IMPORTED_MODULE_2__.string()).default([]),\n    goals: zod__WEBPACK_IMPORTED_MODULE_2__.array(zod__WEBPACK_IMPORTED_MODULE_2__.string()).default([\n        \"hypertrophy\"\n    ]),\n    big3_PRs: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        bench: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional(),\n        squat: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional(),\n        deadlift: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional()\n    }),\n    injuries: zod__WEBPACK_IMPORTED_MODULE_2__.array(zod__WEBPACK_IMPORTED_MODULE_2__.string()).default([]),\n    movement_preferences: zod__WEBPACK_IMPORTED_MODULE_2__.array(zod__WEBPACK_IMPORTED_MODULE_2__.string()).default([]),\n    preferred_split: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"Push/Pull/Legs\",\n        \"Upper/Lower\",\n        \"Full body\",\n        \"Custom\"\n    ]).optional(),\n    focus_point: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"Arms\",\n        \"Chest\",\n        \"Back\",\n        \"Quads\",\n        \"Glutes\",\n        \"Delts\"\n    ]).optional(),\n    session_length_min: zod__WEBPACK_IMPORTED_MODULE_2__.number().int().min(30).max(120).default(60),\n    rest_pref: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"auto\",\n        \"custom\"\n    ]).default(\"auto\"),\n    nutrition: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"deficit\",\n        \"surplus\",\n        \"maintenance\"\n    ]).default(\"maintenance\")\n});\nconst ajv = new (ajv__WEBPACK_IMPORTED_MODULE_0___default())({\n    allErrors: true,\n    strict: false\n});\nconst validateProgram = ajv.compile(_types_program_schema_json__WEBPACK_IMPORTED_MODULE_1__);\nfunction coerceProgramId(p, programId) {\n    if (!p || typeof p !== \"object\") return p;\n    p.program_id = programId;\n    return p;\n}\nfunction ensureMetadata(p) {\n    const created = new Date().toISOString();\n    const defaults = {\n        created_at: created,\n        source: [\n            \"Schoenfeld et al.\",\n            \"Nuckols\",\n            \"Jeff Nippard\",\n            \"Mike Israetel\"\n        ],\n        volume_profile: {}\n    };\n    p.metadata = {\n        ...defaults,\n        ...p.metadata ?? {}\n    };\n    p.paid = Boolean(p.paid ?? false);\n    return p;\n}\nfunction toProgramOrThrow(p) {\n    const ok = validateProgram(p);\n    if (!ok) {\n        const errs = JSON.stringify(validateProgram.errors ?? []);\n        throw new Error(`Program failed schema validation: ${errs}`);\n    }\n    return p;\n}\nasync function repairWithModel(raw, errors) {\n    if (!process.env.OPENAI_API_KEY) return null;\n    try {\n        const { OpenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node\"), __webpack_require__.e(\"vendor-chunks/openai\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/humanize-ms\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const client = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n        const response = await client.chat.completions.create({\n            model: \"gpt-4o\",\n            temperature: 0.1,\n            response_format: {\n                type: \"json_object\"\n            },\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You return strictly valid JSON matching the provided schema. No prose.\"\n                },\n                {\n                    role: \"user\",\n                    content: `Fix this program JSON to pass the schema. Only return corrected JSON.\\nErrors:\\n${JSON.stringify(errors)}\\nJSON:\\n${raw}`\n                }\n            ]\n        });\n        const text = response.choices?.[0]?.message?.content;\n        return text ?? null;\n    } catch  {\n        return null;\n    }\n}\nfunction buildUserProfile(input) {\n    const goals = (input.goals ?? []).join(\", \");\n    const eq = (input.equipment_available ?? []).join(\", \");\n    const prefs = (input.movement_preferences ?? []).join(\", \");\n    const inj = (input.injuries ?? []).join(\", \");\n    const pr = input.big3_PRs ?? {};\n    const focus = input.focus_point ? `Focus: ${input.focus_point}.` : \"\";\n    return [\n        `Experience: ${input.experience_level}.`,\n        `Training days/week: ${input.training_frequency_preference}.`,\n        `Session length: ${input.session_length_min} min.`,\n        `Goals: ${goals || \"hypertrophy\"}.`,\n        `Equipment: ${eq || \"Gym\"}.`,\n        `Preferred split: ${input.preferred_split ?? \"auto\"}.`,\n        `Rest preference: ${input.rest_pref}.`,\n        `Nutrition: ${input.nutrition}.`,\n        `PRs (lbs): bench=${pr.bench ?? \"n/a\"}, squat=${pr.squat ?? \"n/a\"}, deadlift=${pr.deadlift ?? \"n/a\"}.`,\n        `Injuries: ${inj || \"none\"}.`,\n        `Movement prefs: ${prefs || \"none\"}.`,\n        focus\n    ].join(\" \");\n}\nconst systemPrompt = `\nYou are an evidence-based strength coach. Generate a 12-week program as strict JSON conforming to the given schema fields and constraints below. Return JSON only.\n\nConstraints (must follow):\n- 12 weeks total; each week has 2–6 days based on user.training_frequency_preference.\n- Exercise ordering: compounds first, then compound variations, then accessories.\n- Weekly effective sets per muscle by experience:\n  Beginner: 10–14; Intermediate: 14–18; Advanced: 18–26. Stay within ranges.\n- Rep ranges: main lifts 6–12 (emphasis 8–12); accessories 8–20.\n- Deload: 3:1 accumulation-to-deload cycle. Deload week reduces sets (~40%) and intensity.\n- RPE range 5–10. Rest_seconds 30–300. Sets 1–8. Intensity_pct 0.4–0.9 when applicable.\n- Tailor exercise selection to equipment, injuries, and movement prefs. Prefer barbell/dumbbell/cable basics; avoid risky variants where injuries conflict.\n- Personalize split based on days/week: 2=Full Body; 3=Upper/Lower/Full; 4=Upper/Lower/Upper/Lower; 5=Push/Pull/Legs/Upper/Lower; 6=Push/Pull/Legs/Upper/Lower/Focus.\n- Provide notes sparingly for technique/progression. Use consistent tempo strings and RPE guidance.\n- Populate metadata.created_at, metadata.source (strings, e.g., research/authors), metadata.volume_profile (per muscle weekly set counts as integers).\n\nMethodology:\n- Ground decisions in modern hypertrophy literature (e.g., Schoenfeld volume recommendations, progressive overload, MRV, MEV) and popular science-based creators (Jeff Nippard style periodization, autoregulated RPE).\n- Ensure progressive overload across accumulation weeks; then deload. Keep intensity and volume realistic for user's experience.\n\nOutput must exactly match keys and types in the program schema:\n- program_id (string), name (string), paid (boolean), weeks [{week_number, days: [{day_number, focus, exercises: [{id, name, sets, reps, rpe, tempo, rest_seconds, intensity_pct?}], notes?}]}], metadata { created_at, source[], volume_profile{} }.\n`;\nfunction generateDeterministicWeek(input) {\n    const exp = input.experience_level;\n    const basePct = exp === \"Beginner\" ? 0.65 : exp === \"Intermediate\" ? 0.72 : 0.75;\n    const restCompound = 120;\n    const restAccessory = input.rest_pref === \"custom\" ? 75 : 90;\n    const bpPct = Math.min(0.8, basePct);\n    const sqPct = Math.min(0.78, basePct);\n    const dlPct = Math.min(0.8, basePct);\n    const twoDay = [\n        {\n            focus: \"Full Body A\",\n            exercises: [\n                {\n                    id: \"sq-01\",\n                    name: \"Barbell Back Squat\",\n                    sets: 4,\n                    reps: \"5-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: sqPct\n                },\n                {\n                    id: \"bp-01\",\n                    name: \"Barbell Bench Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: bpPct\n                },\n                {\n                    id: \"row-01\",\n                    name: \"Barbell Row\",\n                    sets: 3,\n                    reps: \"6-10\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"curl-01\",\n                    name: \"EZ Bar Curl\",\n                    sets: 2,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-01\",\n                    name: \"Overhead Triceps Extension\",\n                    sets: 2,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Full Body B\",\n            exercises: [\n                {\n                    id: \"dl-01\",\n                    name: \"Conventional Deadlift\",\n                    sets: 3,\n                    reps: \"4-6\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 180,\n                    intensity_pct: dlPct\n                },\n                {\n                    id: \"ohp-01\",\n                    name: \"Seated Dumbbell Shoulder Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"legp-01\",\n                    name: \"Leg Press\",\n                    sets: 2,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"calf-01\",\n                    name: \"Seated Calf Raise\",\n                    sets: 2,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const threeDay = [\n        {\n            focus: \"Upper\",\n            exercises: [\n                {\n                    id: \"bp-01\",\n                    name: \"Barbell Bench Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: bpPct\n                },\n                {\n                    id: \"row-01\",\n                    name: \"Barbell Row\",\n                    sets: 4,\n                    reps: \"6-10\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"ohp-01\",\n                    name: \"Seated Dumbbell Shoulder Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"lat-01\",\n                    name: \"Lateral Raise\",\n                    sets: 2,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-01\",\n                    name: \"Overhead Triceps Extension\",\n                    sets: 2,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Lower\",\n            exercises: [\n                {\n                    id: \"sq-01\",\n                    name: \"Barbell Back Squat\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: sqPct\n                },\n                {\n                    id: \"rdl-01\",\n                    name: \"Romanian Deadlift\",\n                    sets: 3,\n                    reps: \"8-10\",\n                    rpe: 8,\n                    tempo: \"3-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"legp-01\",\n                    name: \"Leg Press\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"curl-02\",\n                    name: \"Lying Leg Curl\",\n                    sets: 2,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 90\n                },\n                {\n                    id: \"calf-01\",\n                    name: \"Seated Calf Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Full body\",\n            exercises: [\n                {\n                    id: \"dl-01\",\n                    name: \"Conventional Deadlift\",\n                    sets: 3,\n                    reps: \"4-6\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 180,\n                    intensity_pct: dlPct\n                },\n                {\n                    id: \"incl-01\",\n                    name: \"Incline Dumbbell Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"fsq-01\",\n                    name: \"Front Squat\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"face-01\",\n                    name: \"Face Pull\",\n                    sets: 2,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"abs-01\",\n                    name: \"Cable Crunch\",\n                    sets: 2,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const fourDay = [\n        {\n            focus: \"Upper 1\",\n            exercises: [\n                {\n                    id: \"bp-01\",\n                    name: \"Barbell Bench Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: bpPct\n                },\n                {\n                    id: \"row-01\",\n                    name: \"Barbell Row\",\n                    sets: 4,\n                    reps: \"6-10\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"lat-01\",\n                    name: \"Lateral Raise\",\n                    sets: 2,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-01\",\n                    name: \"Overhead Triceps Extension\",\n                    sets: 2,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Lower 1\",\n            exercises: [\n                {\n                    id: \"sq-01\",\n                    name: \"Barbell Back Squat\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: sqPct\n                },\n                {\n                    id: \"rdl-01\",\n                    name: \"Romanian Deadlift\",\n                    sets: 3,\n                    reps: \"8-10\",\n                    rpe: 8,\n                    tempo: \"3-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"legp-01\",\n                    name: \"Leg Press\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"calf-01\",\n                    name: \"Seated Calf Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Upper 2\",\n            exercises: [\n                {\n                    id: \"ohp-02\",\n                    name: \"Standing Overhead Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"incl-01\",\n                    name: \"Incline Dumbbell Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"curl-01\",\n                    name: \"EZ Bar Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Lower 2\",\n            exercises: [\n                {\n                    id: \"dl-01\",\n                    name: \"Conventional Deadlift\",\n                    sets: 3,\n                    reps: \"4-6\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 180,\n                    intensity_pct: dlPct\n                },\n                {\n                    id: \"fsq-01\",\n                    name: \"Front Squat\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"curl-02\",\n                    name: \"Lying Leg Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 90\n                },\n                {\n                    id: \"abs-01\",\n                    name: \"Cable Crunch\",\n                    sets: 3,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const fiveDay = [\n        {\n            focus: \"Push\",\n            exercises: [\n                {\n                    id: \"bp-01\",\n                    name: \"Barbell Bench Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: bpPct\n                },\n                {\n                    id: \"ohp-01\",\n                    name: \"Seated Dumbbell Shoulder Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"incl-01\",\n                    name: \"Incline Dumbbell Press\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"lat-01\",\n                    name: \"Lateral Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-01\",\n                    name: \"Overhead Triceps Extension\",\n                    sets: 3,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Pull\",\n            exercises: [\n                {\n                    id: \"row-01\",\n                    name: \"Barbell Row\",\n                    sets: 4,\n                    reps: \"6-10\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"face-01\",\n                    name: \"Face Pull\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"curl-01\",\n                    name: \"EZ Bar Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Legs\",\n            exercises: [\n                {\n                    id: \"sq-01\",\n                    name: \"Barbell Back Squat\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: sqPct\n                },\n                {\n                    id: \"rdl-01\",\n                    name: \"Romanian Deadlift\",\n                    sets: 3,\n                    reps: \"8-10\",\n                    rpe: 8,\n                    tempo: \"3-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"legp-01\",\n                    name: \"Leg Press\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"calf-01\",\n                    name: \"Seated Calf Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Upper\",\n            exercises: [\n                {\n                    id: \"bp-02\",\n                    name: \"Close-Grip Bench Press\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: Math.max(0.68, bpPct - 0.03)\n                },\n                {\n                    id: \"ohp-02\",\n                    name: \"Standing Overhead Press\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"curl-01\",\n                    name: \"EZ Bar Curl\",\n                    sets: 2,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Lower\",\n            exercises: [\n                {\n                    id: \"dl-01\",\n                    name: \"Conventional Deadlift\",\n                    sets: 3,\n                    reps: \"4-6\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 180,\n                    intensity_pct: dlPct\n                },\n                {\n                    id: \"fsq-01\",\n                    name: \"Front Squat\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"curl-02\",\n                    name: \"Lying Leg Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 90\n                },\n                {\n                    id: \"abs-01\",\n                    name: \"Cable Crunch\",\n                    sets: 3,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const sixDayFocus = input.focus_point ?? \"Arms\";\n    const sixDay = [\n        fiveDay[0],\n        fiveDay[1],\n        fiveDay[2],\n        fourDay[0],\n        fourDay[1],\n        {\n            focus: `Focus — ${sixDayFocus}`,\n            exercises: [\n                {\n                    id: \"row-02\",\n                    name: \"Chest-Supported Row\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"curl-02\",\n                    name: \"Incline Dumbbell Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-02\",\n                    name: \"Cable Triceps Pushdown\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"lat-02\",\n                    name: \"Cable Lateral Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const daysPerWeek = input.training_frequency_preference;\n    let selected;\n    if (daysPerWeek === 2) selected = twoDay;\n    else if (daysPerWeek === 3) selected = threeDay;\n    else if (daysPerWeek === 4) selected = fourDay;\n    else if (daysPerWeek === 5) selected = fiveDay;\n    else if (daysPerWeek === 6) selected = sixDay;\n    else selected = threeDay;\n    return {\n        week_number: 1,\n        days: selected.map((d, i)=>({\n                day_number: i + 1,\n                focus: d.focus,\n                exercises: d.exercises,\n                notes: d.notes\n            }))\n    };\n}\nfunction generateFullProgram(input) {\n    const weeks = [];\n    const daysPerWeek = input.training_frequency_preference;\n    for(let w = 1; w <= 12; w++){\n        const baseWeek = generateDeterministicWeek(input);\n        // Progression: 3-week accumulation, 1-week deload cycle\n        const cyclePos = (w - 1) % 4 + 1; // 1..4\n        const volumeMultiplier = cyclePos === 4 ? 0.6 : 1 + 0.05 * (cyclePos - 1); // 1.0, 1.05, 1.10, 0.6\n        const intensityBump = cyclePos === 4 ? -0.05 : 0.01 * (w - 1); // slight upward trend, deload down\n        const adjustedDays = baseWeek.days.map((day)=>({\n                ...day,\n                exercises: day.exercises.map((ex)=>{\n                    const sets = Math.max(1, Math.round(ex.sets * volumeMultiplier));\n                    const intensity_pct = ex.intensity_pct != null ? Math.max(0.5, Math.min(0.9, ex.intensity_pct + intensityBump)) : undefined;\n                    return {\n                        ...ex,\n                        sets,\n                        intensity_pct\n                    };\n                })\n            }));\n        weeks.push({\n            week_number: w,\n            days: adjustedDays\n        });\n    }\n    return weeks;\n}\nasync function refineWithGPT(baseProgram, citations) {\n    if (!process.env.OPENAI_API_KEY) return baseProgram;\n    try {\n        const { OpenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node\"), __webpack_require__.e(\"vendor-chunks/openai\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/humanize-ms\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const client = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n        const prompt = `You are a strength coach. Refine the provided 12-week hypertrophy program JSON by adding microprogression notes, deload adjustments (3:1), and safe swaps respecting injuries/equipment. Return valid JSON only. Citations: ${citations.join(\", \")}`;\n        const response = await client.chat.completions.create({\n            model: \"gpt-4o\",\n            temperature: 0.2,\n            response_format: {\n                type: \"json_object\"\n            },\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"Return JSON only.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                },\n                {\n                    role: \"user\",\n                    content: JSON.stringify(baseProgram)\n                }\n            ]\n        });\n        const text = response.choices?.[0]?.message?.content;\n        if (!text) return baseProgram;\n        const jsonStart = text.indexOf(\"{\");\n        const jsonEnd = text.lastIndexOf(\"}\");\n        if (jsonStart >= 0 && jsonEnd > jsonStart) {\n            const refined = JSON.parse(text.slice(jsonStart, jsonEnd + 1));\n            return refined;\n        }\n    } catch  {\n        return baseProgram;\n    }\n    return baseProgram;\n}\nasync function generateProgramWithLLM(input, opts) {\n    const programId = opts?.programId ?? crypto.randomUUID();\n    if (!process.env.OPENAI_API_KEY) {\n        const weeks = generateFullProgram(input);\n        const fallback = {\n            program_id: programId,\n            name: \"12-week Hypertrophy Program\",\n            paid: false,\n            weeks,\n            metadata: {\n                created_at: new Date().toISOString(),\n                source: [\n                    \"science-refs\",\n                    \"Jeff Nippard\",\n                    \"TNF\",\n                    \"Mike Israetel\"\n                ],\n                volume_profile: {}\n            }\n        };\n        return fallback;\n    }\n    try {\n        const { OpenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node\"), __webpack_require__.e(\"vendor-chunks/openai\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/humanize-ms\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const client = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n        const userProfile = buildUserProfile(input);\n        const citations = opts?.citations ?? [\n            \"Schoenfeld\",\n            \"Nuckols\",\n            \"Jeff Nippard\",\n            \"Mike Israetel\",\n            \"Helms\"\n        ];\n        const response = await client.chat.completions.create({\n            model: \"gpt-4o\",\n            temperature: 0.2,\n            response_format: {\n                type: \"json_object\"\n            },\n            messages: [\n                {\n                    role: \"system\",\n                    content: systemPrompt\n                },\n                {\n                    role: \"user\",\n                    content: `User profile:\\n${userProfile}\\nProgram id: ${programId}\\nCitations to include in metadata.source: ${citations.join(\", \")}`\n                }\n            ]\n        });\n        const text = response.choices?.[0]?.message?.content ?? \"\";\n        const jsonStart = text.indexOf(\"{\");\n        const jsonEnd = text.lastIndexOf(\"}\");\n        if (jsonStart < 0 || jsonEnd <= jsonStart) throw new Error(\"No JSON in response\");\n        const parsed = JSON.parse(text.slice(jsonStart, jsonEnd + 1));\n        const prepared = ensureMetadata(coerceProgramId(parsed, programId));\n        try {\n            return toProgramOrThrow(prepared);\n        } catch  {\n            const repaired = await repairWithModel(JSON.stringify(prepared), validateProgram.errors ?? []);\n            if (repaired) {\n                const reparsed = JSON.parse(repaired);\n                const final = ensureMetadata(coerceProgramId(reparsed, programId));\n                return toProgramOrThrow(final);\n            }\n            throw new Error(\"Repair failed\");\n        }\n    } catch  {\n        const weeks = generateFullProgram(input);\n        const fallback = {\n            program_id: programId,\n            name: \"12-week Hypertrophy Program\",\n            paid: false,\n            weeks,\n            metadata: {\n                created_at: new Date().toISOString(),\n                source: [\n                    \"science-refs\",\n                    \"Jeff Nippard\",\n                    \"TNF\",\n                    \"Mike Israetel\"\n                ],\n                volume_profile: {}\n            }\n        };\n        return fallback;\n    }\n}\nasync function saveProgramToSupabase(program) {\n    // Deprecated: prefer calling code to perform writes using a service client and handle errors\n    throw new Error(\"saveProgramToSupabase is deprecated. Use server route with service client to persist.\");\n}\nfunction canViewWeek(week, paid) {\n    return week <= 1 || paid;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBT3NHO0lBQ1Q7QUFDRjtBQUVPLGVBQWVPLHNCQUFzQkMsT0FBWTtJQUN0RCw2RkFBNkY7SUFDN0YsTUFBTSxJQUFJcEcsTUFBTTtBQUNsQjtBQUVPLFNBQVNxRyxZQUFZQyxJQUFZLEVBQUU5RyxJQUFhO0lBQ3JELE9BQU84RyxRQUFRLEtBQUs5RztBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJhbGlmdC8uL2xpYi9wcm9ncmFtLWdlbmVyYXRvci50cz8wYmZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IEFqdiBmcm9tICdhanYnO1xuaW1wb3J0IHByb2dyYW1TY2hlbWEgZnJvbSAnQC90eXBlcy9wcm9ncmFtLnNjaGVtYS5qc29uJztcbmltcG9ydCB0eXBlIHsgUHJvZ3JhbSB9IGZyb20gJ0AvdHlwZXMvcHJvZ3JhbSc7XG5cbmV4cG9ydCBjb25zdCBPbmJvYXJkaW5nSW5wdXQgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGFnZTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBzZXg6IHouZW51bShbJ21hbGUnLCAnZmVtYWxlJ10pLm9wdGlvbmFsKCksXG4gIEJXOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIGV4cGVyaWVuY2VfbGV2ZWw6IHouZW51bShbJ0JlZ2lubmVyJywgJ0ludGVybWVkaWF0ZScsICdBZHZhbmNlZCddKSxcbiAgdHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2U6IHoubnVtYmVyKCkuaW50KCkubWluKDIpLm1heCg2KSxcbiAgZXF1aXBtZW50X2F2YWlsYWJsZTogei5hcnJheSh6LnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgZ29hbHM6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbJ2h5cGVydHJvcGh5J10pLFxuICBiaWczX1BSczogei5vYmplY3QoeyBiZW5jaDogei5udW1iZXIoKS5vcHRpb25hbCgpLCBzcXVhdDogei5udW1iZXIoKS5vcHRpb25hbCgpLCBkZWFkbGlmdDogei5udW1iZXIoKS5vcHRpb25hbCgpIH0pLFxuICBpbmp1cmllczogei5hcnJheSh6LnN0cmluZygpKS5kZWZhdWx0KFtdKSxcbiAgbW92ZW1lbnRfcHJlZmVyZW5jZXM6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG4gIHByZWZlcnJlZF9zcGxpdDogei5lbnVtKFsnUHVzaC9QdWxsL0xlZ3MnLCAnVXBwZXIvTG93ZXInLCAnRnVsbCBib2R5JywgJ0N1c3RvbSddKS5vcHRpb25hbCgpLFxuICBmb2N1c19wb2ludDogei5lbnVtKFsnQXJtcycsICdDaGVzdCcsICdCYWNrJywgJ1F1YWRzJywgJ0dsdXRlcycsICdEZWx0cyddKS5vcHRpb25hbCgpLFxuICBzZXNzaW9uX2xlbmd0aF9taW46IHoubnVtYmVyKCkuaW50KCkubWluKDMwKS5tYXgoMTIwKS5kZWZhdWx0KDYwKSxcbiAgcmVzdF9wcmVmOiB6LmVudW0oWydhdXRvJywgJ2N1c3RvbSddKS5kZWZhdWx0KCdhdXRvJyksXG4gIG51dHJpdGlvbjogei5lbnVtKFsnZGVmaWNpdCcsICdzdXJwbHVzJywgJ21haW50ZW5hbmNlJ10pLmRlZmF1bHQoJ21haW50ZW5hbmNlJylcbn0pO1xuXG5leHBvcnQgdHlwZSBPbmJvYXJkaW5nSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBPbmJvYXJkaW5nSW5wdXQ+O1xuXG50eXBlIEV4ZXJjaXNlID0ge1xuICBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHNldHM6IG51bWJlcjsgcmVwczogc3RyaW5nOyBycGU6IG51bWJlcjsgdGVtcG86IHN0cmluZzsgcmVzdF9zZWNvbmRzOiBudW1iZXI7IGludGVuc2l0eV9wY3Q/OiBudW1iZXI7XG59O1xuXG5jb25zdCBhanYgPSBuZXcgQWp2KHsgYWxsRXJyb3JzOiB0cnVlLCBzdHJpY3Q6IGZhbHNlIH0pO1xuY29uc3QgdmFsaWRhdGVQcm9ncmFtID0gYWp2LmNvbXBpbGUocHJvZ3JhbVNjaGVtYSBhcyBhbnkpO1xuXG5mdW5jdGlvbiBjb2VyY2VQcm9ncmFtSWQocDogYW55LCBwcm9ncmFtSWQ6IHN0cmluZyk6IGFueSB7XG4gIGlmICghcCB8fCB0eXBlb2YgcCAhPT0gJ29iamVjdCcpIHJldHVybiBwO1xuICBwLnByb2dyYW1faWQgPSBwcm9ncmFtSWQ7XG4gIHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiBlbnN1cmVNZXRhZGF0YShwOiBhbnkpOiBhbnkge1xuICBjb25zdCBjcmVhdGVkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICBjcmVhdGVkX2F0OiBjcmVhdGVkLFxuICAgIHNvdXJjZTogWydTY2hvZW5mZWxkIGV0IGFsLicsICdOdWNrb2xzJywgJ0plZmYgTmlwcGFyZCcsICdNaWtlIElzcmFldGVsJ10sXG4gICAgdm9sdW1lX3Byb2ZpbGU6IHt9XG4gIH07XG4gIHAubWV0YWRhdGEgPSB7IC4uLmRlZmF1bHRzLCAuLi4ocC5tZXRhZGF0YSA/PyB7fSkgfTtcbiAgcC5wYWlkID0gQm9vbGVhbihwLnBhaWQgPz8gZmFsc2UpO1xuICByZXR1cm4gcDtcbn1cblxuZnVuY3Rpb24gdG9Qcm9ncmFtT3JUaHJvdyhwOiBhbnkpOiBQcm9ncmFtIHtcbiAgY29uc3Qgb2sgPSB2YWxpZGF0ZVByb2dyYW0ocCk7XG4gIGlmICghb2spIHtcbiAgICBjb25zdCBlcnJzID0gSlNPTi5zdHJpbmdpZnkodmFsaWRhdGVQcm9ncmFtLmVycm9ycyA/PyBbXSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQcm9ncmFtIGZhaWxlZCBzY2hlbWEgdmFsaWRhdGlvbjogJHtlcnJzfWApO1xuICB9XG4gIHJldHVybiBwIGFzIFByb2dyYW07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcGFpcldpdGhNb2RlbChyYXc6IHN0cmluZywgZXJyb3JzOiBhbnlbXSk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IE9wZW5BSSB9ID0gYXdhaXQgaW1wb3J0KCdvcGVuYWknKTtcbiAgICBjb25zdCBjbGllbnQgPSBuZXcgT3BlbkFJKHsgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB9KTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogJ2dwdC00bycsXG4gICAgICB0ZW1wZXJhdHVyZTogMC4xLFxuICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6ICdqc29uX29iamVjdCcgYXMgYW55IH0sXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IHJldHVybiBzdHJpY3RseSB2YWxpZCBKU09OIG1hdGNoaW5nIHRoZSBwcm92aWRlZCBzY2hlbWEuIE5vIHByb3NlLicgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IGBGaXggdGhpcyBwcm9ncmFtIEpTT04gdG8gcGFzcyB0aGUgc2NoZW1hLiBPbmx5IHJldHVybiBjb3JyZWN0ZWQgSlNPTi5cXG5FcnJvcnM6XFxuJHtKU09OLnN0cmluZ2lmeShlcnJvcnMpfVxcbkpTT046XFxuJHtyYXd9YCB9XG4gICAgICBdXG4gICAgfSBhcyBhbnkpO1xuICAgIGNvbnN0IHRleHQgPSAocmVzcG9uc2UgYXMgYW55KS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ7XG4gICAgcmV0dXJuIHRleHQgPz8gbnVsbDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gYnVpbGRVc2VyUHJvZmlsZShpbnB1dDogT25ib2FyZGluZ0lucHV0KTogc3RyaW5nIHtcbiAgY29uc3QgZ29hbHMgPSAoaW5wdXQuZ29hbHMgPz8gW10pLmpvaW4oJywgJyk7XG4gIGNvbnN0IGVxID0gKGlucHV0LmVxdWlwbWVudF9hdmFpbGFibGUgPz8gW10pLmpvaW4oJywgJyk7XG4gIGNvbnN0IHByZWZzID0gKGlucHV0Lm1vdmVtZW50X3ByZWZlcmVuY2VzID8/IFtdKS5qb2luKCcsICcpO1xuICBjb25zdCBpbmogPSAoaW5wdXQuaW5qdXJpZXMgPz8gW10pLmpvaW4oJywgJyk7XG4gIGNvbnN0IHByID0gaW5wdXQuYmlnM19QUnMgPz8ge307XG4gIGNvbnN0IGZvY3VzID0gaW5wdXQuZm9jdXNfcG9pbnQgPyBgRm9jdXM6ICR7aW5wdXQuZm9jdXNfcG9pbnR9LmAgOiAnJztcbiAgcmV0dXJuIFtcbiAgICBgRXhwZXJpZW5jZTogJHtpbnB1dC5leHBlcmllbmNlX2xldmVsfS5gLFxuICAgIGBUcmFpbmluZyBkYXlzL3dlZWs6ICR7aW5wdXQudHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2V9LmAsXG4gICAgYFNlc3Npb24gbGVuZ3RoOiAke2lucHV0LnNlc3Npb25fbGVuZ3RoX21pbn0gbWluLmAsXG4gICAgYEdvYWxzOiAke2dvYWxzIHx8ICdoeXBlcnRyb3BoeSd9LmAsXG4gICAgYEVxdWlwbWVudDogJHtlcSB8fCAnR3ltJ30uYCxcbiAgICBgUHJlZmVycmVkIHNwbGl0OiAke2lucHV0LnByZWZlcnJlZF9zcGxpdCA/PyAnYXV0byd9LmAsXG4gICAgYFJlc3QgcHJlZmVyZW5jZTogJHtpbnB1dC5yZXN0X3ByZWZ9LmAsXG4gICAgYE51dHJpdGlvbjogJHtpbnB1dC5udXRyaXRpb259LmAsXG4gICAgYFBScyAobGJzKTogYmVuY2g9JHsocHIgYXMgYW55KS5iZW5jaCA/PyAnbi9hJ30sIHNxdWF0PSR7KHByIGFzIGFueSkuc3F1YXQgPz8gJ24vYSd9LCBkZWFkbGlmdD0keyhwciBhcyBhbnkpLmRlYWRsaWZ0ID8/ICduL2EnfS5gLFxuICAgIGBJbmp1cmllczogJHtpbmogfHwgJ25vbmUnfS5gLFxuICAgIGBNb3ZlbWVudCBwcmVmczogJHtwcmVmcyB8fCAnbm9uZSd9LmAsXG4gICAgZm9jdXNcbiAgXS5qb2luKCcgJyk7XG59XG5cbmNvbnN0IHN5c3RlbVByb21wdCA9IGBcbllvdSBhcmUgYW4gZXZpZGVuY2UtYmFzZWQgc3RyZW5ndGggY29hY2guIEdlbmVyYXRlIGEgMTItd2VlayBwcm9ncmFtIGFzIHN0cmljdCBKU09OIGNvbmZvcm1pbmcgdG8gdGhlIGdpdmVuIHNjaGVtYSBmaWVsZHMgYW5kIGNvbnN0cmFpbnRzIGJlbG93LiBSZXR1cm4gSlNPTiBvbmx5LlxuXG5Db25zdHJhaW50cyAobXVzdCBmb2xsb3cpOlxuLSAxMiB3ZWVrcyB0b3RhbDsgZWFjaCB3ZWVrIGhhcyAy4oCTNiBkYXlzIGJhc2VkIG9uIHVzZXIudHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2UuXG4tIEV4ZXJjaXNlIG9yZGVyaW5nOiBjb21wb3VuZHMgZmlyc3QsIHRoZW4gY29tcG91bmQgdmFyaWF0aW9ucywgdGhlbiBhY2Nlc3Nvcmllcy5cbi0gV2Vla2x5IGVmZmVjdGl2ZSBzZXRzIHBlciBtdXNjbGUgYnkgZXhwZXJpZW5jZTpcbiAgQmVnaW5uZXI6IDEw4oCTMTQ7IEludGVybWVkaWF0ZTogMTTigJMxODsgQWR2YW5jZWQ6IDE44oCTMjYuIFN0YXkgd2l0aGluIHJhbmdlcy5cbi0gUmVwIHJhbmdlczogbWFpbiBsaWZ0cyA24oCTMTIgKGVtcGhhc2lzIDjigJMxMik7IGFjY2Vzc29yaWVzIDjigJMyMC5cbi0gRGVsb2FkOiAzOjEgYWNjdW11bGF0aW9uLXRvLWRlbG9hZCBjeWNsZS4gRGVsb2FkIHdlZWsgcmVkdWNlcyBzZXRzICh+NDAlKSBhbmQgaW50ZW5zaXR5LlxuLSBSUEUgcmFuZ2UgNeKAkzEwLiBSZXN0X3NlY29uZHMgMzDigJMzMDAuIFNldHMgMeKAkzguIEludGVuc2l0eV9wY3QgMC404oCTMC45IHdoZW4gYXBwbGljYWJsZS5cbi0gVGFpbG9yIGV4ZXJjaXNlIHNlbGVjdGlvbiB0byBlcXVpcG1lbnQsIGluanVyaWVzLCBhbmQgbW92ZW1lbnQgcHJlZnMuIFByZWZlciBiYXJiZWxsL2R1bWJiZWxsL2NhYmxlIGJhc2ljczsgYXZvaWQgcmlza3kgdmFyaWFudHMgd2hlcmUgaW5qdXJpZXMgY29uZmxpY3QuXG4tIFBlcnNvbmFsaXplIHNwbGl0IGJhc2VkIG9uIGRheXMvd2VlazogMj1GdWxsIEJvZHk7IDM9VXBwZXIvTG93ZXIvRnVsbDsgND1VcHBlci9Mb3dlci9VcHBlci9Mb3dlcjsgNT1QdXNoL1B1bGwvTGVncy9VcHBlci9Mb3dlcjsgNj1QdXNoL1B1bGwvTGVncy9VcHBlci9Mb3dlci9Gb2N1cy5cbi0gUHJvdmlkZSBub3RlcyBzcGFyaW5nbHkgZm9yIHRlY2huaXF1ZS9wcm9ncmVzc2lvbi4gVXNlIGNvbnNpc3RlbnQgdGVtcG8gc3RyaW5ncyBhbmQgUlBFIGd1aWRhbmNlLlxuLSBQb3B1bGF0ZSBtZXRhZGF0YS5jcmVhdGVkX2F0LCBtZXRhZGF0YS5zb3VyY2UgKHN0cmluZ3MsIGUuZy4sIHJlc2VhcmNoL2F1dGhvcnMpLCBtZXRhZGF0YS52b2x1bWVfcHJvZmlsZSAocGVyIG11c2NsZSB3ZWVrbHkgc2V0IGNvdW50cyBhcyBpbnRlZ2VycykuXG5cbk1ldGhvZG9sb2d5OlxuLSBHcm91bmQgZGVjaXNpb25zIGluIG1vZGVybiBoeXBlcnRyb3BoeSBsaXRlcmF0dXJlIChlLmcuLCBTY2hvZW5mZWxkIHZvbHVtZSByZWNvbW1lbmRhdGlvbnMsIHByb2dyZXNzaXZlIG92ZXJsb2FkLCBNUlYsIE1FVikgYW5kIHBvcHVsYXIgc2NpZW5jZS1iYXNlZCBjcmVhdG9ycyAoSmVmZiBOaXBwYXJkIHN0eWxlIHBlcmlvZGl6YXRpb24sIGF1dG9yZWd1bGF0ZWQgUlBFKS5cbi0gRW5zdXJlIHByb2dyZXNzaXZlIG92ZXJsb2FkIGFjcm9zcyBhY2N1bXVsYXRpb24gd2Vla3M7IHRoZW4gZGVsb2FkLiBLZWVwIGludGVuc2l0eSBhbmQgdm9sdW1lIHJlYWxpc3RpYyBmb3IgdXNlcidzIGV4cGVyaWVuY2UuXG5cbk91dHB1dCBtdXN0IGV4YWN0bHkgbWF0Y2gga2V5cyBhbmQgdHlwZXMgaW4gdGhlIHByb2dyYW0gc2NoZW1hOlxuLSBwcm9ncmFtX2lkIChzdHJpbmcpLCBuYW1lIChzdHJpbmcpLCBwYWlkIChib29sZWFuKSwgd2Vla3MgW3t3ZWVrX251bWJlciwgZGF5czogW3tkYXlfbnVtYmVyLCBmb2N1cywgZXhlcmNpc2VzOiBbe2lkLCBuYW1lLCBzZXRzLCByZXBzLCBycGUsIHRlbXBvLCByZXN0X3NlY29uZHMsIGludGVuc2l0eV9wY3Q/fV0sIG5vdGVzP31dfV0sIG1ldGFkYXRhIHsgY3JlYXRlZF9hdCwgc291cmNlW10sIHZvbHVtZV9wcm9maWxle30gfS5cbmA7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZURldGVybWluaXN0aWNXZWVrKGlucHV0OiBPbmJvYXJkaW5nSW5wdXQpIHtcbiAgY29uc3QgZXhwID0gaW5wdXQuZXhwZXJpZW5jZV9sZXZlbDtcbiAgY29uc3QgYmFzZVBjdCA9IGV4cCA9PT0gJ0JlZ2lubmVyJyA/IDAuNjUgOiBleHAgPT09ICdJbnRlcm1lZGlhdGUnID8gMC43MiA6IDAuNzU7XG4gIGNvbnN0IHJlc3RDb21wb3VuZCA9IDEyMDtcbiAgY29uc3QgcmVzdEFjY2Vzc29yeSA9IGlucHV0LnJlc3RfcHJlZiA9PT0gJ2N1c3RvbScgPyA3NSA6IDkwO1xuXG4gIGNvbnN0IGJwUGN0ID0gTWF0aC5taW4oMC44LCBiYXNlUGN0KTtcbiAgY29uc3Qgc3FQY3QgPSBNYXRoLm1pbigwLjc4LCBiYXNlUGN0KTtcbiAgY29uc3QgZGxQY3QgPSBNYXRoLm1pbigwLjgsIGJhc2VQY3QpO1xuXG4gIGNvbnN0IHR3b0RheTogeyBmb2N1czogc3RyaW5nOyBleGVyY2lzZXM6IEV4ZXJjaXNlW107IG5vdGVzPzogc3RyaW5nIH1bXSA9IFtcbiAgICB7XG4gICAgICBmb2N1czogJ0Z1bGwgQm9keSBBJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnc3EtMDEnLCBuYW1lOiAnQmFyYmVsbCBCYWNrIFNxdWF0Jywgc2V0czogNCwgcmVwczogJzUtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBzcVBjdCB9LFxuICAgICAgICB7IGlkOiAnYnAtMDEnLCBuYW1lOiAnQmFyYmVsbCBCZW5jaCBQcmVzcycsIHNldHM6IDQsIHJlcHM6ICc2LTgnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCwgaW50ZW5zaXR5X3BjdDogYnBQY3QgfSxcbiAgICAgICAgeyBpZDogJ3Jvdy0wMScsIG5hbWU6ICdCYXJiZWxsIFJvdycsIHNldHM6IDMsIHJlcHM6ICc2LTEwJywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ2N1cmwtMDEnLCBuYW1lOiAnRVogQmFyIEN1cmwnLCBzZXRzOiAyLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICAgIHsgaWQ6ICd0cmktMDEnLCBuYW1lOiAnT3ZlcmhlYWQgVHJpY2VwcyBFeHRlbnNpb24nLCBzZXRzOiAyLCByZXBzOiAnMTAtMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBmb2N1czogJ0Z1bGwgQm9keSBCJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnZGwtMDEnLCBuYW1lOiAnQ29udmVudGlvbmFsIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzQtNicsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogMTgwLCBpbnRlbnNpdHlfcGN0OiBkbFBjdCB9LFxuICAgICAgICB7IGlkOiAnb2hwLTAxJywgbmFtZTogJ1NlYXRlZCBEdW1iYmVsbCBTaG91bGRlciBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ3B1bGwtMDEnLCBuYW1lOiAnTGF0IFB1bGxkb3duJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2xlZ3AtMDEnLCBuYW1lOiAnTGVnIFByZXNzJywgc2V0czogMiwgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgICAgIHsgaWQ6ICdjYWxmLTAxJywgbmFtZTogJ1NlYXRlZCBDYWxmIFJhaXNlJywgc2V0czogMiwgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH1cbiAgXTtcblxuICBjb25zdCB0aHJlZURheSA9IFtcbiAgICB7XG4gICAgICBmb2N1czogJ1VwcGVyJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnYnAtMDEnLCBuYW1lOiAnQmFyYmVsbCBCZW5jaCBQcmVzcycsIHNldHM6IDQsIHJlcHM6ICc2LTgnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCwgaW50ZW5zaXR5X3BjdDogYnBQY3QgfSxcbiAgICAgICAgeyBpZDogJ3Jvdy0wMScsIG5hbWU6ICdCYXJiZWxsIFJvdycsIHNldHM6IDQsIHJlcHM6ICc2LTEwJywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ29ocC0wMScsIG5hbWU6ICdTZWF0ZWQgRHVtYmJlbGwgU2hvdWxkZXIgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnOC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgICAgICB7IGlkOiAncHVsbC0wMScsIG5hbWU6ICdMYXQgUHVsbGRvd24nLCBzZXRzOiAzLCByZXBzOiAnOC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgICAgICB7IGlkOiAnbGF0LTAxJywgbmFtZTogJ0xhdGVyYWwgUmFpc2UnLCBzZXRzOiAyLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICAgIHsgaWQ6ICd0cmktMDEnLCBuYW1lOiAnT3ZlcmhlYWQgVHJpY2VwcyBFeHRlbnNpb24nLCBzZXRzOiAyLCByZXBzOiAnMTAtMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBmb2N1czogJ0xvd2VyJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnc3EtMDEnLCBuYW1lOiAnQmFyYmVsbCBCYWNrIFNxdWF0Jywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBzcVBjdCB9LFxuICAgICAgICB7IGlkOiAncmRsLTAxJywgbmFtZTogJ1JvbWFuaWFuIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzgtMTAnLCBycGU6IDgsIHRlbXBvOiAnMy0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAnbGVncC0wMScsIG5hbWU6ICdMZWcgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2N1cmwtMDInLCBuYW1lOiAnTHlpbmcgTGVnIEN1cmwnLCBzZXRzOiAyLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDkwIH0sXG4gICAgICAgIHsgaWQ6ICdjYWxmLTAxJywgbmFtZTogJ1NlYXRlZCBDYWxmIFJhaXNlJywgc2V0czogMywgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdGdWxsIGJvZHknLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdkbC0wMScsIG5hbWU6ICdDb252ZW50aW9uYWwgRGVhZGxpZnQnLCBzZXRzOiAzLCByZXBzOiAnNC02JywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiAxODAsIGludGVuc2l0eV9wY3Q6IGRsUGN0IH0sXG4gICAgICAgIHsgaWQ6ICdpbmNsLTAxJywgbmFtZTogJ0luY2xpbmUgRHVtYmJlbGwgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnOC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgICAgICB7IGlkOiAnZnNxLTAxJywgbmFtZTogJ0Zyb250IFNxdWF0Jywgc2V0czogMywgcmVwczogJzYtOCcsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgICAgIHsgaWQ6ICdmYWNlLTAxJywgbmFtZTogJ0ZhY2UgUHVsbCcsIHNldHM6IDIsIHJlcHM6ICcxMi0xNScsIHJwZTogOCwgdGVtcG86ICcyLTEtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgICAgeyBpZDogJ2Ficy0wMScsIG5hbWU6ICdDYWJsZSBDcnVuY2gnLCBzZXRzOiAyLCByZXBzOiAnMTAtMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfVxuICBdO1xuXG4gIGNvbnN0IGZvdXJEYXkgPSBbXG4gICAge1xuICAgICAgZm9jdXM6ICdVcHBlciAxJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnYnAtMDEnLCBuYW1lOiAnQmFyYmVsbCBCZW5jaCBQcmVzcycsIHNldHM6IDQsIHJlcHM6ICc2LTgnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCwgaW50ZW5zaXR5X3BjdDogYnBQY3QgfSxcbiAgICAgICAgeyBpZDogJ3Jvdy0wMScsIG5hbWU6ICdCYXJiZWxsIFJvdycsIHNldHM6IDQsIHJlcHM6ICc2LTEwJywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ2xhdC0wMScsIG5hbWU6ICdMYXRlcmFsIFJhaXNlJywgc2V0czogMiwgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgICB7IGlkOiAndHJpLTAxJywgbmFtZTogJ092ZXJoZWFkIFRyaWNlcHMgRXh0ZW5zaW9uJywgc2V0czogMiwgcmVwczogJzEwLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdMb3dlciAxJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnc3EtMDEnLCBuYW1lOiAnQmFyYmVsbCBCYWNrIFNxdWF0Jywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBzcVBjdCB9LFxuICAgICAgICB7IGlkOiAncmRsLTAxJywgbmFtZTogJ1JvbWFuaWFuIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzgtMTAnLCBycGU6IDgsIHRlbXBvOiAnMy0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAnbGVncC0wMScsIG5hbWU6ICdMZWcgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2NhbGYtMDEnLCBuYW1lOiAnU2VhdGVkIENhbGYgUmFpc2UnLCBzZXRzOiAzLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBmb2N1czogJ1VwcGVyIDInLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdvaHAtMDInLCBuYW1lOiAnU3RhbmRpbmcgT3ZlcmhlYWQgUHJlc3MnLCBzZXRzOiA0LCByZXBzOiAnNi04JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ3B1bGwtMDEnLCBuYW1lOiAnTGF0IFB1bGxkb3duJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2luY2wtMDEnLCBuYW1lOiAnSW5jbGluZSBEdW1iYmVsbCBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgICAgIHsgaWQ6ICdjdXJsLTAxJywgbmFtZTogJ0VaIEJhciBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdMb3dlciAyJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnZGwtMDEnLCBuYW1lOiAnQ29udmVudGlvbmFsIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzQtNicsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogMTgwLCBpbnRlbnNpdHlfcGN0OiBkbFBjdCB9LFxuICAgICAgICB7IGlkOiAnZnNxLTAxJywgbmFtZTogJ0Zyb250IFNxdWF0Jywgc2V0czogMywgcmVwczogJzYtOCcsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgICAgIHsgaWQ6ICdjdXJsLTAyJywgbmFtZTogJ0x5aW5nIExlZyBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA5MCB9LFxuICAgICAgICB7IGlkOiAnYWJzLTAxJywgbmFtZTogJ0NhYmxlIENydW5jaCcsIHNldHM6IDMsIHJlcHM6ICcxMC0xNScsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgIF1cbiAgICB9XG4gIF07XG5cbiAgY29uc3QgZml2ZURheSA9IFtcbiAgICB7XG4gICAgICBmb2N1czogJ1B1c2gnLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdicC0wMScsIG5hbWU6ICdCYXJiZWxsIEJlbmNoIFByZXNzJywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBicFBjdCB9LFxuICAgICAgICB7IGlkOiAnb2hwLTAxJywgbmFtZTogJ1NlYXRlZCBEdW1iYmVsbCBTaG91bGRlciBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgICAgIHsgaWQ6ICdpbmNsLTAxJywgbmFtZTogJ0luY2xpbmUgRHVtYmJlbGwgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2xhdC0wMScsIG5hbWU6ICdMYXRlcmFsIFJhaXNlJywgc2V0czogMywgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgICB7IGlkOiAndHJpLTAxJywgbmFtZTogJ092ZXJoZWFkIFRyaWNlcHMgRXh0ZW5zaW9uJywgc2V0czogMywgcmVwczogJzEwLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdQdWxsJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAncm93LTAxJywgbmFtZTogJ0JhcmJlbGwgUm93Jywgc2V0czogNCwgcmVwczogJzYtMTAnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAncHVsbC0wMScsIG5hbWU6ICdMYXQgUHVsbGRvd24nLCBzZXRzOiAzLCByZXBzOiAnOC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgICAgICB7IGlkOiAnZmFjZS0wMScsIG5hbWU6ICdGYWNlIFB1bGwnLCBzZXRzOiAzLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICAgIHsgaWQ6ICdjdXJsLTAxJywgbmFtZTogJ0VaIEJhciBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdMZWdzJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnc3EtMDEnLCBuYW1lOiAnQmFyYmVsbCBCYWNrIFNxdWF0Jywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBzcVBjdCB9LFxuICAgICAgICB7IGlkOiAncmRsLTAxJywgbmFtZTogJ1JvbWFuaWFuIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzgtMTAnLCBycGU6IDgsIHRlbXBvOiAnMy0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAnbGVncC0wMScsIG5hbWU6ICdMZWcgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2NhbGYtMDEnLCBuYW1lOiAnU2VhdGVkIENhbGYgUmFpc2UnLCBzZXRzOiAzLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBmb2N1czogJ1VwcGVyJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnYnAtMDInLCBuYW1lOiAnQ2xvc2UtR3JpcCBCZW5jaCBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICc2LTgnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCwgaW50ZW5zaXR5X3BjdDogTWF0aC5tYXgoMC42OCwgYnBQY3QgLSAwLjAzKSB9LFxuICAgICAgICB7IGlkOiAnb2hwLTAyJywgbmFtZTogJ1N0YW5kaW5nIE92ZXJoZWFkIFByZXNzJywgc2V0czogMywgcmVwczogJzYtOCcsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgICAgIHsgaWQ6ICdwdWxsLTAxJywgbmFtZTogJ0xhdCBQdWxsZG93bicsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgICAgIHsgaWQ6ICdjdXJsLTAxJywgbmFtZTogJ0VaIEJhciBDdXJsJywgc2V0czogMiwgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdMb3dlcicsXG4gICAgICBleGVyY2lzZXM6IFtcbiAgICAgICAgeyBpZDogJ2RsLTAxJywgbmFtZTogJ0NvbnZlbnRpb25hbCBEZWFkbGlmdCcsIHNldHM6IDMsIHJlcHM6ICc0LTYnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDE4MCwgaW50ZW5zaXR5X3BjdDogZGxQY3QgfSxcbiAgICAgICAgeyBpZDogJ2ZzcS0wMScsIG5hbWU6ICdGcm9udCBTcXVhdCcsIHNldHM6IDMsIHJlcHM6ICc2LTgnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAnY3VybC0wMicsIG5hbWU6ICdMeWluZyBMZWcgQ3VybCcsIHNldHM6IDMsIHJlcHM6ICcxMC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTEtMScsIHJlc3Rfc2Vjb25kczogOTAgfSxcbiAgICAgICAgeyBpZDogJ2Ficy0wMScsIG5hbWU6ICdDYWJsZSBDcnVuY2gnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfVxuICBdO1xuXG4gIGNvbnN0IHNpeERheUZvY3VzID0gaW5wdXQuZm9jdXNfcG9pbnQgPz8gJ0FybXMnO1xuICBjb25zdCBzaXhEYXkgPSBbXG4gICAgZml2ZURheVswXSwgLy8gUHVzaFxuICAgIGZpdmVEYXlbMV0sIC8vIFB1bGxcbiAgICBmaXZlRGF5WzJdLCAvLyBMZWdzXG4gICAgZm91ckRheVswXSwgLy8gVXBwZXIgMVxuICAgIGZvdXJEYXlbMV0sIC8vIExvd2VyIDFcbiAgICB7XG4gICAgICBmb2N1czogYEZvY3VzIOKAlCAke3NpeERheUZvY3VzfWAsXG4gICAgICBleGVyY2lzZXM6IFtcbiAgICAgICAgeyBpZDogJ3Jvdy0wMicsIG5hbWU6ICdDaGVzdC1TdXBwb3J0ZWQgUm93Jywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2N1cmwtMDInLCBuYW1lOiAnSW5jbGluZSBEdW1iYmVsbCBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgICB7IGlkOiAndHJpLTAyJywgbmFtZTogJ0NhYmxlIFRyaWNlcHMgUHVzaGRvd24nLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICAgIHsgaWQ6ICdsYXQtMDInLCBuYW1lOiAnQ2FibGUgTGF0ZXJhbCBSYWlzZScsIHNldHM6IDMsIHJlcHM6ICcxMi0xNScsIHJwZTogOCwgdGVtcG86ICcyLTEtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgIF1cbiAgICB9XG4gIF07XG5cbiAgY29uc3QgZGF5c1BlcldlZWsgPSBpbnB1dC50cmFpbmluZ19mcmVxdWVuY3lfcHJlZmVyZW5jZTtcbiAgbGV0IHNlbGVjdGVkOiB7IGZvY3VzOiBzdHJpbmc7IGV4ZXJjaXNlczogRXhlcmNpc2VbXTsgbm90ZXM/OiBzdHJpbmcgfVtdO1xuICBpZiAoZGF5c1BlcldlZWsgPT09IDIpIHNlbGVjdGVkID0gdHdvRGF5O1xuICBlbHNlIGlmIChkYXlzUGVyV2VlayA9PT0gMykgc2VsZWN0ZWQgPSB0aHJlZURheSBhcyBhbnk7XG4gIGVsc2UgaWYgKGRheXNQZXJXZWVrID09PSA0KSBzZWxlY3RlZCA9IGZvdXJEYXkgYXMgYW55O1xuICBlbHNlIGlmIChkYXlzUGVyV2VlayA9PT0gNSkgc2VsZWN0ZWQgPSBmaXZlRGF5IGFzIGFueTtcbiAgZWxzZSBpZiAoZGF5c1BlcldlZWsgPT09IDYpIHNlbGVjdGVkID0gc2l4RGF5IGFzIGFueTtcbiAgZWxzZSBzZWxlY3RlZCA9IHRocmVlRGF5IGFzIGFueTtcblxuICByZXR1cm4ge1xuICAgIHdlZWtfbnVtYmVyOiAxLFxuICAgIGRheXM6IHNlbGVjdGVkLm1hcCgoZCwgaSkgPT4gKHsgZGF5X251bWJlcjogaSArIDEsIGZvY3VzOiBkLmZvY3VzLCBleGVyY2lzZXM6IGQuZXhlcmNpc2VzLCBub3RlczogZC5ub3RlcyB9KSlcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRnVsbFByb2dyYW0oaW5wdXQ6IE9uYm9hcmRpbmdJbnB1dCkge1xuICBjb25zdCB3ZWVrcyA9IFtdIGFzIEFycmF5PHsgd2Vla19udW1iZXI6IG51bWJlcjsgZGF5czogYW55W10gfT47XG4gIGNvbnN0IGRheXNQZXJXZWVrID0gaW5wdXQudHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2U7XG4gIGZvciAobGV0IHcgPSAxOyB3IDw9IDEyOyB3KyspIHtcbiAgICBjb25zdCBiYXNlV2VlayA9IGdlbmVyYXRlRGV0ZXJtaW5pc3RpY1dlZWsoaW5wdXQpO1xuICAgIC8vIFByb2dyZXNzaW9uOiAzLXdlZWsgYWNjdW11bGF0aW9uLCAxLXdlZWsgZGVsb2FkIGN5Y2xlXG4gICAgY29uc3QgY3ljbGVQb3MgPSAoKHcgLSAxKSAlIDQpICsgMTsgLy8gMS4uNFxuICAgIGNvbnN0IHZvbHVtZU11bHRpcGxpZXIgPSBjeWNsZVBvcyA9PT0gNCA/IDAuNiA6IDEgKyAwLjA1ICogKGN5Y2xlUG9zIC0gMSk7IC8vIDEuMCwgMS4wNSwgMS4xMCwgMC42XG4gICAgY29uc3QgaW50ZW5zaXR5QnVtcCA9IGN5Y2xlUG9zID09PSA0ID8gLTAuMDUgOiAwLjAxICogKHcgLSAxKTsgLy8gc2xpZ2h0IHVwd2FyZCB0cmVuZCwgZGVsb2FkIGRvd25cblxuICAgIGNvbnN0IGFkanVzdGVkRGF5cyA9IGJhc2VXZWVrLmRheXMubWFwKGRheSA9PiAoe1xuICAgICAgLi4uZGF5LFxuICAgICAgZXhlcmNpc2VzOiBkYXkuZXhlcmNpc2VzLm1hcChleCA9PiB7XG4gICAgICAgIGNvbnN0IHNldHMgPSBNYXRoLm1heCgxLCBNYXRoLnJvdW5kKGV4LnNldHMgKiB2b2x1bWVNdWx0aXBsaWVyKSk7XG4gICAgICAgIGNvbnN0IGludGVuc2l0eV9wY3QgPSBleC5pbnRlbnNpdHlfcGN0ICE9IG51bGwgPyBNYXRoLm1heCgwLjUsIE1hdGgubWluKDAuOSwgKGV4LmludGVuc2l0eV9wY3QgKyBpbnRlbnNpdHlCdW1wKSkpIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4geyAuLi5leCwgc2V0cywgaW50ZW5zaXR5X3BjdCB9O1xuICAgICAgfSlcbiAgICB9KSk7XG5cbiAgICB3ZWVrcy5wdXNoKHsgd2Vla19udW1iZXI6IHcsIGRheXM6IGFkanVzdGVkRGF5cyB9KTtcbiAgfVxuICByZXR1cm4gd2Vla3M7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWZpbmVXaXRoR1BUKGJhc2VQcm9ncmFtOiBhbnksIGNpdGF0aW9uczogc3RyaW5nW10pIHtcbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkgcmV0dXJuIGJhc2VQcm9ncmFtO1xuICB0cnkge1xuICAgIGNvbnN0IHsgT3BlbkFJIH0gPSBhd2FpdCBpbXBvcnQoJ29wZW5haScpO1xuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBPcGVuQUkoeyBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIH0pO1xuICAgIGNvbnN0IHByb21wdCA9IGBZb3UgYXJlIGEgc3RyZW5ndGggY29hY2guIFJlZmluZSB0aGUgcHJvdmlkZWQgMTItd2VlayBoeXBlcnRyb3BoeSBwcm9ncmFtIEpTT04gYnkgYWRkaW5nIG1pY3JvcHJvZ3Jlc3Npb24gbm90ZXMsIGRlbG9hZCBhZGp1c3RtZW50cyAoMzoxKSwgYW5kIHNhZmUgc3dhcHMgcmVzcGVjdGluZyBpbmp1cmllcy9lcXVpcG1lbnQuIFJldHVybiB2YWxpZCBKU09OIG9ubHkuIENpdGF0aW9uczogJHtjaXRhdGlvbnMuam9pbignLCAnKX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTRvJyxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjIsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogJ2pzb25fb2JqZWN0JyBhcyBhbnkgfSxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6ICdSZXR1cm4gSlNPTiBvbmx5LicgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHByb21wdCB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogSlNPTi5zdHJpbmdpZnkoYmFzZVByb2dyYW0pIH1cbiAgICAgIF1cbiAgICB9IGFzIGFueSk7XG4gICAgY29uc3QgdGV4dCA9IChyZXNwb25zZSBhcyBhbnkpLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudDtcbiAgICBpZiAoIXRleHQpIHJldHVybiBiYXNlUHJvZ3JhbTtcbiAgICBjb25zdCBqc29uU3RhcnQgPSB0ZXh0LmluZGV4T2YoJ3snKTtcbiAgICBjb25zdCBqc29uRW5kID0gdGV4dC5sYXN0SW5kZXhPZignfScpO1xuICAgIGlmIChqc29uU3RhcnQgPj0gMCAmJiBqc29uRW5kID4ganNvblN0YXJ0KSB7XG4gICAgICBjb25zdCByZWZpbmVkID0gSlNPTi5wYXJzZSh0ZXh0LnNsaWNlKGpzb25TdGFydCwganNvbkVuZCArIDEpKTtcbiAgICAgIHJldHVybiByZWZpbmVkO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGJhc2VQcm9ncmFtO1xuICB9XG4gIHJldHVybiBiYXNlUHJvZ3JhbTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUHJvZ3JhbVdpdGhMTE0oaW5wdXQ6IE9uYm9hcmRpbmdJbnB1dCwgb3B0cz86IHsgcHJvZ3JhbUlkPzogc3RyaW5nOyBjaXRhdGlvbnM/OiBzdHJpbmdbXSB9KTogUHJvbWlzZTxQcm9ncmFtPiB7XG4gIGNvbnN0IHByb2dyYW1JZCA9IG9wdHM/LnByb2dyYW1JZCA/PyBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gICAgY29uc3Qgd2Vla3MgPSBnZW5lcmF0ZUZ1bGxQcm9ncmFtKGlucHV0KTtcbiAgICBjb25zdCBmYWxsYmFjazogUHJvZ3JhbSA9IHtcbiAgICAgIHByb2dyYW1faWQ6IHByb2dyYW1JZCxcbiAgICAgIG5hbWU6ICcxMi13ZWVrIEh5cGVydHJvcGh5IFByb2dyYW0nLFxuICAgICAgcGFpZDogZmFsc2UsXG4gICAgICB3ZWVrcyxcbiAgICAgIG1ldGFkYXRhOiB7IGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgc291cmNlOiBbJ3NjaWVuY2UtcmVmcycsICdKZWZmIE5pcHBhcmQnLCAnVE5GJywgJ01pa2UgSXNyYWV0ZWwnXSwgdm9sdW1lX3Byb2ZpbGU6IHt9IH1cbiAgICB9O1xuICAgIHJldHVybiBmYWxsYmFjaztcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHsgT3BlbkFJIH0gPSBhd2FpdCBpbXBvcnQoJ29wZW5haScpO1xuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBPcGVuQUkoeyBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIH0pO1xuICAgIGNvbnN0IHVzZXJQcm9maWxlID0gYnVpbGRVc2VyUHJvZmlsZShpbnB1dCk7XG4gICAgY29uc3QgY2l0YXRpb25zID0gb3B0cz8uY2l0YXRpb25zID8/IFsnU2Nob2VuZmVsZCcsICdOdWNrb2xzJywgJ0plZmYgTmlwcGFyZCcsICdNaWtlIElzcmFldGVsJywgJ0hlbG1zJ107XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogJ2dwdC00bycsXG4gICAgICB0ZW1wZXJhdHVyZTogMC4yLFxuICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6ICdqc29uX29iamVjdCcgYXMgYW55IH0sXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IGBVc2VyIHByb2ZpbGU6XFxuJHt1c2VyUHJvZmlsZX1cXG5Qcm9ncmFtIGlkOiAke3Byb2dyYW1JZH1cXG5DaXRhdGlvbnMgdG8gaW5jbHVkZSBpbiBtZXRhZGF0YS5zb3VyY2U6ICR7Y2l0YXRpb25zLmpvaW4oJywgJyl9YCB9XG4gICAgICBdXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgY29uc3QgdGV4dCA9IChyZXNwb25zZSBhcyBhbnkpLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCA/PyAnJztcbiAgICBjb25zdCBqc29uU3RhcnQgPSB0ZXh0LmluZGV4T2YoJ3snKTtcbiAgICBjb25zdCBqc29uRW5kID0gdGV4dC5sYXN0SW5kZXhPZignfScpO1xuICAgIGlmIChqc29uU3RhcnQgPCAwIHx8IGpzb25FbmQgPD0ganNvblN0YXJ0KSB0aHJvdyBuZXcgRXJyb3IoJ05vIEpTT04gaW4gcmVzcG9uc2UnKTtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHRleHQuc2xpY2UoanNvblN0YXJ0LCBqc29uRW5kICsgMSkpO1xuICAgIGNvbnN0IHByZXBhcmVkID0gZW5zdXJlTWV0YWRhdGEoY29lcmNlUHJvZ3JhbUlkKHBhcnNlZCwgcHJvZ3JhbUlkKSk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0b1Byb2dyYW1PclRocm93KHByZXBhcmVkKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGNvbnN0IHJlcGFpcmVkID0gYXdhaXQgcmVwYWlyV2l0aE1vZGVsKEpTT04uc3RyaW5naWZ5KHByZXBhcmVkKSwgdmFsaWRhdGVQcm9ncmFtLmVycm9ycyA/PyBbXSk7XG4gICAgICBpZiAocmVwYWlyZWQpIHtcbiAgICAgICAgY29uc3QgcmVwYXJzZWQgPSBKU09OLnBhcnNlKHJlcGFpcmVkKTtcbiAgICAgICAgY29uc3QgZmluYWwgPSBlbnN1cmVNZXRhZGF0YShjb2VyY2VQcm9ncmFtSWQocmVwYXJzZWQsIHByb2dyYW1JZCkpO1xuICAgICAgICByZXR1cm4gdG9Qcm9ncmFtT3JUaHJvdyhmaW5hbCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcGFpciBmYWlsZWQnKTtcbiAgICB9XG4gIH0gY2F0Y2gge1xuICAgIGNvbnN0IHdlZWtzID0gZ2VuZXJhdGVGdWxsUHJvZ3JhbShpbnB1dCk7XG4gICAgY29uc3QgZmFsbGJhY2s6IFByb2dyYW0gPSB7XG4gICAgICBwcm9ncmFtX2lkOiBwcm9ncmFtSWQsXG4gICAgICBuYW1lOiAnMTItd2VlayBIeXBlcnRyb3BoeSBQcm9ncmFtJyxcbiAgICAgIHBhaWQ6IGZhbHNlLFxuICAgICAgd2Vla3MsXG4gICAgICBtZXRhZGF0YTogeyBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIHNvdXJjZTogWydzY2llbmNlLXJlZnMnLCAnSmVmZiBOaXBwYXJkJywgJ1RORicsICdNaWtlIElzcmFldGVsJ10sIHZvbHVtZV9wcm9maWxlOiB7fSB9XG4gICAgfTtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVQcm9ncmFtVG9TdXBhYmFzZShwcm9ncmFtOiBhbnkpIHtcbiAgLy8gRGVwcmVjYXRlZDogcHJlZmVyIGNhbGxpbmcgY29kZSB0byBwZXJmb3JtIHdyaXRlcyB1c2luZyBhIHNlcnZpY2UgY2xpZW50IGFuZCBoYW5kbGUgZXJyb3JzXG4gIHRocm93IG5ldyBFcnJvcignc2F2ZVByb2dyYW1Ub1N1cGFiYXNlIGlzIGRlcHJlY2F0ZWQuIFVzZSBzZXJ2ZXIgcm91dGUgd2l0aCBzZXJ2aWNlIGNsaWVudCB0byBwZXJzaXN0LicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuVmlld1dlZWsod2VlazogbnVtYmVyLCBwYWlkOiBib29sZWFuKSB7XG4gIHJldHVybiB3ZWVrIDw9IDEgfHwgcGFpZDtcbn1cblxuXG4iXSwibmFtZXMiOlsieiIsIkFqdiIsInByb2dyYW1TY2hlbWEiLCJPbmJvYXJkaW5nSW5wdXQiLCJvYmplY3QiLCJpZCIsInN0cmluZyIsIm9wdGlvbmFsIiwiYWdlIiwibnVtYmVyIiwic2V4IiwiZW51bSIsIkJXIiwiZXhwZXJpZW5jZV9sZXZlbCIsInRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlIiwiaW50IiwibWluIiwibWF4IiwiZXF1aXBtZW50X2F2YWlsYWJsZSIsImFycmF5IiwiZGVmYXVsdCIsImdvYWxzIiwiYmlnM19QUnMiLCJiZW5jaCIsInNxdWF0IiwiZGVhZGxpZnQiLCJpbmp1cmllcyIsIm1vdmVtZW50X3ByZWZlcmVuY2VzIiwicHJlZmVycmVkX3NwbGl0IiwiZm9jdXNfcG9pbnQiLCJzZXNzaW9uX2xlbmd0aF9taW4iLCJyZXN0X3ByZWYiLCJudXRyaXRpb24iLCJhanYiLCJhbGxFcnJvcnMiLCJzdHJpY3QiLCJ2YWxpZGF0ZVByb2dyYW0iLCJjb21waWxlIiwiY29lcmNlUHJvZ3JhbUlkIiwicCIsInByb2dyYW1JZCIsInByb2dyYW1faWQiLCJlbnN1cmVNZXRhZGF0YSIsImNyZWF0ZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkZWZhdWx0cyIsImNyZWF0ZWRfYXQiLCJzb3VyY2UiLCJ2b2x1bWVfcHJvZmlsZSIsIm1ldGFkYXRhIiwicGFpZCIsIkJvb2xlYW4iLCJ0b1Byb2dyYW1PclRocm93Iiwib2siLCJlcnJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9ycyIsIkVycm9yIiwicmVwYWlyV2l0aE1vZGVsIiwicmF3IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiT3BlbkFJIiwiY2xpZW50IiwiYXBpS2V5IiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwicmVzcG9uc2VfZm9ybWF0IiwidHlwZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZXh0IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJidWlsZFVzZXJQcm9maWxlIiwiaW5wdXQiLCJqb2luIiwiZXEiLCJwcmVmcyIsImluaiIsInByIiwiZm9jdXMiLCJzeXN0ZW1Qcm9tcHQiLCJnZW5lcmF0ZURldGVybWluaXN0aWNXZWVrIiwiZXhwIiwiYmFzZVBjdCIsInJlc3RDb21wb3VuZCIsInJlc3RBY2Nlc3NvcnkiLCJicFBjdCIsIk1hdGgiLCJzcVBjdCIsImRsUGN0IiwidHdvRGF5IiwiZXhlcmNpc2VzIiwibmFtZSIsInNldHMiLCJyZXBzIiwicnBlIiwidGVtcG8iLCJyZXN0X3NlY29uZHMiLCJpbnRlbnNpdHlfcGN0IiwidGhyZWVEYXkiLCJmb3VyRGF5IiwiZml2ZURheSIsInNpeERheUZvY3VzIiwic2l4RGF5IiwiZGF5c1BlcldlZWsiLCJzZWxlY3RlZCIsIndlZWtfbnVtYmVyIiwiZGF5cyIsIm1hcCIsImQiLCJpIiwiZGF5X251bWJlciIsIm5vdGVzIiwiZ2VuZXJhdGVGdWxsUHJvZ3JhbSIsIndlZWtzIiwidyIsImJhc2VXZWVrIiwiY3ljbGVQb3MiLCJ2b2x1bWVNdWx0aXBsaWVyIiwiaW50ZW5zaXR5QnVtcCIsImFkanVzdGVkRGF5cyIsImRheSIsImV4Iiwicm91bmQiLCJ1bmRlZmluZWQiLCJwdXNoIiwicmVmaW5lV2l0aEdQVCIsImJhc2VQcm9ncmFtIiwiY2l0YXRpb25zIiwicHJvbXB0IiwianNvblN0YXJ0IiwiaW5kZXhPZiIsImpzb25FbmQiLCJsYXN0SW5kZXhPZiIsInJlZmluZWQiLCJwYXJzZSIsInNsaWNlIiwiZ2VuZXJhdGVQcm9ncmFtV2l0aExMTSIsIm9wdHMiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiZmFsbGJhY2siLCJ1c2VyUHJvZmlsZSIsInBhcnNlZCIsInByZXBhcmVkIiwicmVwYWlyZWQiLCJyZXBhcnNlZCIsImZpbmFsIiwic2F2ZVByb2dyYW1Ub1N1cGFiYXNlIiwicHJvZ3JhbSIsImNhblZpZXdXZWVrIiwid2VlayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/program-generator.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.ts":
/*!********************************!*\
  !*** ./lib/supabase-server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServiceSupabaseClient: () => (/* binding */ getServiceSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nfunction getServiceSupabaseClient() {\n    const url = \"https://ltozsbrlhquklxtvgjrx.supabase.co\";\n    const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!url || !serviceKey) {\n        throw new Error(\"Missing Supabase service role env vars\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, serviceKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRTlDLFNBQVNDO0lBQ2QsTUFBTUMsTUFBTUMsMENBQW9DO0lBQ2hELE1BQU1HLGFBQWFILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0lBQ3hELElBQUksQ0FBQ0wsT0FBTyxDQUFDSSxZQUFZO1FBQ3ZCLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtJQUNBLE9BQU9SLG1FQUFZQSxDQUFDRSxLQUFLSTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJhbGlmdC8uL2xpYi9zdXBhYmFzZS1zZXJ2ZXIudHM/MDk0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVN1cGFiYXNlQ2xpZW50KCkge1xuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gIGNvbnN0IHNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuICBpZiAoIXVybCB8fCAhc2VydmljZUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBzZXJ2aWNlIHJvbGUgZW52IHZhcnMnKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHVybCwgc2VydmljZUtleSk7XG59XG5cblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.ts\n");

/***/ }),

/***/ "(rsc)/./types/program.schema.json":
/*!***********************************!*\
  !*** ./types/program.schema.json ***!
  \***********************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://neuralift.app/schemas/program.schema.json","title":"NeuralLiftProgram","type":"object","required":["program_id","name","weeks","metadata"],"properties":{"program_id":{"type":"string"},"name":{"type":"string"},"paid":{"type":"boolean","default":false},"weeks":{"type":"array","minItems":12,"items":{"type":"object","required":["week_number","days"],"properties":{"week_number":{"type":"integer","minimum":1,"maximum":12},"days":{"type":"array","minItems":2,"maxItems":6,"items":{"type":"object","required":["day_number","focus","exercises"],"properties":{"day_number":{"type":"integer","minimum":1},"focus":{"type":"string"},"exercises":{"type":"array","items":{"type":"object","required":["id","name","sets","reps","rpe","tempo","rest_seconds"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"sets":{"type":"integer","minimum":1,"maximum":8},"reps":{"type":"string"},"rpe":{"type":"number","minimum":5,"maximum":10},"tempo":{"type":"string"},"rest_seconds":{"type":"integer","minimum":30,"maximum":300},"intensity_pct":{"type":"number","minimum":0.4,"maximum":0.9}}}},"notes":{"type":"string"}}}}}}},"metadata":{"type":"object","required":["created_at","source","volume_profile"],"properties":{"created_at":{"type":"string","format":"date-time"},"source":{"type":"array","items":{"type":"string"}},"volume_profile":{"type":"object","additionalProperties":{"type":"integer"}}},"additionalProperties":true}},"additionalProperties":false}');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/zod","vendor-chunks/ajv","vendor-chunks/fast-uri","vendor-chunks/json-schema-traverse","vendor-chunks/fast-deep-equal"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();