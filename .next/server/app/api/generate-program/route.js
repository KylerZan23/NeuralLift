"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-program/route";
exports.ids = ["app/api/generate-program/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kyler_NeuralLift_app_api_generate_program_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-program/route.ts */ \"(rsc)/./app/api/generate-program/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-program/route\",\n        pathname: \"/api/generate-program\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-program/route\"\n    },\n    resolvedPagePath: \"/Users/kyler/NeuralLift/app/api/generate-program/route.ts\",\n    nextConfigOutput,\n    userland: _Users_kyler_NeuralLift_app_api_generate_program_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-program/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1wcm9ncmFtJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnZW5lcmF0ZS1wcm9ncmFtJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VuZXJhdGUtcHJvZ3JhbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmt5bGVyJTJGTmV1cmFsTGlmdCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZreWxlciUyRk5ldXJhbExpZnQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1M7QUFDdEY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXVyYWxpZnQvPzBiMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2t5bGVyL05ldXJhbExpZnQvYXBwL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1wcm9ncmFtL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGUtcHJvZ3JhbVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9reWxlci9OZXVyYWxMaWZ0L2FwcC9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUtcHJvZ3JhbS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-program/route.ts":
/*!*******************************************!*\
  !*** ./app/api/generate-program/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/program-generator */ \"(rsc)/./lib/program-generator.ts\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ajv */ \"(rsc)/./node_modules/ajv/dist/ajv.js\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var ajv_formats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ajv-formats */ \"(rsc)/./node_modules/ajv-formats/dist/index.js\");\n/* harmony import */ var ajv_formats__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ajv_formats__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _types_program_schema_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/types/program.schema.json */ \"(rsc)/./types/program.schema.json\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/supabase-server */ \"(rsc)/./lib/supabase-server.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\n\n\n\n\n\n\n\n\nconst ajv = new (ajv__WEBPACK_IMPORTED_MODULE_2___default())({\n    allErrors: true,\n    strict: false\n});\najv_formats__WEBPACK_IMPORTED_MODULE_3___default()(ajv);\nconst validateProgram = ajv.compile(_types_program_schema_json__WEBPACK_IMPORTED_MODULE_4__);\nconst RateLimitSchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n    ip: zod__WEBPACK_IMPORTED_MODULE_8__.string().min(1),\n    key: zod__WEBPACK_IMPORTED_MODULE_8__.string().min(1)\n});\nasync function GET(req) {\n    const url = new URL(req.url);\n    const id = url.searchParams.get(\"id\") ?? \"demo\";\n    const input = _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.OnboardingInput.parse({\n        experience_level: \"Intermediate\",\n        training_frequency_preference: 5,\n        equipment_available: [\n            \"Gym\"\n        ],\n        big3_PRs: {\n            bench: 185,\n            squat: 185,\n            deadlift: 225\n        },\n        preferred_split: undefined,\n        session_length_min: 60\n    });\n    const weeks = (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateFullProgram)(input);\n    const program = {\n        program_id: id,\n        name: \"12-week Hypertrophy Program\",\n        paid: false,\n        weeks,\n        metadata: {\n            created_at: new Date().toISOString(),\n            source: [\n                \"science-refs\",\n                \"Jeff Nippard\",\n                \"TNF\",\n                \"Mike Israetel\"\n            ],\n            volume_profile: {}\n        }\n    };\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(program, {\n        status: 200\n    });\n}\nasync function POST(req) {\n    const body = await req.json();\n    const input = _lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.OnboardingInput.parse(body.input);\n    const gpt = Boolean(body.useGPT);\n    const programId = body.programId ?? crypto.randomUUID();\n    // Derive authenticated user on the server; prefer cookies but also support Authorization: Bearer <token>\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_7__.cookies)();\n    let user = null;\n    try {\n        const authClient = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_6__.createServerClient)(\"https://ltozsbrlhquklxtvgjrx.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx0b3pzYnJsaHF1a2x4dHZnanJ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwMzcyNTQsImV4cCI6MjA3MDYxMzI1NH0.5fGQSh6vVA-AsjFGgBQolU5M_G2meQC5wwALU_nKjTU\", {\n            cookies: {\n                get (name) {\n                    return cookieStore.get(name)?.value;\n                },\n                set (name, value, options) {\n                    cookieStore.set(name, value, options);\n                },\n                remove (name, options) {\n                    cookieStore.set(name, \"\", {\n                        ...options,\n                        maxAge: 0\n                    });\n                }\n            }\n        });\n        const { data: auth } = await authClient.auth.getUser();\n        user = auth?.user ?? null;\n    } catch  {}\n    if (!user) {\n        try {\n            const bearer = req.headers.get(\"authorization\") ?? req.headers.get(\"Authorization\");\n            const token = bearer?.toLowerCase().startsWith(\"bearer \") ? bearer.slice(7) : undefined;\n            if (token) {\n                const direct = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_9__.createClient)(\"https://ltozsbrlhquklxtvgjrx.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx0b3pzYnJsaHF1a2x4dHZnanJ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwMzcyNTQsImV4cCI6MjA3MDYxMzI1NH0.5fGQSh6vVA-AsjFGgBQolU5M_G2meQC5wwALU_nKjTU\", {\n                    global: {\n                        headers: {\n                            Authorization: `Bearer ${token}`\n                        }\n                    }\n                });\n                const { data: auth } = await direct.auth.getUser();\n                user = auth?.user ?? null;\n            }\n        } catch  {}\n    }\n    if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Unauthorized\"\n    }, {\n        status: 401\n    });\n    let program;\n    if (gpt) {\n        program = await (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateProgramWithLLM)(input, {\n            programId,\n            citations: body.citations ?? [],\n            userId: user.id\n        });\n    } else {\n        const base = {\n            program_id: programId,\n            name: \"12-week Hypertrophy Program\",\n            paid: false,\n            weeks: (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_1__.generateFullProgram)(input),\n            metadata: {\n                created_at: new Date().toISOString(),\n                source: [\n                    \"science-refs\",\n                    \"Jeff Nippard\",\n                    \"TNF\",\n                    \"Mike Israetel\"\n                ],\n                volume_profile: {}\n            }\n        };\n        program = base;\n    }\n    // Validate program against JSON schema before saving\n    const valid = validateProgram(program);\n    if (!valid) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid program payload\",\n            details: validateProgram.errors\n        }, {\n            status: 400\n        });\n    }\n    // Simple in-memory rate limit per IP per minute (best-effort; for production use Upstash Redis)\n    try {\n        const ip = req.headers.get(\"x-forwarded-for\") ?? \"unknown\";\n        const key = `gen:${ip}:${new Date().getUTCMinutes()}`;\n        RateLimitSchema.parse({\n            ip,\n            key\n        });\n        const { isAllowedAndConsume } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_rate-limit_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/rate-limit */ \"(rsc)/./lib/rate-limit.ts\"));\n        const ok = await isAllowedAndConsume({\n            key,\n            limit: 5,\n            windowSeconds: 60\n        });\n        if (!ok) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Rate limit exceeded\"\n        }, {\n            status: 429\n        });\n    } catch  {}\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_5__.getServiceSupabaseClient)();\n    await supabase.from(\"programs\").upsert({\n        id: program.program_id,\n        user_id: user.id,\n        name: program.name,\n        data: program,\n        paid: program.paid ?? false\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(program, {\n        status: 201\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLXByb2dyYW0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDOEQ7QUFDaEc7QUFDZTtBQUNtQjtBQUNTO0FBRXpDO0FBQzJCO0FBQ0U7QUFDZDtBQUV2QyxNQUFNWSxNQUFNLElBQUlSLDRDQUFHQSxDQUFDO0lBQUVTLFdBQVc7SUFBTUMsUUFBUTtBQUFNO0FBQ3JEVCxrREFBVUEsQ0FBQ087QUFDWCxNQUFNRyxrQkFBa0JILElBQUlJLE9BQU8sQ0FBQ1YsdURBQWFBO0FBRWpELE1BQU1XLGtCQUFrQlQsdUNBQVEsQ0FBQztJQUMvQlcsSUFBSVgsdUNBQVEsR0FBR2EsR0FBRyxDQUFDO0lBQ25CQyxLQUFLZCx1Q0FBUSxHQUFHYSxHQUFHLENBQUM7QUFDdEI7QUFFTyxlQUFlRSxJQUFJQyxHQUFnQjtJQUN4QyxNQUFNQyxNQUFNLElBQUlDLElBQUlGLElBQUlDLEdBQUc7SUFDM0IsTUFBTUUsS0FBS0YsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUMsU0FBUztJQUN6QyxNQUFNQyxRQUFRN0IsbUVBQWVBLENBQUM4QixLQUFLLENBQUM7UUFDbENDLGtCQUFrQjtRQUNsQkMsK0JBQStCO1FBQy9CQyxxQkFBcUI7WUFBQztTQUFNO1FBQzVCQyxVQUFVO1lBQUVDLE9BQU87WUFBS0MsT0FBTztZQUFLQyxVQUFVO1FBQUk7UUFDbERDLGlCQUFpQkM7UUFDakJDLG9CQUFvQjtJQUN0QjtJQUVBLE1BQU1DLFFBQVF4QywyRUFBbUJBLENBQUM0QjtJQUNsQyxNQUFNYSxVQUFtQjtRQUN2QkMsWUFBWWpCO1FBQ1prQixNQUFNO1FBQ05DLE1BQU07UUFDTko7UUFDQUssVUFBVTtZQUFFQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7WUFBSUMsUUFBUTtnQkFBQztnQkFBZ0I7Z0JBQWdCO2dCQUFPO2FBQWdCO1lBQUVDLGdCQUFnQixDQUFDO1FBQUU7SUFDekk7SUFFQSxPQUFPcEQscURBQVlBLENB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TztZQUEyQkssU0FBUzdFLGdCQUFnQjhFLE1BQU07UUFBQyxHQUFHO1lBQUV2QyxRQUFRO1FBQUk7SUFDaEg7SUFFQSxnR0FBZ0c7SUFDaEcsSUFBSTtRQUNGLE1BQU1uQyxLQUFLSyxJQUFJdUQsT0FBTyxDQUFDbEQsR0FBRyxDQUFDLHNCQUFzQjtRQUNqRCxNQUFNUCxNQUFNLENBQUMsSUFBSSxFQUFFSCxHQUFHLENBQUMsRUFBRSxJQUFJOEIsT0FBTzZDLGFBQWEsR0FBRyxDQUFDO1FBQ3JEN0UsZ0JBQWdCYyxLQUFLLENBQUM7WUFBRVo7WUFBSUc7UUFBSTtRQUNoQyxNQUFNLEVBQUV5RSxtQkFBbUIsRUFBRSxHQUFHLE1BQU0sd0tBQU87UUFDN0MsTUFBTUMsS0FBSyxNQUFNRCxvQkFBb0I7WUFBRXpFO1lBQUsyRSxPQUFPO1lBQUdDLGVBQWU7UUFBRztRQUN4RSxJQUFJLENBQUNGLElBQUksT0FBT2hHLHFEQUFZQSxDQUFDcUQsSUFBSSxDQUFDO1lBQUVrQyxPQUFPO1FBQXNCLEdBQUc7WUFBRWpDLFFBQVE7UUFBSTtJQUNwRixFQUFFLE9BQU0sQ0FBQztJQUNULE1BQU02QyxXQUFXNUYsOEVBQXdCQTtJQUN6QyxNQUFNNEYsU0FBU0MsSUFBSSxDQUFDLFlBQVlDLE1BQU0sQ0FBQztRQUFFMUUsSUFBSWdCLFFBQVFDLFVBQVU7UUFBRTBELFNBQVN0QyxLQUFLckMsRUFBRTtRQUFFa0IsTUFBTUYsUUFBUUUsSUFBSTtRQUFFOEIsTUFBTWhDO1FBQVNHLE1BQU1ILFFBQVFHLElBQUksSUFBSTtJQUFNO0lBQ2xKLE9BQU85QyxxREFBWUEsQ0FBQ3FELElBQUksQ0FBQ1YsU0FBUztRQUFFVyxRQUFRO0lBQUk7QUFDbEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXVyYWxpZnQvLi9hcHAvYXBpL2dlbmVyYXRlLXByb2dyYW0vcm91dGUudHM/YTQ5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgT25ib2FyZGluZ0lucHV0LCBnZW5lcmF0ZUZ1bGxQcm9ncmFtLCByZWZpbmVXaXRoR1BULCBnZW5lcmF0ZVByb2dyYW1XaXRoTExNIH0gZnJvbSAnQC9saWIvcHJvZ3JhbS1nZW5lcmF0b3InO1xuaW1wb3J0IEFqdiBmcm9tICdhanYnO1xuaW1wb3J0IGFkZEZvcm1hdHMgZnJvbSAnYWp2LWZvcm1hdHMnO1xuaW1wb3J0IHByb2dyYW1TY2hlbWEgZnJvbSAnQC90eXBlcy9wcm9ncmFtLnNjaGVtYS5qc29uJztcbmltcG9ydCB7IGdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlLXNlcnZlcic7XG5pbXBvcnQgdHlwZSB7IFByb2dyYW0gfSBmcm9tICdAL3R5cGVzL3Byb2dyYW0nO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJztcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcblxuY29uc3QgYWp2ID0gbmV3IEFqdih7IGFsbEVycm9yczogdHJ1ZSwgc3RyaWN0OiBmYWxzZSB9KTtcbmFkZEZvcm1hdHMoYWp2KTtcbmNvbnN0IHZhbGlkYXRlUHJvZ3JhbSA9IGFqdi5jb21waWxlKHByb2dyYW1TY2hlbWEgYXMgYW55KTtcblxuY29uc3QgUmF0ZUxpbWl0U2NoZW1hID0gei5vYmplY3Qoe1xuICBpcDogei5zdHJpbmcoKS5taW4oMSksXG4gIGtleTogei5zdHJpbmcoKS5taW4oMSlcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgY29uc3QgaWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnaWQnKSA/PyAnZGVtbyc7XG4gIGNvbnN0IGlucHV0ID0gT25ib2FyZGluZ0lucHV0LnBhcnNlKHtcbiAgICBleHBlcmllbmNlX2xldmVsOiAnSW50ZXJtZWRpYXRlJyxcbiAgICB0cmFpbmluZ19mcmVxdWVuY3lfcHJlZmVyZW5jZTogNSxcbiAgICBlcXVpcG1lbnRfYXZhaWxhYmxlOiBbJ0d5bSddLFxuICAgIGJpZzNfUFJzOiB7IGJlbmNoOiAxODUsIHNxdWF0OiAxODUsIGRlYWRsaWZ0OiAyMjUgfSxcbiAgICBwcmVmZXJyZWRfc3BsaXQ6IHVuZGVmaW5lZCxcbiAgICBzZXNzaW9uX2xlbmd0aF9taW46IDYwXG4gIH0pO1xuXG4gIGNvbnN0IHdlZWtzID0gZ2VuZXJhdGVGdWxsUHJvZ3JhbShpbnB1dCk7XG4gIGNvbnN0IHByb2dyYW06IFByb2dyYW0gPSB7XG4gICAgcHJvZ3JhbV9pZDogaWQsXG4gICAgbmFtZTogJzEyLXdlZWsgSHlwZXJ0cm9waHkgUHJvZ3JhbScsXG4gICAgcGFpZDogZmFsc2UsXG4gICAgd2Vla3MsXG4gICAgbWV0YWRhdGE6IHsgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBzb3VyY2U6IFsnc2NpZW5jZS1yZWZzJywgJ0plZmYgTmlwcGFyZCcsICdUTkYnLCAnTWlrZSBJc3JhZXRlbCddLCB2b2x1bWVfcHJvZmlsZToge30gfVxuICB9O1xuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihwcm9ncmFtLCB7IHN0YXR1czogMjAwIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICBjb25zdCBpbnB1dCA9IE9uYm9hcmRpbmdJbnB1dC5wYXJzZShib2R5LmlucHV0KTtcbiAgY29uc3QgZ3B0ID0gQm9vbGVhbihib2R5LnVzZUdQVCk7XG4gIGNvbnN0IHByb2dyYW1JZCA9IGJvZHkucHJvZ3JhbUlkID8/IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gIFxuICAvLyBEZXJpdmUgYXV0aGVudGljYXRlZCB1c2VyIG9uIHRoZSBzZXJ2ZXI7IHByZWZlciBjb29raWVzIGJ1dCBhbHNvIHN1cHBvcnQgQXV0aG9yaXphdGlvbjogQmVhcmVyIDx0b2tlbj5cbiAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gIGxldCB1c2VyOiBhbnkgPSBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGhDbGllbnQgPSBjcmVhdGVTZXJ2ZXJDbGllbnQoXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgICAge1xuICAgICAgICBjb29raWVzOiB7XG4gICAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGNvb2tpZVN0b3JlLmdldChuYW1lKT8udmFsdWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zOiBhbnkpIHtcbiAgICAgICAgICAgIGNvb2tpZVN0b3JlLnNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZW1vdmUobmFtZTogc3RyaW5nLCBvcHRpb25zOiBhbnkpIHtcbiAgICAgICAgICAgIGNvb2tpZVN0b3JlLnNldChuYW1lLCAnJywgeyAuLi5vcHRpb25zLCBtYXhBZ2U6IDAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB7IGRhdGE6IGF1dGggfSA9IGF3YWl0IGF1dGhDbGllbnQuYXV0aC5nZXRVc2VyKCk7XG4gICAgdXNlciA9IGF1dGg/LnVzZXIgPz8gbnVsbDtcbiAgfSBjYXRjaCB7fVxuXG4gIGlmICghdXNlcikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBiZWFyZXIgPSByZXEuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKSA/PyByZXEuaGVhZGVycy5nZXQoJ0F1dGhvcml6YXRpb24nKTtcbiAgICAgIGNvbnN0IHRva2VuID0gYmVhcmVyPy50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJ2JlYXJlciAnKVxuICAgICAgICA/IGJlYXJlci5zbGljZSg3KVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBjb25zdCBkaXJlY3QgPSBjcmVhdGVDbGllbnQoXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gICAgICAgICAgeyBnbG9iYWw6IHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9IH0gYXMgYW55IH1cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhdXRoIH0gPSBhd2FpdCBkaXJlY3QuYXV0aC5nZXRVc2VyKCk7XG4gICAgICAgIHVzZXIgPSBhdXRoPy51c2VyID8/IG51bGw7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuICB9XG5cbiAgaWYgKCF1c2VyKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgbGV0IHByb2dyYW06IFByb2dyYW07XG4gIGlmIChncHQpIHtcbiAgICBwcm9ncmFtID0gYXdhaXQgZ2VuZXJhdGVQcm9ncmFtV2l0aExMTShpbnB1dCwgeyBwcm9ncmFtSWQsIGNpdGF0aW9uczogYm9keS5jaXRhdGlvbnMgPz8gW10sIHVzZXJJZDogdXNlci5pZCB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBiYXNlOiBQcm9ncmFtID0ge1xuICAgICAgcHJvZ3JhbV9pZDogcHJvZ3JhbUlkLFxuICAgICAgbmFtZTogJzEyLXdlZWsgSHlwZXJ0cm9waHkgUHJvZ3JhbScsXG4gICAgICBwYWlkOiBmYWxzZSxcbiAgICAgIHdlZWtzOiBnZW5lcmF0ZUZ1bGxQcm9ncmFtKGlucHV0KSxcbiAgICAgIG1ldGFkYXRhOiB7IGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgc291cmNlOiBbJ3NjaWVuY2UtcmVmcycsICdKZWZmIE5pcHBhcmQnLCAnVE5GJywgJ01pa2UgSXNyYWV0ZWwnXSwgdm9sdW1lX3Byb2ZpbGU6IHt9IH1cbiAgICB9O1xuICAgIHByb2dyYW0gPSBiYXNlO1xuICB9XG4gIC8vIFZhbGlkYXRlIHByb2dyYW0gYWdhaW5zdCBKU09OIHNjaGVtYSBiZWZvcmUgc2F2aW5nXG4gIGNvbnN0IHZhbGlkID0gdmFsaWRhdGVQcm9ncmFtKHByb2dyYW0pO1xuICBpZiAoIXZhbGlkKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHByb2dyYW0gcGF5bG9hZCcsIGRldGFpbHM6IHZhbGlkYXRlUHJvZ3JhbS5lcnJvcnMgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgfVxuXG4gIC8vIFNpbXBsZSBpbi1tZW1vcnkgcmF0ZSBsaW1pdCBwZXIgSVAgcGVyIG1pbnV0ZSAoYmVzdC1lZmZvcnQ7IGZvciBwcm9kdWN0aW9uIHVzZSBVcHN0YXNoIFJlZGlzKVxuICB0cnkge1xuICAgIGNvbnN0IGlwID0gcmVxLmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKSA/PyAndW5rbm93bic7XG4gICAgY29uc3Qga2V5ID0gYGdlbjoke2lwfToke25ldyBEYXRlKCkuZ2V0VVRDTWludXRlcygpfWA7XG4gICAgUmF0ZUxpbWl0U2NoZW1hLnBhcnNlKHsgaXAsIGtleSB9KTtcbiAgICBjb25zdCB7IGlzQWxsb3dlZEFuZENvbnN1bWUgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvcmF0ZS1saW1pdCcpO1xuICAgIGNvbnN0IG9rID0gYXdhaXQgaXNBbGxvd2VkQW5kQ29uc3VtZSh7IGtleSwgbGltaXQ6IDUsIHdpbmRvd1NlY29uZHM6IDYwIH0pO1xuICAgIGlmICghb2spIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnUmF0ZSBsaW1pdCBleGNlZWRlZCcgfSwgeyBzdGF0dXM6IDQyOSB9KTtcbiAgfSBjYXRjaCB7fVxuICBjb25zdCBzdXBhYmFzZSA9IGdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCgpO1xuICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9ncmFtcycpLnVwc2VydCh7IGlkOiBwcm9ncmFtLnByb2dyYW1faWQsIHVzZXJfaWQ6IHVzZXIuaWQsIG5hbWU6IHByb2dyYW0ubmFtZSwgZGF0YTogcHJvZ3JhbSwgcGFpZDogcHJvZ3JhbS5wYWlkID8/IGZhbHNlIH0pO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocHJvZ3JhbSwgeyBzdGF0dXM6IDIwMSB9KTtcbn1cblxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiT25ib2FyZGluZ0lucHV0IiwiZ2VuZXJhdGVGdWxsUHJvZ3JhbSIsImdlbmVyYXRlUHJvZ3JhbVdpdGhMTE0iLCJBanYiLCJhZGRGb3JtYXRzIiwicHJvZ3JhbVNjaGVtYSIsImdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCIsInoiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjcmVhdGVDbGllbnQiLCJjb29raWVzIiwiYWp2IiwiYWxsRXJyb3JzIiwic3RyaWN0IiwidmFsaWRhdGVQcm9ncmFtIiwiY29tcGlsZSIsIlJhdGVMaW1pdFNjaGVtYSIsIm9iamVjdCIsImlwIiwic3RyaW5nIiwibWluIiwia2V5IiwiR0VUIiwicmVxIiwidXJsIiwiVVJMIiwiaWQiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJpbnB1dCIsInBhcnNlIiwiZXhwZXJpZW5jZV9sZXZlbCIsInRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlIiwiZXF1aXBtZW50X2F2YWlsYWJsZSIsImJpZzNfUFJzIiwiYmVuY2giLCJzcXVhdCIsImRlYWRsaWZ0IiwicHJlZmVycmVkX3NwbGl0IiwidW5kZWZpbmVkIiwic2Vzc2lvbl9sZW5ndGhfbWluIiwid2Vla3MiLCJwcm9ncmFtIiwicHJvZ3JhbV9pZCIsIm5hbWUiLCJwYWlkIiwibWV0YWRhdGEiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic291cmNlIiwidm9sdW1lX3Byb2ZpbGUiLCJqc29uIiwic3RhdHVzIiwiUE9TVCIsImJvZHkiLCJncHQiLCJCb29sZWFuIiwidXNlR1BUIiwicHJvZ3JhbUlkIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImNvb2tpZVN0b3JlIiwidXNlciIsImF1dGhDbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJ2YWx1ZSIsInNldCIsIm9wdGlvbnMiLCJyZW1vdmUiLCJtYXhBZ2UiLCJkYXRhIiwiYXV0aCIsImdldFVzZXIiLCJiZWFyZXIiLCJoZWFkZXJzIiwidG9rZW4iLCJ0b0xvd2VyQ2FzZSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImRpcmVjdCIsImdsb2JhbCIsIkF1dGhvcml6YXRpb24iLCJlcnJvciIsImNpdGF0aW9ucyIsInVzZXJJZCIsImJhc2UiLCJ2YWxpZCIsImRldGFpbHMiLCJlcnJvcnMiLCJnZXRVVENNaW51dGVzIiwiaXNBbGxvd2VkQW5kQ29uc3VtZSIsIm9rIiwibGltaXQiLCJ3aW5kb3dTZWNvbmRzIiwic3VwYWJhc2UiLCJmcm9tIiwidXBzZXJ0IiwidXNlcl9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-program/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/program-generator.ts":
/*!**********************************!*\
  !*** ./lib/program-generator.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OnboardingInput: () => (/* binding */ OnboardingInput),\n/* harmony export */   canViewWeek: () => (/* binding */ canViewWeek),\n/* harmony export */   enforceDaysSplit: () => (/* binding */ enforceDaysSplit),\n/* harmony export */   generateDeterministicWeek: () => (/* binding */ generateDeterministicWeek),\n/* harmony export */   generateFullProgram: () => (/* binding */ generateFullProgram),\n/* harmony export */   generateProgramWithLLM: () => (/* binding */ generateProgramWithLLM),\n/* harmony export */   refineWithGPT: () => (/* binding */ refineWithGPT),\n/* harmony export */   saveProgramToSupabase: () => (/* binding */ saveProgramToSupabase)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ajv */ \"(rsc)/./node_modules/ajv/dist/ajv.js\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ajv_formats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ajv-formats */ \"(rsc)/./node_modules/ajv-formats/dist/index.js\");\n/* harmony import */ var ajv_formats__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ajv_formats__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types_program_schema_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types/program.schema.json */ \"(rsc)/./types/program.schema.json\");\n\n\n\n\nconst OnboardingInput = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    age: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional(),\n    sex: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n        \"male\",\n        \"female\"\n    ]).optional(),\n    BW: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional(),\n    experience_level: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n        \"Beginner\",\n        \"Intermediate\",\n        \"Advanced\"\n    ]),\n    training_frequency_preference: zod__WEBPACK_IMPORTED_MODULE_3__.number().int().min(2).max(6),\n    equipment_available: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string()).default([]),\n    goals: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string()).default([\n        \"hypertrophy\"\n    ]),\n    big3_PRs: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        bench: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional(),\n        squat: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional(),\n        deadlift: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional()\n    }),\n    injuries: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string()).default([]),\n    movement_preferences: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string()).default([]),\n    preferred_split: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n        \"Push/Pull/Legs\",\n        \"Upper/Lower\",\n        \"Full body\",\n        \"Custom\"\n    ]).optional(),\n    focus_point: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n        \"Arms\",\n        \"Chest\",\n        \"Back\",\n        \"Quads\",\n        \"Glutes\",\n        \"Delts\"\n    ]).optional(),\n    session_length_min: zod__WEBPACK_IMPORTED_MODULE_3__.number().int().min(30).max(120).default(60),\n    rest_pref: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n        \"auto\",\n        \"custom\"\n    ]).default(\"auto\"),\n    nutrition: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n        \"deficit\",\n        \"surplus\",\n        \"maintenance\"\n    ]).default(\"maintenance\")\n});\nconst ajv = new (ajv__WEBPACK_IMPORTED_MODULE_0___default())({\n    allErrors: true,\n    strict: false\n});\najv_formats__WEBPACK_IMPORTED_MODULE_1___default()(ajv);\nconst validateProgram = ajv.compile(_types_program_schema_json__WEBPACK_IMPORTED_MODULE_2__);\nfunction coerceProgramId(p, programId) {\n    if (!p || typeof p !== \"object\") return p;\n    p.program_id = programId;\n    return p;\n}\nfunction ensureMetadata(p) {\n    const created = new Date().toISOString();\n    const defaults = {\n        created_at: created,\n        source: [\n            \"Schoenfeld et al.\",\n            \"Nuckols\",\n            \"Jeff Nippard\",\n            \"Mike Israetel\"\n        ],\n        volume_profile: {}\n    };\n    p.metadata = {\n        ...defaults,\n        ...p.metadata ?? {}\n    };\n    p.paid = Boolean(p.paid ?? false);\n    return p;\n}\nfunction toProgramOrThrow(p) {\n    const ok = validateProgram(p);\n    if (!ok) {\n        const errs = JSON.stringify(validateProgram.errors ?? []);\n        throw new Error(`Program failed schema validation: ${errs}`);\n    }\n    return p;\n}\nasync function repairWithModel(raw, errors) {\n    if (!process.env.OPENAI_API_KEY) return null;\n    try {\n        const { OpenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node\"), __webpack_require__.e(\"vendor-chunks/openai\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/humanize-ms\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const client = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n        const response = await client.chat.completions.create({\n            model: \"gpt-4o\",\n            temperature: 0.1,\n            response_format: {\n                type: \"json_object\"\n            },\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You return strictly valid JSON matching the provided schema. No prose.\"\n                },\n                {\n                    role: \"user\",\n                    content: `Fix this program JSON to pass the schema. Only return corrected JSON.\\nErrors:\\n${JSON.stringify(errors)}\\nJSON:\\n${raw}`\n                }\n            ]\n        });\n        const text = response.choices?.[0]?.message?.content;\n        return text ?? null;\n    } catch  {\n        return null;\n    }\n}\nfunction buildUserProfile(input) {\n    const goals = (input.goals ?? []).join(\", \");\n    const eq = (input.equipment_available ?? []).join(\", \");\n    const prefs = (input.movement_preferences ?? []).join(\", \");\n    const inj = (input.injuries ?? []).join(\", \");\n    const pr = input.big3_PRs ?? {};\n    const focus = input.focus_point ? `Focus: ${input.focus_point}.` : \"\";\n    return [\n        `Experience: ${input.experience_level}.`,\n        `Training days/week: ${input.training_frequency_preference}.`,\n        `Session length: ${input.session_length_min} min.`,\n        `Goals: ${goals || \"hypertrophy\"}.`,\n        `Equipment: ${eq || \"Gym\"}.`,\n        `Preferred split: ${input.preferred_split ?? \"auto\"}.`,\n        `Rest preference: ${input.rest_pref}.`,\n        `Nutrition: ${input.nutrition}.`,\n        `PRs (lbs): bench=${pr.bench ?? \"n/a\"}, squat=${pr.squat ?? \"n/a\"}, deadlift=${pr.deadlift ?? \"n/a\"}.`,\n        `Injuries: ${inj || \"none\"}.`,\n        `Movement prefs: ${prefs || \"none\"}.`,\n        focus\n    ].join(\" \");\n}\nconst systemPrompt = `\nYou are an evidence-based strength coach. Generate a 12-week program as strict JSON conforming to the given schema fields and constraints below. Return JSON only.\n\nConstraints (must follow):\n- 12 weeks total; each week has 2–6 days based on user.training_frequency_preference.\n- Exercise ordering: compounds first, then compound variations, then accessories.\n- Weekly effective sets per muscle by experience:\n  Beginner: 10–14; Intermediate: 14–18; Advanced: 18–26. Stay within ranges.\n- Rep ranges: main lifts 6–12 (emphasis 8–12); accessories 8–20.\n- Deload: 3:1 accumulation-to-deload cycle. Deload week reduces sets (~40%) and intensity.\n  - RPE range 5–10. Sets 1–8. Intensity_pct 0.4–0.9 when applicable.\n  - Rest_seconds rules (strict):\n    • Main compound lifts (e.g., Barbell Bench Press, Barbell Back Squat, Standing Overhead Press, Conventional Deadlift) use 180 seconds.\n    • Accessories use 120–180 seconds (prefer 120).\n  - Session length dictates number of exercises per day (strict): 30 min → 4, 45 min → 5, 60 min → 6, 90 min → 7.\n- Tailor exercise selection to equipment, injuries, and movement prefs. Prefer barbell/dumbbell/cable basics; avoid risky variants where injuries conflict.\n- Personalize split based on days/week: 2=Full Body; 3=Upper/Lower/Full; 4=Upper/Lower/Upper/Lower; 5=Push/Pull/Legs/Upper/Lower; 6=Push/Pull/Legs/Upper/Lower/Focus.\n- Provide notes sparingly for technique/progression. Use consistent tempo strings and RPE guidance.\n- Populate metadata.created_at, metadata.source (strings, e.g., research/authors), metadata.volume_profile (per muscle weekly set counts as integers).\n\nMethodology:\n- Ground decisions in modern hypertrophy literature (e.g., Schoenfeld volume recommendations, progressive overload, MRV, MEV) and popular science-based creators (Jeff Nippard style periodization, autoregulated RPE).\n- Ensure progressive overload across accumulation weeks; then deload. Keep intensity and volume realistic for user's experience.\n\nOutput must exactly match keys and types in the program schema:\n- program_id (string), name (string), paid (boolean), weeks [{week_number, days: [{day_number, focus, exercises: [{id, name, sets, reps, rpe, tempo, rest_seconds, intensity_pct?}], notes?}]}], metadata { created_at, source[], volume_profile{} }.\n`;\n// Helpers for session constraints and content hygiene\nconst CORE_EXERCISES = [\n    \"Cable Crunch\",\n    \"Hanging Leg Raise\"\n];\nfunction isCoreExercise(name) {\n    return /cable\\s+crunch|hanging\\s+leg\\s+raise/i.test(name);\n}\nfunction isMainCompound(name) {\n    return /barbell\\s+bench\\s+press|barbell\\s+back\\s+squat|standing\\s+overhead\\s+press|conventional\\s+deadlift|conventional\\s+deadlift|romanian\\s+deadlift|front\\s+squat/i.test(name);\n}\nfunction slugifyId(name) {\n    return name.toLowerCase().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)/g, \"\").slice(0, 16);\n}\nfunction buildAccessory(name) {\n    return {\n        id: `${slugifyId(name)}-${Math.random().toString(36).slice(2, 6)}`,\n        name,\n        sets: 2,\n        reps: \"10-15\",\n        rpe: 8,\n        tempo: \"2-0-1\",\n        rest_seconds: 120\n    };\n}\nfunction getEquipmentMode(input) {\n    const first = (input.equipment_available ?? [])[0]?.toLowerCase() ?? \"\";\n    if (/dumbbell/.test(first)) return \"dumbbells\";\n    if (/barbell/.test(first)) return \"barbell\";\n    // default to gym if unspecified\n    return \"gym\";\n}\nfunction normalizeNameForEquipment(originalName, mode) {\n    // In commercial gym, prefer machine-supported row over barbell row for safety/consistency\n    if (mode === \"gym\" && /barbell\\s+row/i.test(originalName)) return \"Chest-Supported Row\";\n    return originalName;\n}\nfunction substituteExerciseForEquipment(name, mode) {\n    const n = name.toLowerCase();\n    if (mode === \"dumbbells\") {\n        if (/barbell\\s+back\\s+squat/.test(n)) return \"Bulgarian Split Squat\";\n        if (/front\\s+squat/.test(n)) return \"Goblet Squat\";\n        if (/conventional\\s+deadlift/.test(n)) return \"Dumbbell Romanian Deadlift\";\n        if (/romanian\\s+deadlift/.test(n)) return \"Dumbbell Romanian Deadlift\";\n        if (/bench\\s+press/.test(n)) return \"Dumbbell Bench Press\";\n        if (/standing\\s+overhead\\s+press/.test(n)) return \"Seated Dumbbell Shoulder Press\";\n        if (/lat\\s+pulldown/.test(n)) return \"One-Arm Dumbbell Row\";\n        if (/leg\\s+press/.test(n)) return \"Bulgarian Split Squat\";\n        if (/(lying\\s+)?leg\\s+curl/.test(n)) return \"Single-Leg Dumbbell Romanian Deadlift\";\n        if (/leg\\s+extension/.test(n)) return \"Lunges\";\n        if (/seated\\s+calf\\s+raise/.test(n)) return \"Standing Calf Raise\";\n        if (/cable\\s+triceps\\s+pushdown/.test(n)) return \"Overhead Dumbbell Triceps Extension\";\n        if (/overhead\\s+triceps\\s+extension/.test(n)) return \"Overhead Dumbbell Triceps Extension\";\n        if (/ez\\s+bar\\s+curl/.test(n)) return \"Dumbbell Curl\";\n        if (/cable\\s+flye/.test(n)) return \"Dumbbell Flye\";\n        if (/cable\\s+lateral\\s+raise/.test(n)) return \"Lateral Raise\";\n        if (/face\\s+pull/.test(n)) return \"Rear Delt Flye\";\n        if (/cable\\s+crunch/.test(n)) return \"Dumbbell Crunch\";\n        // generic cable/machine fallbacks\n        if (/cable|machine|smith/.test(n)) return \"Dumbbell Curl\";\n        if (/row\\b/.test(n) && !/dumbbell/.test(n)) return \"One-Arm Dumbbell Row\";\n        if (/press\\b/.test(n) && !/dumbbell/.test(n)) return \"Dumbbell Bench Press\";\n    }\n    if (mode === \"barbell\") {\n        if (/incline\\s+dumbbell\\s+press/.test(n)) return \"Incline Barbell Bench Press\";\n        if (/dumbbell\\s+bench\\s+press/.test(n)) return \"Barbell Bench Press\";\n        if (/seated\\s+dumbbell\\s+shoulder\\s+press/.test(n)) return \"Standing Overhead Press\";\n        if (/lat\\s+pulldown/.test(n)) return \"Barbell Row\";\n        if (/chest\\-supported\\s+row/.test(n)) return \"Barbell Row\";\n        if (/face\\s+pull/.test(n)) return \"Barbell Row\";\n        if (/cable\\s+flye/.test(n)) return \"Close-Grip Bench Press\";\n        if (/cable\\s+triceps\\s+pushdown/.test(n)) return \"Lying Barbell Triceps Extension\";\n        if (/lateral\\s+raise/.test(n)) return \"Standing Overhead Press\";\n        if (/leg\\s+press/.test(n)) return \"Barbell Lunge\";\n        if (/lying\\s+leg\\s+curl/.test(n)) return \"Romanian Deadlift\";\n        if (/seated\\s+calf\\s+raise/.test(n)) return \"Standing Calf Raise\";\n        if (/cable\\s+crunch/.test(n)) return \"Plank\";\n        if (/dumbbell/.test(n)) return name.replace(/dumbbell/gi, \"Barbell\");\n        if (/machine|smith/.test(n)) return \"Barbell Row\";\n    }\n    return name;\n}\nfunction equipmentCoreExercises(mode) {\n    if (mode === \"dumbbells\") return [\n        \"Dumbbell Crunch\",\n        \"Plank\"\n    ];\n    if (mode === \"barbell\") return [\n        \"Hanging Leg Raise\",\n        \"Plank\"\n    ];\n    return CORE_EXERCISES;\n}\nfunction accessoryPoolForFocus(focus) {\n    const upperPool = [\n        \"Face Pull\",\n        \"Lateral Raise\",\n        \"Incline Dumbbell Curl\",\n        \"Hammer Curl\",\n        \"Overhead Triceps Extension\",\n        \"Cable Triceps Pushdown\",\n        \"Chest-Supported Row\",\n        \"Dumbbell Bench Press\"\n    ];\n    const lowerPool = [\n        \"Leg Extension\",\n        \"Lying Leg Curl\",\n        \"Seated Calf Raise\",\n        \"Standing Calf Raise\",\n        \"Hip Thrust\",\n        \"Bulgarian Split Squat\",\n        \"Walking Lunge\",\n        \"Leg Press\"\n    ];\n    const pullPool = [\n        \"Face Pull\",\n        \"Rear Delt Flye\",\n        \"Chest-Supported Row\",\n        \"Hammer Curl\"\n    ];\n    const pushPool = [\n        \"Lateral Raise\",\n        \"Cable Flye\",\n        \"Overhead Triceps Extension\",\n        \"Cable Triceps Pushdown\"\n    ];\n    const legsPool = lowerPool;\n    const fullPool = Array.from(new Set([\n        ...upperPool,\n        ...lowerPool\n    ]));\n    const f = (focus || \"\").toLowerCase();\n    const removeLateralRaises = (arr)=>arr.filter((n)=>!/\\blateral\\s+raise\\b/i.test(n));\n    if (f.includes(\"upper\") || f.includes(\"pull\")) return removeLateralRaises(Array.from(new Set([\n        ...upperPool,\n        ...pullPool\n    ])));\n    if (f.includes(\"push\")) return pushPool;\n    if (f.includes(\"lower\") || f.includes(\"leg\")) return legsPool;\n    return fullPool;\n}\nfunction pickCoreDayIndices(totalDays) {\n    if (totalDays <= 0) return [];\n    if (totalDays === 1) return [\n        0\n    ];\n    const first = 0;\n    let second = Math.floor(totalDays / 2);\n    if (second === first) second = Math.min(totalDays - 1, first + 1);\n    return [\n        first,\n        second\n    ];\n}\nfunction enforceCoreForDay(exs, desiredCoreName) {\n    // Remove all existing core moves first\n    const nonCore = exs.filter((e)=>!isCoreExercise(e.name));\n    if (!desiredCoreName) return nonCore;\n    // Ensure exactly one core exercise with specified name\n    const coreEx = buildAccessory(desiredCoreName);\n    coreEx.rest_seconds = 120;\n    return [\n        ...nonCore,\n        coreEx\n    ];\n}\nfunction dedupeByNamePreserveOrder(exs, mode) {\n    const seen = new Set();\n    const out = [];\n    for (const ex of exs){\n        // Normalize aliases by equipment context\n        const normalizedName = normalizeNameForEquipment(ex.name, mode);\n        const key = normalizedName.trim().toLowerCase();\n        if (seen.has(key)) continue;\n        seen.add(key);\n        out.push({\n            ...ex,\n            name: normalizedName\n        });\n    }\n    return out;\n}\nfunction ensureNoCalfRaiseConflict(exs) {\n    const isStanding = (n)=>/standing\\s+calf\\s+raise/i.test(n);\n    const isSeated = (n)=>/seated\\s+calf\\s+raise/i.test(n);\n    let standingIndex = -1;\n    let seatedIndex = -1;\n    exs.forEach((e, i)=>{\n        const name = e.name ?? \"\";\n        if (standingIndex === -1 && isStanding(name)) standingIndex = i;\n        if (seatedIndex === -1 && isSeated(name)) seatedIndex = i;\n    });\n    if (standingIndex >= 0 && seatedIndex >= 0) {\n        const removeIndex = Math.max(standingIndex, seatedIndex);\n        return exs.filter((_, i)=>i !== removeIndex);\n    }\n    return exs;\n}\nfunction fillAccessoriesToCount(exs, desiredCount, focus) {\n    if (exs.length >= desiredCount) return exs;\n    const names = new Set(exs.map((e)=>e.name.toLowerCase()));\n    const pool = accessoryPoolForFocus(focus);\n    for (const name of pool){\n        if (exs.length >= desiredCount) break;\n        if (names.has(name.toLowerCase()) || isCoreExercise(name)) continue;\n        exs.push(buildAccessory(name));\n        names.add(name.toLowerCase());\n    }\n    // If still short, add generic but unique numbered cable crunch variants avoiding duplicates (treated as accessories)\n    while(exs.length < desiredCount){\n        const f = (focus || \"\").toLowerCase();\n        const fallbackName = f.includes(\"pull\") ? \"Chest-Supported Row\" : f.includes(\"push\") ? \"Cable Flye\" : f.includes(\"leg\") ? \"Leg Extension\" : \"Dumbbell Curl\";\n        const filler = buildAccessory(fallbackName);\n        if (!exs.some((e)=>e.name.toLowerCase() === filler.name.toLowerCase())) exs.push(filler);\n        else exs.push(buildAccessory(\"Hammer Curl\"));\n    }\n    return exs;\n}\nfunction trimRespectingCoreAndCompound(exs, desiredCount) {\n    if (exs.length <= desiredCount) return exs;\n    const coreIndex = exs.findIndex((e)=>isCoreExercise(e.name));\n    const mainCompoundIndex = exs.findIndex((e)=>isMainCompound(e.name));\n    const keepSet = new Set();\n    if (coreIndex >= 0) keepSet.add(coreIndex);\n    if (mainCompoundIndex >= 0) keepSet.add(mainCompoundIndex);\n    const out = [];\n    for(let i = 0; i < exs.length; i++){\n        out.push(exs[i]);\n    }\n    // remove from end while respecting keepSet\n    while(out.length > desiredCount){\n        const idx = out.length - 1;\n        if (keepSet.has(idx)) {\n            // find next removable from end\n            let j = idx - 1;\n            while(j >= 0 && keepSet.has(j))j--;\n            if (j >= 0) out.splice(j, 1);\n            else break;\n        } else {\n            out.pop();\n        }\n    }\n    return out;\n}\nfunction desiredExerciseCount(sessionMinutes) {\n    if (!sessionMinutes) return 6;\n    return sessionMinutes >= 90 ? 7 : sessionMinutes >= 60 ? 6 : sessionMinutes >= 45 ? 5 : 4;\n}\nfunction applySessionConstraints(program, input) {\n    try {\n        const mode = getEquipmentMode(input);\n        const target = desiredExerciseCount(input.session_length_min);\n        const updatedWeeks = (program.weeks ?? []).map((week)=>({\n                ...week,\n                days: (week.days ?? []).map((day, di)=>{\n                    // Normalize rests\n                    let exs = (day.exercises ?? []).map((e)=>({\n                            ...e,\n                            intensity_pct: e.intensity_pct ?? undefined,\n                            rest_seconds: isMainCompound(e.name) ? 180 : Math.max(120, Math.min(180, e.rest_seconds ?? 120))\n                        }));\n                    // Equipment substitutions first\n                    exs = exs.map((e)=>({\n                            ...e,\n                            name: substituteExerciseForEquipment(e.name, mode)\n                        }));\n                    exs = dedupeByNamePreserveOrder(exs, mode);\n                    // Avoid conflicting calf raises within a single session\n                    exs = ensureNoCalfRaiseConflict(exs);\n                    // Core placement: exactly two sessions per week include core (Cable Crunch and Hanging Leg Raise)\n                    const coreDays = pickCoreDayIndices((week.days ?? []).length);\n                    const coreNames = equipmentCoreExercises(mode);\n                    const desiredCoreName = coreDays.includes(di) ? coreNames[coreDays.indexOf(di)] : null;\n                    exs = enforceCoreForDay(exs, desiredCoreName);\n                    exs = fillAccessoriesToCount(exs, target, day.focus ?? \"\");\n                    // Re-run equipment substitutions for any newly added accessories\n                    exs = exs.map((e)=>({\n                            ...e,\n                            name: substituteExerciseForEquipment(e.name, mode)\n                        }));\n                    exs = dedupeByNamePreserveOrder(exs, mode);\n                    // Re-apply calf conflict rule after substitutions/fills\n                    exs = ensureNoCalfRaiseConflict(exs);\n                    exs = trimRespectingCoreAndCompound(exs, target);\n                    return {\n                        ...day,\n                        exercises: exs\n                    };\n                })\n            }));\n        return {\n            ...program,\n            weeks: updatedWeeks\n        };\n    } catch  {\n        return program;\n    }\n}\nfunction generateDeterministicWeek(input) {\n    const exp = input.experience_level;\n    const basePct = exp === \"Beginner\" ? 0.65 : exp === \"Intermediate\" ? 0.72 : 0.75;\n    const restCompound = 180; // 3 minutes for main compounds\n    const restAccessory = 120; // default 2 minutes for accessories\n    const bpPct = Math.min(0.8, basePct);\n    const sqPct = Math.min(0.78, basePct);\n    const dlPct = Math.min(0.8, basePct);\n    const twoDay = [\n        {\n            focus: \"Full Body A\",\n            exercises: [\n                {\n                    id: \"sq-01\",\n                    name: \"Barbell Back Squat\",\n                    sets: 4,\n                    reps: \"5-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: sqPct\n                },\n                {\n                    id: \"bp-01\",\n                    name: \"Barbell Bench Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: bpPct\n                },\n                {\n                    id: \"row-01\",\n                    name: \"Chest-Supported Row\",\n                    sets: 3,\n                    reps: \"6-10\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"curl-01\",\n                    name: \"EZ Bar Curl\",\n                    sets: 2,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-01\",\n                    name: \"Overhead Triceps Extension\",\n                    sets: 2,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Full Body B\",\n            exercises: [\n                {\n                    id: \"dl-01\",\n                    name: \"Conventional Deadlift\",\n                    sets: 3,\n                    reps: \"4-6\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 180,\n                    intensity_pct: dlPct\n                },\n                {\n                    id: \"ohp-01\",\n                    name: \"Seated Dumbbell Shoulder Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"legp-01\",\n                    name: \"Leg Press\",\n                    sets: 2,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"calf-01\",\n                    name: \"Seated Calf Raise\",\n                    sets: 2,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const threeDay = [\n        {\n            focus: \"Upper\",\n            exercises: [\n                {\n                    id: \"bp-01\",\n                    name: \"Barbell Bench Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: bpPct\n                },\n                {\n                    id: \"row-01\",\n                    name: \"Chest-Supported Row\",\n                    sets: 4,\n                    reps: \"6-10\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"ohp-01\",\n                    name: \"Seated Dumbbell Shoulder Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"lat-01\",\n                    name: \"Lateral Raise\",\n                    sets: 2,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-01\",\n                    name: \"Overhead Triceps Extension\",\n                    sets: 2,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Lower\",\n            exercises: [\n                {\n                    id: \"sq-01\",\n                    name: \"Barbell Back Squat\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: sqPct\n                },\n                {\n                    id: \"rdl-01\",\n                    name: \"Romanian Deadlift\",\n                    sets: 3,\n                    reps: \"8-10\",\n                    rpe: 8,\n                    tempo: \"3-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"legp-01\",\n                    name: \"Leg Press\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"curl-02\",\n                    name: \"Lying Leg Curl\",\n                    sets: 2,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 90\n                },\n                {\n                    id: \"calf-01\",\n                    name: \"Seated Calf Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Full body\",\n            exercises: [\n                {\n                    id: \"dl-01\",\n                    name: \"Conventional Deadlift\",\n                    sets: 3,\n                    reps: \"4-6\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 180,\n                    intensity_pct: dlPct\n                },\n                {\n                    id: \"incl-01\",\n                    name: \"Incline Dumbbell Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"fsq-01\",\n                    name: \"Front Squat\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"face-01\",\n                    name: \"Face Pull\",\n                    sets: 2,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"abs-01\",\n                    name: \"Cable Crunch\",\n                    sets: 2,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const fourDay = [\n        {\n            focus: \"Upper 1\",\n            exercises: [\n                {\n                    id: \"bp-01\",\n                    name: \"Barbell Bench Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: bpPct\n                },\n                {\n                    id: \"row-01\",\n                    name: \"Chest-Supported Row\",\n                    sets: 4,\n                    reps: \"6-10\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"lat-01\",\n                    name: \"Lateral Raise\",\n                    sets: 2,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-01\",\n                    name: \"Overhead Triceps Extension\",\n                    sets: 2,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Lower 1\",\n            exercises: [\n                {\n                    id: \"sq-01\",\n                    name: \"Barbell Back Squat\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: sqPct\n                },\n                {\n                    id: \"rdl-01\",\n                    name: \"Romanian Deadlift\",\n                    sets: 3,\n                    reps: \"8-10\",\n                    rpe: 8,\n                    tempo: \"3-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"legp-01\",\n                    name: \"Leg Press\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"calf-01\",\n                    name: \"Seated Calf Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Upper 2\",\n            exercises: [\n                {\n                    id: \"ohp-02\",\n                    name: \"Standing Overhead Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"incl-01\",\n                    name: \"Incline Dumbbell Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"curl-01\",\n                    name: \"EZ Bar Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Lower 2\",\n            exercises: [\n                {\n                    id: \"dl-01\",\n                    name: \"Conventional Deadlift\",\n                    sets: 3,\n                    reps: \"4-6\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 180,\n                    intensity_pct: dlPct\n                },\n                {\n                    id: \"fsq-01\",\n                    name: \"Front Squat\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"curl-02\",\n                    name: \"Lying Leg Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 90\n                },\n                {\n                    id: \"abs-01\",\n                    name: \"Cable Crunch\",\n                    sets: 3,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const fiveDay = [\n        {\n            focus: \"Push\",\n            exercises: [\n                {\n                    id: \"bp-01\",\n                    name: \"Barbell Bench Press\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: bpPct\n                },\n                {\n                    id: \"ohp-01\",\n                    name: \"Seated Dumbbell Shoulder Press\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"incl-01\",\n                    name: \"Incline Dumbbell Press\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"lat-01\",\n                    name: \"Lateral Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-01\",\n                    name: \"Overhead Triceps Extension\",\n                    sets: 3,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Pull\",\n            exercises: [\n                {\n                    id: \"row-01\",\n                    name: \"Chest-Supported Row\",\n                    sets: 4,\n                    reps: \"6-10\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"face-01\",\n                    name: \"Face Pull\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"curl-01\",\n                    name: \"EZ Bar Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Legs\",\n            exercises: [\n                {\n                    id: \"sq-01\",\n                    name: \"Barbell Back Squat\",\n                    sets: 4,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: sqPct\n                },\n                {\n                    id: \"rdl-01\",\n                    name: \"Romanian Deadlift\",\n                    sets: 3,\n                    reps: \"8-10\",\n                    rpe: 8,\n                    tempo: \"3-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"legp-01\",\n                    name: \"Leg Press\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"calf-01\",\n                    name: \"Seated Calf Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Upper\",\n            exercises: [\n                {\n                    id: \"bp-02\",\n                    name: \"Close-Grip Bench Press\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound,\n                    intensity_pct: Math.max(0.68, bpPct - 0.03)\n                },\n                {\n                    id: \"ohp-02\",\n                    name: \"Standing Overhead Press\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"pull-01\",\n                    name: \"Lat Pulldown\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"curl-01\",\n                    name: \"EZ Bar Curl\",\n                    sets: 2,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        },\n        {\n            focus: \"Lower\",\n            exercises: [\n                {\n                    id: \"dl-01\",\n                    name: \"Conventional Deadlift\",\n                    sets: 3,\n                    reps: \"4-6\",\n                    rpe: 7,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 180,\n                    intensity_pct: dlPct\n                },\n                {\n                    id: \"fsq-01\",\n                    name: \"Front Squat\",\n                    sets: 3,\n                    reps: \"6-8\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restCompound\n                },\n                {\n                    id: \"curl-02\",\n                    name: \"Lying Leg Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 90\n                },\n                {\n                    id: \"abs-01\",\n                    name: \"Cable Crunch\",\n                    sets: 3,\n                    reps: \"10-15\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const sixDayFocus = input.focus_point ?? \"Arms\";\n    const sixDay = [\n        fiveDay[0],\n        fiveDay[1],\n        fiveDay[2],\n        fourDay[0],\n        fourDay[1],\n        {\n            focus: `Focus — ${sixDayFocus}`,\n            exercises: [\n                {\n                    id: \"row-02\",\n                    name: \"Chest-Supported Row\",\n                    sets: 3,\n                    reps: \"8-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: restAccessory\n                },\n                {\n                    id: \"curl-02\",\n                    name: \"Incline Dumbbell Curl\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"tri-02\",\n                    name: \"Cable Triceps Pushdown\",\n                    sets: 3,\n                    reps: \"10-12\",\n                    rpe: 8,\n                    tempo: \"2-0-1\",\n                    rest_seconds: 60\n                },\n                {\n                    id: \"lat-02\",\n                    name: \"Cable Lateral Raise\",\n                    sets: 3,\n                    reps: \"12-15\",\n                    rpe: 8,\n                    tempo: \"2-1-1\",\n                    rest_seconds: 60\n                }\n            ]\n        }\n    ];\n    const daysPerWeek = input.training_frequency_preference;\n    let selected;\n    if (daysPerWeek === 2) selected = twoDay;\n    else if (daysPerWeek === 3) selected = threeDay;\n    else if (daysPerWeek === 4) selected = fourDay;\n    else if (daysPerWeek === 5) selected = fiveDay;\n    else if (daysPerWeek === 6) selected = sixDay;\n    else selected = threeDay;\n    // Enforce exercise counts per session length: 30→4, 45→5, 60→6, 90→7\n    const desiredCount = desiredExerciseCount(input.session_length_min);\n    return {\n        week_number: 1,\n        days: selected.map((d, i)=>{\n            // Start from template then apply constraints: dedupe, single core, fill unique accessories, trim if needed\n            const mode = getEquipmentMode(input);\n            let exs = d.exercises.map((e)=>({\n                    ...e,\n                    intensity_pct: e.intensity_pct ?? undefined,\n                    rest_seconds: isMainCompound(e.name) ? 180 : 120\n                }));\n            // Equipment substitutions before normalization\n            exs = exs.map((e)=>({\n                    ...e,\n                    name: substituteExerciseForEquipment(e.name, mode)\n                }));\n            exs = dedupeByNamePreserveOrder(exs, mode);\n            // Align initial week with the same two-core-day policy (equipment-aware)\n            const coreDays = pickCoreDayIndices(selected.length);\n            const coreNames = equipmentCoreExercises(mode);\n            const desiredCoreName = coreDays.includes(i) ? coreNames[coreDays.indexOf(i)] : null;\n            // Enforce calf raise conflict rule\n            exs = ensureNoCalfRaiseConflict(exs);\n            exs = enforceCoreForDay(exs, desiredCoreName);\n            exs = fillAccessoriesToCount(exs, desiredCount, d.focus);\n            // Re-run equipment substitutions after filling accessories\n            exs = exs.map((e)=>({\n                    ...e,\n                    name: substituteExerciseForEquipment(e.name, mode)\n                }));\n            exs = dedupeByNamePreserveOrder(exs, mode);\n            exs = ensureNoCalfRaiseConflict(exs);\n            exs = trimRespectingCoreAndCompound(exs, desiredCount);\n            return {\n                day_number: i + 1,\n                focus: d.focus,\n                exercises: exs,\n                notes: d.notes\n            };\n        })\n    };\n}\nfunction generateFullProgram(input) {\n    const weeks = [];\n    const daysPerWeek = input.training_frequency_preference;\n    for(let w = 1; w <= 12; w++){\n        const baseWeek = generateDeterministicWeek(input);\n        // Progression: 3-week accumulation, 1-week deload cycle\n        const cyclePos = (w - 1) % 4 + 1; // 1..4\n        const volumeMultiplier = cyclePos === 4 ? 0.6 : 1 + 0.05 * (cyclePos - 1); // 1.0, 1.05, 1.10, 0.6\n        const intensityBump = cyclePos === 4 ? -0.05 : 0.01 * (w - 1); // slight upward trend, deload down\n        const adjustedDays = baseWeek.days.map((day)=>({\n                ...day,\n                exercises: day.exercises.map((ex)=>{\n                    const sets = Math.max(1, Math.round(ex.sets * volumeMultiplier));\n                    const intensity_pct = ex.intensity_pct != null ? Math.max(0.5, Math.min(0.9, ex.intensity_pct + intensityBump)) : undefined;\n                    // Ensure rest rules persist across weeks\n                    const isCompound = /barbell\\s+bench\\s+press|barbell\\s+back\\s+squat|standing\\s+overhead\\s+press|conventional\\s+deadlift/i.test(ex.name);\n                    const rest_seconds = isCompound ? 180 : Math.max(120, Math.min(180, ex.rest_seconds ?? 120));\n                    return {\n                        ...ex,\n                        sets,\n                        intensity_pct,\n                        rest_seconds\n                    };\n                })\n            }));\n        weeks.push({\n            week_number: w,\n            days: adjustedDays\n        });\n    }\n    return weeks;\n}\nfunction enforceDaysSplit(program, input) {\n    try {\n        const desired = generateDeterministicWeek(input);\n        const desiredCount = desired.days.length;\n        const alignedWeeks = (program.weeks ?? []).map((week)=>{\n            const currentDays = week.days ?? [];\n            if (currentDays.length === desiredCount) {\n                // Normalize day_number sequence only; preserve content\n                return {\n                    ...week,\n                    days: currentDays.map((d, i)=>({\n                            ...d,\n                            day_number: i + 1\n                        }))\n                };\n            }\n            if (currentDays.length < desiredCount) {\n                // Pad with empty days using desired day focuses, but do not replace existing content\n                const pads = desired.days.slice(currentDays.length, desiredCount).map((d, i)=>({\n                        day_number: currentDays.length + i + 1,\n                        focus: d.focus,\n                        exercises: d.exercises,\n                        notes: d.notes\n                    }));\n                return {\n                    ...week,\n                    days: [\n                        ...currentDays.map((d, i)=>({\n                                ...d,\n                                day_number: i + 1\n                            })),\n                        ...pads\n                    ]\n                };\n            }\n            // Truncate extra days but keep original content for the retained days\n            const trimmed = currentDays.slice(0, desiredCount).map((d, i)=>({\n                    ...d,\n                    day_number: i + 1\n                }));\n            return {\n                ...week,\n                days: trimmed\n            };\n        });\n        return {\n            ...program,\n            weeks: alignedWeeks\n        };\n    } catch  {\n        return program;\n    }\n}\nasync function refineWithGPT(baseProgram, citations) {\n    if (!process.env.OPENAI_API_KEY) return baseProgram;\n    try {\n        const { OpenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node\"), __webpack_require__.e(\"vendor-chunks/openai\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/humanize-ms\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const client = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n        const prompt = `You are a strength coach. Refine the provided 12-week hypertrophy program JSON by adding microprogression notes, deload adjustments (3:1), and safe swaps respecting injuries/equipment. Return valid JSON only. Citations: ${citations.join(\", \")}`;\n        const response = await client.chat.completions.create({\n            model: \"gpt-4o\",\n            temperature: 0.2,\n            response_format: {\n                type: \"json_object\"\n            },\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"Return JSON only.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                },\n                {\n                    role: \"user\",\n                    content: JSON.stringify(baseProgram)\n                }\n            ]\n        });\n        const text = response.choices?.[0]?.message?.content;\n        if (!text) return baseProgram;\n        const jsonStart = text.indexOf(\"{\");\n        const jsonEnd = text.lastIndexOf(\"}\");\n        if (jsonStart >= 0 && jsonEnd > jsonStart) {\n            const refined = JSON.parse(text.slice(jsonStart, jsonEnd + 1));\n            return refined;\n        }\n    } catch  {\n        return baseProgram;\n    }\n    return baseProgram;\n}\nasync function generateProgramWithLLM(input, opts) {\n    const programId = opts?.programId ?? crypto.randomUUID();\n    if (!process.env.OPENAI_API_KEY) {\n        const weeks = generateFullProgram(input);\n        const fallback = {\n            program_id: programId,\n            user_id: opts?.userId,\n            name: \"12-week Hypertrophy Program\",\n            paid: false,\n            weeks,\n            metadata: {\n                created_at: new Date().toISOString(),\n                source: [\n                    \"science-refs\",\n                    \"Jeff Nippard\",\n                    \"TNF\",\n                    \"Mike Israetel\"\n                ],\n                volume_profile: {},\n                big3_prs: input.big3_PRs ?? {},\n                experience_level: input.experience_level\n            }\n        };\n        return fallback;\n    }\n    try {\n        const { OpenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/formdata-node\"), __webpack_require__.e(\"vendor-chunks/openai\"), __webpack_require__.e(\"vendor-chunks/form-data-encoder\"), __webpack_require__.e(\"vendor-chunks/agentkeepalive\"), __webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/humanize-ms\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const client = new OpenAI({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n        const userProfile = buildUserProfile(input);\n        const citations = opts?.citations ?? [\n            \"Schoenfeld\",\n            \"Nuckols\",\n            \"Jeff Nippard\",\n            \"Mike Israetel\",\n            \"Helms\"\n        ];\n        const response = await client.chat.completions.create({\n            model: \"gpt-4o\",\n            temperature: 0.2,\n            response_format: {\n                type: \"json_object\"\n            },\n            messages: [\n                {\n                    role: \"system\",\n                    content: systemPrompt\n                },\n                {\n                    role: \"user\",\n                    content: `User profile:\\n${userProfile}\\nProgram id: ${programId}\\nCitations to include in metadata.source: ${citations.join(\", \")}`\n                }\n            ]\n        });\n        const text = response.choices?.[0]?.message?.content ?? \"\";\n        const jsonStart = text.indexOf(\"{\");\n        const jsonEnd = text.lastIndexOf(\"}\");\n        if (jsonStart < 0 || jsonEnd <= jsonStart) throw new Error(\"No JSON in response\");\n        const parsed = JSON.parse(text.slice(jsonStart, jsonEnd + 1));\n        let prepared = ensureMetadata(coerceProgramId(parsed, programId));\n        prepared.user_id = opts?.userId;\n        prepared.metadata = {\n            ...prepared.metadata,\n            big3_prs: input.big3_PRs ?? {},\n            experience_level: input.experience_level\n        };\n        prepared = enforceDaysSplit(prepared, input);\n        prepared = applySessionConstraints(prepared, input);\n        try {\n            return toProgramOrThrow(prepared);\n        } catch  {\n            const repaired = await repairWithModel(JSON.stringify(prepared), validateProgram.errors ?? []);\n            if (repaired) {\n                const reparsed = JSON.parse(repaired);\n                let final = ensureMetadata(coerceProgramId(reparsed, programId));\n                final = enforceDaysSplit(final, input);\n                final = applySessionConstraints(final, input);\n                final.metadata = {\n                    ...final.metadata,\n                    big3_prs: input.big3_PRs ?? {},\n                    experience_level: input.experience_level\n                };\n                return toProgramOrThrow(final);\n            }\n            throw new Error(\"Repair failed\");\n        }\n    } catch  {\n        const weeks = generateFullProgram(input);\n        const fallback = {\n            program_id: programId,\n            user_id: opts?.userId,\n            name: \"12-week Hypertrophy Program\",\n            paid: false,\n            weeks,\n            metadata: {\n                created_at: new Date().toISOString(),\n                source: [\n                    \"science-refs\",\n                    \"Jeff Nippard\",\n                    \"TNF\",\n                    \"Mike Israetel\"\n                ],\n                volume_profile: {},\n                big3_prs: input.big3_PRs ?? {},\n                experience_level: input.experience_level\n            }\n        };\n        return fallback;\n    }\n}\nasync function saveProgramToSupabase(program) {\n    // Deprecated: prefer calling code to perform writes using a service client and handle errors\n    throw new Error(\"saveProgramToSupabase is deprecated. Use server route with service client to persist.\");\n}\nfunction canViewWeek(week, paid) {\n    return week <= 1 || paid;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxJQUFJM0gsTUFBTTtBQUNsQjtBQUVPLFNBQVNvTSxZQUFZckUsSUFBWSxFQUFFdkksSUFBYTtJQUNyRCxPQUFPdUksUUFBUSxLQUFLdkk7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXVyYWxpZnQvLi9saWIvcHJvZ3JhbS1nZW5lcmF0b3IudHM/MGJmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCBBanYgZnJvbSAnYWp2JztcbmltcG9ydCBhZGRGb3JtYXRzIGZyb20gJ2Fqdi1mb3JtYXRzJztcbmltcG9ydCBwcm9ncmFtU2NoZW1hIGZyb20gJ0AvdHlwZXMvcHJvZ3JhbS5zY2hlbWEuanNvbic7XG5pbXBvcnQgdHlwZSB7IFByb2dyYW0gfSBmcm9tICdAL3R5cGVzL3Byb2dyYW0nO1xuXG5leHBvcnQgY29uc3QgT25ib2FyZGluZ0lucHV0ID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBhZ2U6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgc2V4OiB6LmVudW0oWydtYWxlJywgJ2ZlbWFsZSddKS5vcHRpb25hbCgpLFxuICBCVzogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBleHBlcmllbmNlX2xldmVsOiB6LmVudW0oWydCZWdpbm5lcicsICdJbnRlcm1lZGlhdGUnLCAnQWR2YW5jZWQnXSksXG4gIHRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlOiB6Lm51bWJlcigpLmludCgpLm1pbigyKS5tYXgoNiksXG4gIGVxdWlwbWVudF9hdmFpbGFibGU6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG4gIGdvYWxzOiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoWydoeXBlcnRyb3BoeSddKSxcbiAgYmlnM19QUnM6IHoub2JqZWN0KHsgYmVuY2g6IHoubnVtYmVyKCkub3B0aW9uYWwoKSwgc3F1YXQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSwgZGVhZGxpZnQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSB9KSxcbiAgaW5qdXJpZXM6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG4gIG1vdmVtZW50X3ByZWZlcmVuY2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoW10pLFxuICBwcmVmZXJyZWRfc3BsaXQ6IHouZW51bShbJ1B1c2gvUHVsbC9MZWdzJywgJ1VwcGVyL0xvd2VyJywgJ0Z1bGwgYm9keScsICdDdXN0b20nXSkub3B0aW9uYWwoKSxcbiAgZm9jdXNfcG9pbnQ6IHouZW51bShbJ0FybXMnLCAnQ2hlc3QnLCAnQmFjaycsICdRdWFkcycsICdHbHV0ZXMnLCAnRGVsdHMnXSkub3B0aW9uYWwoKSxcbiAgc2Vzc2lvbl9sZW5ndGhfbWluOiB6Lm51bWJlcigpLmludCgpLm1pbigzMCkubWF4KDEyMCkuZGVmYXVsdCg2MCksXG4gIHJlc3RfcHJlZjogei5lbnVtKFsnYXV0bycsICdjdXN0b20nXSkuZGVmYXVsdCgnYXV0bycpLFxuICBudXRyaXRpb246IHouZW51bShbJ2RlZmljaXQnLCAnc3VycGx1cycsICdtYWludGVuYW5jZSddKS5kZWZhdWx0KCdtYWludGVuYW5jZScpXG59KTtcblxuZXhwb3J0IHR5cGUgT25ib2FyZGluZ0lucHV0ID0gei5pbmZlcjx0eXBlb2YgT25ib2FyZGluZ0lucHV0PjtcblxudHlwZSBFeGVyY2lzZSA9IHtcbiAgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyBzZXRzOiBudW1iZXI7IHJlcHM6IHN0cmluZzsgcnBlOiBudW1iZXI7IHRlbXBvOiBzdHJpbmc7IHJlc3Rfc2Vjb25kczogbnVtYmVyOyBpbnRlbnNpdHlfcGN0PzogbnVtYmVyO1xufTtcblxuY29uc3QgYWp2ID0gbmV3IEFqdih7IGFsbEVycm9yczogdHJ1ZSwgc3RyaWN0OiBmYWxzZSB9KTtcbmFkZEZvcm1hdHMoYWp2KTtcbmNvbnN0IHZhbGlkYXRlUHJvZ3JhbSA9IGFqdi5jb21waWxlKHByb2dyYW1TY2hlbWEgYXMgYW55KTtcblxuZnVuY3Rpb24gY29lcmNlUHJvZ3JhbUlkKHA6IGFueSwgcHJvZ3JhbUlkOiBzdHJpbmcpOiBhbnkge1xuICBpZiAoIXAgfHwgdHlwZW9mIHAgIT09ICdvYmplY3QnKSByZXR1cm4gcDtcbiAgcC5wcm9ncmFtX2lkID0gcHJvZ3JhbUlkO1xuICByZXR1cm4gcDtcbn1cblxuZnVuY3Rpb24gZW5zdXJlTWV0YWRhdGEocDogYW55KTogYW55IHtcbiAgY29uc3QgY3JlYXRlZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgY3JlYXRlZF9hdDogY3JlYXRlZCxcbiAgICBzb3VyY2U6IFsnU2Nob2VuZmVsZCBldCBhbC4nLCAnTnVja29scycsICdKZWZmIE5pcHBhcmQnLCAnTWlrZSBJc3JhZXRlbCddLFxuICAgIHZvbHVtZV9wcm9maWxlOiB7fVxuICB9O1xuICBwLm1ldGFkYXRhID0geyAuLi5kZWZhdWx0cywgLi4uKHAubWV0YWRhdGEgPz8ge30pIH07XG4gIHAucGFpZCA9IEJvb2xlYW4ocC5wYWlkID8/IGZhbHNlKTtcbiAgcmV0dXJuIHA7XG59XG5cbmZ1bmN0aW9uIHRvUHJvZ3JhbU9yVGhyb3cocDogYW55KTogUHJvZ3JhbSB7XG4gIGNvbnN0IG9rID0gdmFsaWRhdGVQcm9ncmFtKHApO1xuICBpZiAoIW9rKSB7XG4gICAgY29uc3QgZXJycyA9IEpTT04uc3RyaW5naWZ5KHZhbGlkYXRlUHJvZ3JhbS5lcnJvcnMgPz8gW10pO1xuICAgIHRocm93IG5ldyBFcnJvcihgUHJvZ3JhbSBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb246ICR7ZXJyc31gKTtcbiAgfVxuICByZXR1cm4gcCBhcyBQcm9ncmFtO1xufVxuXG5hc3luYyBmdW5jdGlvbiByZXBhaXJXaXRoTW9kZWwocmF3OiBzdHJpbmcsIGVycm9yczogYW55W10pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkgcmV0dXJuIG51bGw7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBPcGVuQUkgfSA9IGF3YWl0IGltcG9ydCgnb3BlbmFpJyk7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IE9wZW5BSSh7IGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6ICdncHQtNG8nLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuMSxcbiAgICAgIHJlc3BvbnNlX2Zvcm1hdDogeyB0eXBlOiAnanNvbl9vYmplY3QnIGFzIGFueSB9LFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1lvdSByZXR1cm4gc3RyaWN0bHkgdmFsaWQgSlNPTiBtYXRjaGluZyB0aGUgcHJvdmlkZWQgc2NoZW1hLiBObyBwcm9zZS4nIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBgRml4IHRoaXMgcHJvZ3JhbSBKU09OIHRvIHBhc3MgdGhlIHNjaGVtYS4gT25seSByZXR1cm4gY29ycmVjdGVkIEpTT04uXFxuRXJyb3JzOlxcbiR7SlNPTi5zdHJpbmdpZnkoZXJyb3JzKX1cXG5KU09OOlxcbiR7cmF3fWAgfVxuICAgICAgXVxuICAgIH0gYXMgYW55KTtcbiAgICBjb25zdCB0ZXh0ID0gKHJlc3BvbnNlIGFzIGFueSkuY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50O1xuICAgIHJldHVybiB0ZXh0ID8/IG51bGw7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJ1aWxkVXNlclByb2ZpbGUoaW5wdXQ6IE9uYm9hcmRpbmdJbnB1dCk6IHN0cmluZyB7XG4gIGNvbnN0IGdvYWxzID0gKGlucHV0LmdvYWxzID8/IFtdKS5qb2luKCcsICcpO1xuICBjb25zdCBlcSA9IChpbnB1dC5lcXVpcG1lbnRfYXZhaWxhYmxlID8/IFtdKS5qb2luKCcsICcpO1xuICBjb25zdCBwcmVmcyA9IChpbnB1dC5tb3ZlbWVudF9wcmVmZXJlbmNlcyA/PyBbXSkuam9pbignLCAnKTtcbiAgY29uc3QgaW5qID0gKGlucHV0LmluanVyaWVzID8/IFtdKS5qb2luKCcsICcpO1xuICBjb25zdCBwciA9IGlucHV0LmJpZzNfUFJzID8/IHt9O1xuICBjb25zdCBmb2N1cyA9IGlucHV0LmZvY3VzX3BvaW50ID8gYEZvY3VzOiAke2lucHV0LmZvY3VzX3BvaW50fS5gIDogJyc7XG4gIHJldHVybiBbXG4gICAgYEV4cGVyaWVuY2U6ICR7aW5wdXQuZXhwZXJpZW5jZV9sZXZlbH0uYCxcbiAgICBgVHJhaW5pbmcgZGF5cy93ZWVrOiAke2lucHV0LnRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlfS5gLFxuICAgIGBTZXNzaW9uIGxlbmd0aDogJHtpbnB1dC5zZXNzaW9uX2xlbmd0aF9taW59IG1pbi5gLFxuICAgIGBHb2FsczogJHtnb2FscyB8fCAnaHlwZXJ0cm9waHknfS5gLFxuICAgIGBFcXVpcG1lbnQ6ICR7ZXEgfHwgJ0d5bSd9LmAsXG4gICAgYFByZWZlcnJlZCBzcGxpdDogJHtpbnB1dC5wcmVmZXJyZWRfc3BsaXQgPz8gJ2F1dG8nfS5gLFxuICAgIGBSZXN0IHByZWZlcmVuY2U6ICR7aW5wdXQucmVzdF9wcmVmfS5gLFxuICAgIGBOdXRyaXRpb246ICR7aW5wdXQubnV0cml0aW9ufS5gLFxuICAgIGBQUnMgKGxicyk6IGJlbmNoPSR7KHByIGFzIGFueSkuYmVuY2ggPz8gJ24vYSd9LCBzcXVhdD0keyhwciBhcyBhbnkpLnNxdWF0ID8/ICduL2EnfSwgZGVhZGxpZnQ9JHsocHIgYXMgYW55KS5kZWFkbGlmdCA/PyAnbi9hJ30uYCxcbiAgICBgSW5qdXJpZXM6ICR7aW5qIHx8ICdub25lJ30uYCxcbiAgICBgTW92ZW1lbnQgcHJlZnM6ICR7cHJlZnMgfHwgJ25vbmUnfS5gLFxuICAgIGZvY3VzXG4gIF0uam9pbignICcpO1xufVxuXG5jb25zdCBzeXN0ZW1Qcm9tcHQgPSBgXG5Zb3UgYXJlIGFuIGV2aWRlbmNlLWJhc2VkIHN0cmVuZ3RoIGNvYWNoLiBHZW5lcmF0ZSBhIDEyLXdlZWsgcHJvZ3JhbSBhcyBzdHJpY3QgSlNPTiBjb25mb3JtaW5nIHRvIHRoZSBnaXZlbiBzY2hlbWEgZmllbGRzIGFuZCBjb25zdHJhaW50cyBiZWxvdy4gUmV0dXJuIEpTT04gb25seS5cblxuQ29uc3RyYWludHMgKG11c3QgZm9sbG93KTpcbi0gMTIgd2Vla3MgdG90YWw7IGVhY2ggd2VlayBoYXMgMuKAkzYgZGF5cyBiYXNlZCBvbiB1c2VyLnRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlLlxuLSBFeGVyY2lzZSBvcmRlcmluZzogY29tcG91bmRzIGZpcnN0LCB0aGVuIGNvbXBvdW5kIHZhcmlhdGlvbnMsIHRoZW4gYWNjZXNzb3JpZXMuXG4tIFdlZWtseSBlZmZlY3RpdmUgc2V0cyBwZXIgbXVzY2xlIGJ5IGV4cGVyaWVuY2U6XG4gIEJlZ2lubmVyOiAxMOKAkzE0OyBJbnRlcm1lZGlhdGU6IDE04oCTMTg7IEFkdmFuY2VkOiAxOOKAkzI2LiBTdGF5IHdpdGhpbiByYW5nZXMuXG4tIFJlcCByYW5nZXM6IG1haW4gbGlmdHMgNuKAkzEyIChlbXBoYXNpcyA44oCTMTIpOyBhY2Nlc3NvcmllcyA44oCTMjAuXG4tIERlbG9hZDogMzoxIGFjY3VtdWxhdGlvbi10by1kZWxvYWQgY3ljbGUuIERlbG9hZCB3ZWVrIHJlZHVjZXMgc2V0cyAofjQwJSkgYW5kIGludGVuc2l0eS5cbiAgLSBSUEUgcmFuZ2UgNeKAkzEwLiBTZXRzIDHigJM4LiBJbnRlbnNpdHlfcGN0IDAuNOKAkzAuOSB3aGVuIGFwcGxpY2FibGUuXG4gIC0gUmVzdF9zZWNvbmRzIHJ1bGVzIChzdHJpY3QpOlxuICAgIOKAoiBNYWluIGNvbXBvdW5kIGxpZnRzIChlLmcuLCBCYXJiZWxsIEJlbmNoIFByZXNzLCBCYXJiZWxsIEJhY2sgU3F1YXQsIFN0YW5kaW5nIE92ZXJoZWFkIFByZXNzLCBDb252ZW50aW9uYWwgRGVhZGxpZnQpIHVzZSAxODAgc2Vjb25kcy5cbiAgICDigKIgQWNjZXNzb3JpZXMgdXNlIDEyMOKAkzE4MCBzZWNvbmRzIChwcmVmZXIgMTIwKS5cbiAgLSBTZXNzaW9uIGxlbmd0aCBkaWN0YXRlcyBudW1iZXIgb2YgZXhlcmNpc2VzIHBlciBkYXkgKHN0cmljdCk6IDMwIG1pbiDihpIgNCwgNDUgbWluIOKGkiA1LCA2MCBtaW4g4oaSIDYsIDkwIG1pbiDihpIgNy5cbi0gVGFpbG9yIGV4ZXJjaXNlIHNlbGVjdGlvbiB0byBlcXVpcG1lbnQsIGluanVyaWVzLCBhbmQgbW92ZW1lbnQgcHJlZnMuIFByZWZlciBiYXJiZWxsL2R1bWJiZWxsL2NhYmxlIGJhc2ljczsgYXZvaWQgcmlza3kgdmFyaWFudHMgd2hlcmUgaW5qdXJpZXMgY29uZmxpY3QuXG4tIFBlcnNvbmFsaXplIHNwbGl0IGJhc2VkIG9uIGRheXMvd2VlazogMj1GdWxsIEJvZHk7IDM9VXBwZXIvTG93ZXIvRnVsbDsgND1VcHBlci9Mb3dlci9VcHBlci9Mb3dlcjsgNT1QdXNoL1B1bGwvTGVncy9VcHBlci9Mb3dlcjsgNj1QdXNoL1B1bGwvTGVncy9VcHBlci9Mb3dlci9Gb2N1cy5cbi0gUHJvdmlkZSBub3RlcyBzcGFyaW5nbHkgZm9yIHRlY2huaXF1ZS9wcm9ncmVzc2lvbi4gVXNlIGNvbnNpc3RlbnQgdGVtcG8gc3RyaW5ncyBhbmQgUlBFIGd1aWRhbmNlLlxuLSBQb3B1bGF0ZSBtZXRhZGF0YS5jcmVhdGVkX2F0LCBtZXRhZGF0YS5zb3VyY2UgKHN0cmluZ3MsIGUuZy4sIHJlc2VhcmNoL2F1dGhvcnMpLCBtZXRhZGF0YS52b2x1bWVfcHJvZmlsZSAocGVyIG11c2NsZSB3ZWVrbHkgc2V0IGNvdW50cyBhcyBpbnRlZ2VycykuXG5cbk1ldGhvZG9sb2d5OlxuLSBHcm91bmQgZGVjaXNpb25zIGluIG1vZGVybiBoeXBlcnRyb3BoeSBsaXRlcmF0dXJlIChlLmcuLCBTY2hvZW5mZWxkIHZvbHVtZSByZWNvbW1lbmRhdGlvbnMsIHByb2dyZXNzaXZlIG92ZXJsb2FkLCBNUlYsIE1FVikgYW5kIHBvcHVsYXIgc2NpZW5jZS1iYXNlZCBjcmVhdG9ycyAoSmVmZiBOaXBwYXJkIHN0eWxlIHBlcmlvZGl6YXRpb24sIGF1dG9yZWd1bGF0ZWQgUlBFKS5cbi0gRW5zdXJlIHByb2dyZXNzaXZlIG92ZXJsb2FkIGFjcm9zcyBhY2N1bXVsYXRpb24gd2Vla3M7IHRoZW4gZGVsb2FkLiBLZWVwIGludGVuc2l0eSBhbmQgdm9sdW1lIHJlYWxpc3RpYyBmb3IgdXNlcidzIGV4cGVyaWVuY2UuXG5cbk91dHB1dCBtdXN0IGV4YWN0bHkgbWF0Y2gga2V5cyBhbmQgdHlwZXMgaW4gdGhlIHByb2dyYW0gc2NoZW1hOlxuLSBwcm9ncmFtX2lkIChzdHJpbmcpLCBuYW1lIChzdHJpbmcpLCBwYWlkIChib29sZWFuKSwgd2Vla3MgW3t3ZWVrX251bWJlciwgZGF5czogW3tkYXlfbnVtYmVyLCBmb2N1cywgZXhlcmNpc2VzOiBbe2lkLCBuYW1lLCBzZXRzLCByZXBzLCBycGUsIHRlbXBvLCByZXN0X3NlY29uZHMsIGludGVuc2l0eV9wY3Q/fV0sIG5vdGVzP31dfV0sIG1ldGFkYXRhIHsgY3JlYXRlZF9hdCwgc291cmNlW10sIHZvbHVtZV9wcm9maWxle30gfS5cbmA7XG5cbi8vIEhlbHBlcnMgZm9yIHNlc3Npb24gY29uc3RyYWludHMgYW5kIGNvbnRlbnQgaHlnaWVuZVxuY29uc3QgQ09SRV9FWEVSQ0lTRVMgPSBbJ0NhYmxlIENydW5jaCcsICdIYW5naW5nIExlZyBSYWlzZSddIGFzIGNvbnN0O1xuZnVuY3Rpb24gaXNDb3JlRXhlcmNpc2UobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiAvY2FibGVcXHMrY3J1bmNofGhhbmdpbmdcXHMrbGVnXFxzK3JhaXNlL2kudGVzdChuYW1lKTtcbn1cbmZ1bmN0aW9uIGlzTWFpbkNvbXBvdW5kKG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gL2JhcmJlbGxcXHMrYmVuY2hcXHMrcHJlc3N8YmFyYmVsbFxccytiYWNrXFxzK3NxdWF0fHN0YW5kaW5nXFxzK292ZXJoZWFkXFxzK3ByZXNzfGNvbnZlbnRpb25hbFxccytkZWFkbGlmdHxjb252ZW50aW9uYWxcXHMrZGVhZGxpZnR8cm9tYW5pYW5cXHMrZGVhZGxpZnR8ZnJvbnRcXHMrc3F1YXQvaS50ZXN0KG5hbWUpO1xufVxuZnVuY3Rpb24gc2x1Z2lmeUlkKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXowLTldKy9nLCAnLScpLnJlcGxhY2UoLyheLXwtJCkvZywgJycpLnNsaWNlKDAsIDE2KTtcbn1cbmZ1bmN0aW9uIGJ1aWxkQWNjZXNzb3J5KG5hbWU6IHN0cmluZyk6IEV4ZXJjaXNlIHtcbiAgcmV0dXJuIHsgaWQ6IGAke3NsdWdpZnlJZChuYW1lKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA2KX1gLCBuYW1lLCBzZXRzOiAyLCByZXBzOiAnMTAtMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDEyMCB9IGFzIEV4ZXJjaXNlO1xufVxuXG50eXBlIEVxdWlwbWVudE1vZGUgPSAnZ3ltJyB8ICdkdW1iYmVsbHMnIHwgJ2JhcmJlbGwnO1xuXG5mdW5jdGlvbiBnZXRFcXVpcG1lbnRNb2RlKGlucHV0OiBPbmJvYXJkaW5nSW5wdXQpOiBFcXVpcG1lbnRNb2RlIHtcbiAgY29uc3QgZmlyc3QgPSAoaW5wdXQuZXF1aXBtZW50X2F2YWlsYWJsZSA/PyBbXSlbMF0/LnRvTG93ZXJDYXNlKCkgPz8gJyc7XG4gIGlmICgvZHVtYmJlbGwvLnRlc3QoZmlyc3QpKSByZXR1cm4gJ2R1bWJiZWxscyc7XG4gIGlmICgvYmFyYmVsbC8udGVzdChmaXJzdCkpIHJldHVybiAnYmFyYmVsbCc7XG4gIC8vIGRlZmF1bHQgdG8gZ3ltIGlmIHVuc3BlY2lmaWVkXG4gIHJldHVybiAnZ3ltJztcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZUZvckVxdWlwbWVudChvcmlnaW5hbE5hbWU6IHN0cmluZywgbW9kZTogRXF1aXBtZW50TW9kZSk6IHN0cmluZyB7XG4gIC8vIEluIGNvbW1lcmNpYWwgZ3ltLCBwcmVmZXIgbWFjaGluZS1zdXBwb3J0ZWQgcm93IG92ZXIgYmFyYmVsbCByb3cgZm9yIHNhZmV0eS9jb25zaXN0ZW5jeVxuICBpZiAobW9kZSA9PT0gJ2d5bScgJiYgL2JhcmJlbGxcXHMrcm93L2kudGVzdChvcmlnaW5hbE5hbWUpKSByZXR1cm4gJ0NoZXN0LVN1cHBvcnRlZCBSb3cnO1xuICByZXR1cm4gb3JpZ2luYWxOYW1lO1xufVxuXG5mdW5jdGlvbiBzdWJzdGl0dXRlRXhlcmNpc2VGb3JFcXVpcG1lbnQobmFtZTogc3RyaW5nLCBtb2RlOiBFcXVpcG1lbnRNb2RlKTogc3RyaW5nIHtcbiAgY29uc3QgbiA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKG1vZGUgPT09ICdkdW1iYmVsbHMnKSB7XG4gICAgaWYgKC9iYXJiZWxsXFxzK2JhY2tcXHMrc3F1YXQvLnRlc3QobikpIHJldHVybiAnQnVsZ2FyaWFuIFNwbGl0IFNxdWF0JztcbiAgICBpZiAoL2Zyb250XFxzK3NxdWF0Ly50ZXN0KG4pKSByZXR1cm4gJ0dvYmxldCBTcXVhdCc7XG4gICAgaWYgKC9jb252ZW50aW9uYWxcXHMrZGVhZGxpZnQvLnRlc3QobikpIHJldHVybiAnRHVtYmJlbGwgUm9tYW5pYW4gRGVhZGxpZnQnO1xuICAgIGlmICgvcm9tYW5pYW5cXHMrZGVhZGxpZnQvLnRlc3QobikpIHJldHVybiAnRHVtYmJlbGwgUm9tYW5pYW4gRGVhZGxpZnQnO1xuICAgIGlmICgvYmVuY2hcXHMrcHJlc3MvLnRlc3QobikpIHJldHVybiAnRHVtYmJlbGwgQmVuY2ggUHJlc3MnO1xuICAgIGlmICgvc3RhbmRpbmdcXHMrb3ZlcmhlYWRcXHMrcHJlc3MvLnRlc3QobikpIHJldHVybiAnU2VhdGVkIER1bWJiZWxsIFNob3VsZGVyIFByZXNzJztcbiAgICBpZiAoL2xhdFxccytwdWxsZG93bi8udGVzdChuKSkgcmV0dXJuICdPbmUtQXJtIER1bWJiZWxsIFJvdyc7XG4gICAgaWYgKC9sZWdcXHMrcHJlc3MvLnRlc3QobikpIHJldHVybiAnQnVsZ2FyaWFuIFNwbGl0IFNxdWF0JztcbiAgICBpZiAoLyhseWluZ1xccyspP2xlZ1xccytjdXJsLy50ZXN0KG4pKSByZXR1cm4gJ1NpbmdsZS1MZWcgRHVtYmJlbGwgUm9tYW5pYW4gRGVhZGxpZnQnO1xuICAgIGlmICgvbGVnXFxzK2V4dGVuc2lvbi8udGVzdChuKSkgcmV0dXJuICdMdW5nZXMnO1xuICAgIGlmICgvc2VhdGVkXFxzK2NhbGZcXHMrcmFpc2UvLnRlc3QobikpIHJldHVybiAnU3RhbmRpbmcgQ2FsZiBSYWlzZSc7XG4gICAgaWYgKC9jYWJsZVxccyt0cmljZXBzXFxzK3B1c2hkb3duLy50ZXN0KG4pKSByZXR1cm4gJ092ZXJoZWFkIER1bWJiZWxsIFRyaWNlcHMgRXh0ZW5zaW9uJztcbiAgICBpZiAoL292ZXJoZWFkXFxzK3RyaWNlcHNcXHMrZXh0ZW5zaW9uLy50ZXN0KG4pKSByZXR1cm4gJ092ZXJoZWFkIER1bWJiZWxsIFRyaWNlcHMgRXh0ZW5zaW9uJztcbiAgICBpZiAoL2V6XFxzK2JhclxccytjdXJsLy50ZXN0KG4pKSByZXR1cm4gJ0R1bWJiZWxsIEN1cmwnO1xuICAgIGlmICgvY2FibGVcXHMrZmx5ZS8udGVzdChuKSkgcmV0dXJuICdEdW1iYmVsbCBGbHllJztcbiAgICBpZiAoL2NhYmxlXFxzK2xhdGVyYWxcXHMrcmFpc2UvLnRlc3QobikpIHJldHVybiAnTGF0ZXJhbCBSYWlzZSc7XG4gICAgaWYgKC9mYWNlXFxzK3B1bGwvLnRlc3QobikpIHJldHVybiAnUmVhciBEZWx0IEZseWUnO1xuICAgIGlmICgvY2FibGVcXHMrY3J1bmNoLy50ZXN0KG4pKSByZXR1cm4gJ0R1bWJiZWxsIENydW5jaCc7XG4gICAgLy8gZ2VuZXJpYyBjYWJsZS9tYWNoaW5lIGZhbGxiYWNrc1xuICAgIGlmICgvY2FibGV8bWFjaGluZXxzbWl0aC8udGVzdChuKSkgcmV0dXJuICdEdW1iYmVsbCBDdXJsJztcbiAgICBpZiAoL3Jvd1xcYi8udGVzdChuKSAmJiAhL2R1bWJiZWxsLy50ZXN0KG4pKSByZXR1cm4gJ09uZS1Bcm0gRHVtYmJlbGwgUm93JztcbiAgICBpZiAoL3ByZXNzXFxiLy50ZXN0KG4pICYmICEvZHVtYmJlbGwvLnRlc3QobikpIHJldHVybiAnRHVtYmJlbGwgQmVuY2ggUHJlc3MnO1xuICB9XG4gIGlmIChtb2RlID09PSAnYmFyYmVsbCcpIHtcbiAgICBpZiAoL2luY2xpbmVcXHMrZHVtYmJlbGxcXHMrcHJlc3MvLnRlc3QobikpIHJldHVybiAnSW5jbGluZSBCYXJiZWxsIEJlbmNoIFByZXNzJztcbiAgICBpZiAoL2R1bWJiZWxsXFxzK2JlbmNoXFxzK3ByZXNzLy50ZXN0KG4pKSByZXR1cm4gJ0JhcmJlbGwgQmVuY2ggUHJlc3MnO1xuICAgIGlmICgvc2VhdGVkXFxzK2R1bWJiZWxsXFxzK3Nob3VsZGVyXFxzK3ByZXNzLy50ZXN0KG4pKSByZXR1cm4gJ1N0YW5kaW5nIE92ZXJoZWFkIFByZXNzJztcbiAgICBpZiAoL2xhdFxccytwdWxsZG93bi8udGVzdChuKSkgcmV0dXJuICdCYXJiZWxsIFJvdyc7XG4gICAgaWYgKC9jaGVzdFxcLXN1cHBvcnRlZFxccytyb3cvLnRlc3QobikpIHJldHVybiAnQmFyYmVsbCBSb3cnO1xuICAgIGlmICgvZmFjZVxccytwdWxsLy50ZXN0KG4pKSByZXR1cm4gJ0JhcmJlbGwgUm93JztcbiAgICBpZiAoL2NhYmxlXFxzK2ZseWUvLnRlc3QobikpIHJldHVybiAnQ2xvc2UtR3JpcCBCZW5jaCBQcmVzcyc7XG4gICAgaWYgKC9jYWJsZVxccyt0cmljZXBzXFxzK3B1c2hkb3duLy50ZXN0KG4pKSByZXR1cm4gJ0x5aW5nIEJhcmJlbGwgVHJpY2VwcyBFeHRlbnNpb24nO1xuICAgIGlmICgvbGF0ZXJhbFxccytyYWlzZS8udGVzdChuKSkgcmV0dXJuICdTdGFuZGluZyBPdmVyaGVhZCBQcmVzcyc7XG4gICAgaWYgKC9sZWdcXHMrcHJlc3MvLnRlc3QobikpIHJldHVybiAnQmFyYmVsbCBMdW5nZSc7XG4gICAgaWYgKC9seWluZ1xccytsZWdcXHMrY3VybC8udGVzdChuKSkgcmV0dXJuICdSb21hbmlhbiBEZWFkbGlmdCc7XG4gICAgaWYgKC9zZWF0ZWRcXHMrY2FsZlxccytyYWlzZS8udGVzdChuKSkgcmV0dXJuICdTdGFuZGluZyBDYWxmIFJhaXNlJztcbiAgICBpZiAoL2NhYmxlXFxzK2NydW5jaC8udGVzdChuKSkgcmV0dXJuICdQbGFuayc7XG4gICAgaWYgKC9kdW1iYmVsbC8udGVzdChuKSkgcmV0dXJuIG5hbWUucmVwbGFjZSgvZHVtYmJlbGwvZ2ksICdCYXJiZWxsJyk7XG4gICAgaWYgKC9tYWNoaW5lfHNtaXRoLy50ZXN0KG4pKSByZXR1cm4gJ0JhcmJlbGwgUm93JztcbiAgfVxuICByZXR1cm4gbmFtZTtcbn1cblxuZnVuY3Rpb24gZXF1aXBtZW50Q29yZUV4ZXJjaXNlcyhtb2RlOiBFcXVpcG1lbnRNb2RlKTogcmVhZG9ubHkgW3N0cmluZywgc3RyaW5nXSB7XG4gIGlmIChtb2RlID09PSAnZHVtYmJlbGxzJykgcmV0dXJuIFsnRHVtYmJlbGwgQ3J1bmNoJywgJ1BsYW5rJ10gYXMgY29uc3Q7XG4gIGlmIChtb2RlID09PSAnYmFyYmVsbCcpIHJldHVybiBbJ0hhbmdpbmcgTGVnIFJhaXNlJywgJ1BsYW5rJ10gYXMgY29uc3Q7XG4gIHJldHVybiBDT1JFX0VYRVJDSVNFUztcbn1cbmZ1bmN0aW9uIGFjY2Vzc29yeVBvb2xGb3JGb2N1cyhmb2N1czogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCB1cHBlclBvb2wgPSBbJ0ZhY2UgUHVsbCcsICdMYXRlcmFsIFJhaXNlJywgJ0luY2xpbmUgRHVtYmJlbGwgQ3VybCcsICdIYW1tZXIgQ3VybCcsICdPdmVyaGVhZCBUcmljZXBzIEV4dGVuc2lvbicsICdDYWJsZSBUcmljZXBzIFB1c2hkb3duJywgJ0NoZXN0LVN1cHBvcnRlZCBSb3cnLCAnRHVtYmJlbGwgQmVuY2ggUHJlc3MnXTtcbiAgY29uc3QgbG93ZXJQb29sID0gWydMZWcgRXh0ZW5zaW9uJywgJ0x5aW5nIExlZyBDdXJsJywgJ1NlYXRlZCBDYWxmIFJhaXNlJywgJ1N0YW5kaW5nIENhbGYgUmFpc2UnLCAnSGlwIFRocnVzdCcsICdCdWxnYXJpYW4gU3BsaXQgU3F1YXQnLCAnV2Fsa2luZyBMdW5nZScsICdMZWcgUHJlc3MnXTtcbiAgY29uc3QgcHVsbFBvb2wgPSBbJ0ZhY2UgUHVsbCcsICdSZWFyIERlbHQgRmx5ZScsICdDaGVzdC1TdXBwb3J0ZWQgUm93JywgJ0hhbW1lciBDdXJsJ107XG4gIGNvbnN0IHB1c2hQb29sID0gWydMYXRlcmFsIFJhaXNlJywgJ0NhYmxlIEZseWUnLCAnT3ZlcmhlYWQgVHJpY2VwcyBFeHRlbnNpb24nLCAnQ2FibGUgVHJpY2VwcyBQdXNoZG93biddO1xuICBjb25zdCBsZWdzUG9vbCA9IGxvd2VyUG9vbDtcbiAgY29uc3QgZnVsbFBvb2wgPSBBcnJheS5mcm9tKG5ldyBTZXQoWy4uLnVwcGVyUG9vbCwgLi4ubG93ZXJQb29sXSkpO1xuICBjb25zdCBmID0gKGZvY3VzIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCByZW1vdmVMYXRlcmFsUmFpc2VzID0gKGFycjogc3RyaW5nW10pID0+IGFyci5maWx0ZXIobiA9PiAhL1xcYmxhdGVyYWxcXHMrcmFpc2VcXGIvaS50ZXN0KG4pKTtcbiAgaWYgKGYuaW5jbHVkZXMoJ3VwcGVyJykgfHwgZi5pbmNsdWRlcygncHVsbCcpKSByZXR1cm4gcmVtb3ZlTGF0ZXJhbFJhaXNlcyhBcnJheS5mcm9tKG5ldyBTZXQoWy4uLnVwcGVyUG9vbCwgLi4ucHVsbFBvb2xdKSkpO1xuICBpZiAoZi5pbmNsdWRlcygncHVzaCcpKSByZXR1cm4gcHVzaFBvb2w7XG4gIGlmIChmLmluY2x1ZGVzKCdsb3dlcicpIHx8IGYuaW5jbHVkZXMoJ2xlZycpKSByZXR1cm4gbGVnc1Bvb2w7XG4gIHJldHVybiBmdWxsUG9vbDtcbn1cbmZ1bmN0aW9uIHBpY2tDb3JlRGF5SW5kaWNlcyh0b3RhbERheXM6IG51bWJlcik6IG51bWJlcltdIHtcbiAgaWYgKHRvdGFsRGF5cyA8PSAwKSByZXR1cm4gW107XG4gIGlmICh0b3RhbERheXMgPT09IDEpIHJldHVybiBbMF07XG4gIGNvbnN0IGZpcnN0ID0gMDtcbiAgbGV0IHNlY29uZCA9IE1hdGguZmxvb3IodG90YWxEYXlzIC8gMik7XG4gIGlmIChzZWNvbmQgPT09IGZpcnN0KSBzZWNvbmQgPSBNYXRoLm1pbih0b3RhbERheXMgLSAxLCBmaXJzdCArIDEpO1xuICByZXR1cm4gW2ZpcnN0LCBzZWNvbmRdO1xufVxuXG5mdW5jdGlvbiBlbmZvcmNlQ29yZUZvckRheShleHM6IEV4ZXJjaXNlW10sIGRlc2lyZWRDb3JlTmFtZTogc3RyaW5nIHwgbnVsbCk6IEV4ZXJjaXNlW10ge1xuICAvLyBSZW1vdmUgYWxsIGV4aXN0aW5nIGNvcmUgbW92ZXMgZmlyc3RcbiAgY29uc3Qgbm9uQ29yZTogRXhlcmNpc2VbXSA9IGV4cy5maWx0ZXIoZSA9PiAhaXNDb3JlRXhlcmNpc2UoZS5uYW1lKSk7XG4gIGlmICghZGVzaXJlZENvcmVOYW1lKSByZXR1cm4gbm9uQ29yZTtcbiAgLy8gRW5zdXJlIGV4YWN0bHkgb25lIGNvcmUgZXhlcmNpc2Ugd2l0aCBzcGVjaWZpZWQgbmFtZVxuICBjb25zdCBjb3JlRXggPSBidWlsZEFjY2Vzc29yeShkZXNpcmVkQ29yZU5hbWUpO1xuICBjb3JlRXgucmVzdF9zZWNvbmRzID0gMTIwO1xuICByZXR1cm4gWy4uLm5vbkNvcmUsIGNvcmVFeF07XG59XG5mdW5jdGlvbiBkZWR1cGVCeU5hbWVQcmVzZXJ2ZU9yZGVyKGV4czogRXhlcmNpc2VbXSwgbW9kZTogRXF1aXBtZW50TW9kZSk6IEV4ZXJjaXNlW10ge1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IG91dDogRXhlcmNpc2VbXSA9IFtdO1xuICBmb3IgKGNvbnN0IGV4IG9mIGV4cykge1xuICAgIC8vIE5vcm1hbGl6ZSBhbGlhc2VzIGJ5IGVxdWlwbWVudCBjb250ZXh0XG4gICAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSBub3JtYWxpemVOYW1lRm9yRXF1aXBtZW50KGV4Lm5hbWUsIG1vZGUpO1xuICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZWROYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChzZWVuLmhhcyhrZXkpKSBjb250aW51ZTtcbiAgICBzZWVuLmFkZChrZXkpO1xuICAgIG91dC5wdXNoKHsgLi4uZXgsIG5hbWU6IG5vcm1hbGl6ZWROYW1lIH0pO1xuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIGVuc3VyZU5vQ2FsZlJhaXNlQ29uZmxpY3QoZXhzOiBFeGVyY2lzZVtdKTogRXhlcmNpc2VbXSB7XG4gIGNvbnN0IGlzU3RhbmRpbmcgPSAobjogc3RyaW5nKSA9PiAvc3RhbmRpbmdcXHMrY2FsZlxccytyYWlzZS9pLnRlc3Qobik7XG4gIGNvbnN0IGlzU2VhdGVkID0gKG46IHN0cmluZykgPT4gL3NlYXRlZFxccytjYWxmXFxzK3JhaXNlL2kudGVzdChuKTtcbiAgbGV0IHN0YW5kaW5nSW5kZXggPSAtMTtcbiAgbGV0IHNlYXRlZEluZGV4ID0gLTE7XG4gIGV4cy5mb3JFYWNoKChlLCBpKSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IGUubmFtZSA/PyAnJztcbiAgICBpZiAoc3RhbmRpbmdJbmRleCA9PT0gLTEgJiYgaXNTdGFuZGluZyhuYW1lKSkgc3RhbmRpbmdJbmRleCA9IGk7XG4gICAgaWYgKHNlYXRlZEluZGV4ID09PSAtMSAmJiBpc1NlYXRlZChuYW1lKSkgc2VhdGVkSW5kZXggPSBpO1xuICB9KTtcbiAgaWYgKHN0YW5kaW5nSW5kZXggPj0gMCAmJiBzZWF0ZWRJbmRleCA+PSAwKSB7XG4gICAgY29uc3QgcmVtb3ZlSW5kZXggPSBNYXRoLm1heChzdGFuZGluZ0luZGV4LCBzZWF0ZWRJbmRleCk7XG4gICAgcmV0dXJuIGV4cy5maWx0ZXIoKF8sIGkpID0+IGkgIT09IHJlbW92ZUluZGV4KTtcbiAgfVxuICByZXR1cm4gZXhzO1xufVxuZnVuY3Rpb24gZmlsbEFjY2Vzc29yaWVzVG9Db3VudChleHM6IEV4ZXJjaXNlW10sIGRlc2lyZWRDb3VudDogbnVtYmVyLCBmb2N1czogc3RyaW5nKTogRXhlcmNpc2VbXSB7XG4gIGlmIChleHMubGVuZ3RoID49IGRlc2lyZWRDb3VudCkgcmV0dXJuIGV4cztcbiAgY29uc3QgbmFtZXMgPSBuZXcgU2V0KGV4cy5tYXAoZSA9PiBlLm5hbWUudG9Mb3dlckNhc2UoKSkpO1xuICBjb25zdCBwb29sID0gYWNjZXNzb3J5UG9vbEZvckZvY3VzKGZvY3VzKTtcbiAgZm9yIChjb25zdCBuYW1lIG9mIHBvb2wpIHtcbiAgICBpZiAoZXhzLmxlbmd0aCA+PSBkZXNpcmVkQ291bnQpIGJyZWFrO1xuICAgIGlmIChuYW1lcy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSB8fCBpc0NvcmVFeGVyY2lzZShuYW1lKSkgY29udGludWU7XG4gICAgZXhzLnB1c2goYnVpbGRBY2Nlc3NvcnkobmFtZSkpO1xuICAgIG5hbWVzLmFkZChuYW1lLnRvTG93ZXJDYXNlKCkpO1xuICB9XG4gIC8vIElmIHN0aWxsIHNob3J0LCBhZGQgZ2VuZXJpYyBidXQgdW5pcXVlIG51bWJlcmVkIGNhYmxlIGNydW5jaCB2YXJpYW50cyBhdm9pZGluZyBkdXBsaWNhdGVzICh0cmVhdGVkIGFzIGFjY2Vzc29yaWVzKVxuICB3aGlsZSAoZXhzLmxlbmd0aCA8IGRlc2lyZWRDb3VudCkge1xuICAgIGNvbnN0IGYgPSAoZm9jdXMgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgZmFsbGJhY2tOYW1lID0gZi5pbmNsdWRlcygncHVsbCcpXG4gICAgICA/ICdDaGVzdC1TdXBwb3J0ZWQgUm93J1xuICAgICAgOiBmLmluY2x1ZGVzKCdwdXNoJylcbiAgICAgICAgPyAnQ2FibGUgRmx5ZSdcbiAgICAgICAgOiBmLmluY2x1ZGVzKCdsZWcnKVxuICAgICAgICAgID8gJ0xlZyBFeHRlbnNpb24nXG4gICAgICAgICAgOiAnRHVtYmJlbGwgQ3VybCc7XG4gICAgY29uc3QgZmlsbGVyID0gYnVpbGRBY2Nlc3NvcnkoZmFsbGJhY2tOYW1lKTtcbiAgICBpZiAoIWV4cy5zb21lKGUgPT4gZS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGZpbGxlci5uYW1lLnRvTG93ZXJDYXNlKCkpKSBleHMucHVzaChmaWxsZXIpO1xuICAgIGVsc2UgZXhzLnB1c2goYnVpbGRBY2Nlc3NvcnkoJ0hhbW1lciBDdXJsJykpO1xuICB9XG4gIHJldHVybiBleHM7XG59XG5mdW5jdGlvbiB0cmltUmVzcGVjdGluZ0NvcmVBbmRDb21wb3VuZChleHM6IEV4ZXJjaXNlW10sIGRlc2lyZWRDb3VudDogbnVtYmVyKTogRXhlcmNpc2VbXSB7XG4gIGlmIChleHMubGVuZ3RoIDw9IGRlc2lyZWRDb3VudCkgcmV0dXJuIGV4cztcbiAgY29uc3QgY29yZUluZGV4ID0gZXhzLmZpbmRJbmRleChlID0+IGlzQ29yZUV4ZXJjaXNlKGUubmFtZSkpO1xuICBjb25zdCBtYWluQ29tcG91bmRJbmRleCA9IGV4cy5maW5kSW5kZXgoZSA9PiBpc01haW5Db21wb3VuZChlLm5hbWUpKTtcbiAgY29uc3Qga2VlcFNldCA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICBpZiAoY29yZUluZGV4ID49IDApIGtlZXBTZXQuYWRkKGNvcmVJbmRleCk7XG4gIGlmIChtYWluQ29tcG91bmRJbmRleCA+PSAwKSBrZWVwU2V0LmFkZChtYWluQ29tcG91bmRJbmRleCk7XG4gIGNvbnN0IG91dDogRXhlcmNpc2VbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGV4cy5sZW5ndGg7IGkrKykge1xuICAgIG91dC5wdXNoKGV4c1tpXSk7XG4gIH1cbiAgLy8gcmVtb3ZlIGZyb20gZW5kIHdoaWxlIHJlc3BlY3Rpbmcga2VlcFNldFxuICB3aGlsZSAob3V0Lmxlbmd0aCA+IGRlc2lyZWRDb3VudCkge1xuICAgIGNvbnN0IGlkeCA9IG91dC5sZW5ndGggLSAxO1xuICAgIGlmIChrZWVwU2V0LmhhcyhpZHgpKSB7XG4gICAgICAvLyBmaW5kIG5leHQgcmVtb3ZhYmxlIGZyb20gZW5kXG4gICAgICBsZXQgaiA9IGlkeCAtIDE7XG4gICAgICB3aGlsZSAoaiA+PSAwICYmIGtlZXBTZXQuaGFzKGopKSBqLS07XG4gICAgICBpZiAoaiA+PSAwKSBvdXQuc3BsaWNlKGosIDEpO1xuICAgICAgZWxzZSBicmVhaztcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0LnBvcCgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gZGVzaXJlZEV4ZXJjaXNlQ291bnQoc2Vzc2lvbk1pbnV0ZXM6IG51bWJlciB8IHVuZGVmaW5lZCk6IG51bWJlciB7XG4gIGlmICghc2Vzc2lvbk1pbnV0ZXMpIHJldHVybiA2O1xuICByZXR1cm4gc2Vzc2lvbk1pbnV0ZXMgPj0gOTAgPyA3IDogc2Vzc2lvbk1pbnV0ZXMgPj0gNjAgPyA2IDogc2Vzc2lvbk1pbnV0ZXMgPj0gNDUgPyA1IDogNDtcbn1cbmZ1bmN0aW9uIGFwcGx5U2Vzc2lvbkNvbnN0cmFpbnRzKHByb2dyYW06IFByb2dyYW0sIGlucHV0OiBPbmJvYXJkaW5nSW5wdXQpOiBQcm9ncmFtIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBtb2RlID0gZ2V0RXF1aXBtZW50TW9kZShpbnB1dCk7XG4gICAgY29uc3QgdGFyZ2V0ID0gZGVzaXJlZEV4ZXJjaXNlQ291bnQoaW5wdXQuc2Vzc2lvbl9sZW5ndGhfbWluKTtcbiAgICBjb25zdCB1cGRhdGVkV2Vla3MgPSAocHJvZ3JhbS53ZWVrcyA/PyBbXSkubWFwKHdlZWsgPT4gKHtcbiAgICAgIC4uLndlZWssXG4gICAgICBkYXlzOiAod2Vlay5kYXlzID8/IFtdKS5tYXAoKGRheSwgZGkpID0+IHtcbiAgICAgICAgLy8gTm9ybWFsaXplIHJlc3RzXG4gICAgICAgIGxldCBleHM6IEV4ZXJjaXNlW10gPSAoZGF5LmV4ZXJjaXNlcyA/PyBbXSkubWFwKGUgPT4gKHtcbiAgICAgICAgICAuLi5lLFxuICAgICAgICAgIGludGVuc2l0eV9wY3Q6IGUuaW50ZW5zaXR5X3BjdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgcmVzdF9zZWNvbmRzOiBpc01haW5Db21wb3VuZChlLm5hbWUpID8gMTgwIDogTWF0aC5tYXgoMTIwLCBNYXRoLm1pbigxODAsIGUucmVzdF9zZWNvbmRzID8/IDEyMCkpXG4gICAgICAgIH0gYXMgRXhlcmNpc2UpKTtcbiAgICAgICAgLy8gRXF1aXBtZW50IHN1YnN0aXR1dGlvbnMgZmlyc3RcbiAgICAgICAgZXhzID0gZXhzLm1hcChlID0+ICh7IC4uLmUsIG5hbWU6IHN1YnN0aXR1dGVFeGVyY2lzZUZvckVxdWlwbWVudChlLm5hbWUsIG1vZGUpIH0pKTtcbiAgICAgICAgZXhzID0gZGVkdXBlQnlOYW1lUHJlc2VydmVPcmRlcihleHMsIG1vZGUpO1xuICAgICAgICAvLyBBdm9pZCBjb25mbGljdGluZyBjYWxmIHJhaXNlcyB3aXRoaW4gYSBzaW5nbGUgc2Vzc2lvblxuICAgICAgICBleHMgPSBlbnN1cmVOb0NhbGZSYWlzZUNvbmZsaWN0KGV4cyk7XG4gICAgICAgIC8vIENvcmUgcGxhY2VtZW50OiBleGFjdGx5IHR3byBzZXNzaW9ucyBwZXIgd2VlayBpbmNsdWRlIGNvcmUgKENhYmxlIENydW5jaCBhbmQgSGFuZ2luZyBMZWcgUmFpc2UpXG4gICAgICAgIGNvbnN0IGNvcmVEYXlzID0gcGlja0NvcmVEYXlJbmRpY2VzKCh3ZWVrLmRheXMgPz8gW10pLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGNvcmVOYW1lcyA9IGVxdWlwbWVudENvcmVFeGVyY2lzZXMobW9kZSk7XG4gICAgICAgIGNvbnN0IGRlc2lyZWRDb3JlTmFtZSA9IGNvcmVEYXlzLmluY2x1ZGVzKGRpKSA/IGNvcmVOYW1lc1tjb3JlRGF5cy5pbmRleE9mKGRpKV0gOiBudWxsO1xuICAgICAgICBleHMgPSBlbmZvcmNlQ29yZUZvckRheShleHMsIGRlc2lyZWRDb3JlTmFtZSk7XG4gICAgICAgIGV4cyA9IGZpbGxBY2Nlc3Nvcmllc1RvQ291bnQoZXhzLCB0YXJnZXQsIGRheS5mb2N1cyA/PyAnJyk7XG4gICAgICAgIC8vIFJlLXJ1biBlcXVpcG1lbnQgc3Vic3RpdHV0aW9ucyBmb3IgYW55IG5ld2x5IGFkZGVkIGFjY2Vzc29yaWVzXG4gICAgICAgIGV4cyA9IGV4cy5tYXAoZSA9PiAoeyAuLi5lLCBuYW1lOiBzdWJzdGl0dXRlRXhlcmNpc2VGb3JFcXVpcG1lbnQoZS5uYW1lLCBtb2RlKSB9KSk7XG4gICAgICAgIGV4cyA9IGRlZHVwZUJ5TmFtZVByZXNlcnZlT3JkZXIoZXhzLCBtb2RlKTtcbiAgICAgICAgLy8gUmUtYXBwbHkgY2FsZiBjb25mbGljdCBydWxlIGFmdGVyIHN1YnN0aXR1dGlvbnMvZmlsbHNcbiAgICAgICAgZXhzID0gZW5zdXJlTm9DYWxmUmFpc2VDb25mbGljdChleHMpO1xuICAgICAgICBleHMgPSB0cmltUmVzcGVjdGluZ0NvcmVBbmRDb21wb3VuZChleHMsIHRhcmdldCk7XG4gICAgICAgIHJldHVybiB7IC4uLmRheSwgZXhlcmNpc2VzOiBleHMgfTtcbiAgICAgIH0pXG4gICAgfSkpO1xuICAgIHJldHVybiB7IC4uLnByb2dyYW0sIHdlZWtzOiB1cGRhdGVkV2Vla3MgfTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHByb2dyYW07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRGV0ZXJtaW5pc3RpY1dlZWsoaW5wdXQ6IE9uYm9hcmRpbmdJbnB1dCkge1xuICBjb25zdCBleHAgPSBpbnB1dC5leHBlcmllbmNlX2xldmVsO1xuICBjb25zdCBiYXNlUGN0ID0gZXhwID09PSAnQmVnaW5uZXInID8gMC42NSA6IGV4cCA9PT0gJ0ludGVybWVkaWF0ZScgPyAwLjcyIDogMC43NTtcbiAgY29uc3QgcmVzdENvbXBvdW5kID0gMTgwOyAvLyAzIG1pbnV0ZXMgZm9yIG1haW4gY29tcG91bmRzXG4gIGNvbnN0IHJlc3RBY2Nlc3NvcnkgPSAxMjA7IC8vIGRlZmF1bHQgMiBtaW51dGVzIGZvciBhY2Nlc3Nvcmllc1xuXG4gIGNvbnN0IGJwUGN0ID0gTWF0aC5taW4oMC44LCBiYXNlUGN0KTtcbiAgY29uc3Qgc3FQY3QgPSBNYXRoLm1pbigwLjc4LCBiYXNlUGN0KTtcbiAgY29uc3QgZGxQY3QgPSBNYXRoLm1pbigwLjgsIGJhc2VQY3QpO1xuXG4gIGNvbnN0IHR3b0RheTogeyBmb2N1czogc3RyaW5nOyBleGVyY2lzZXM6IEV4ZXJjaXNlW107IG5vdGVzPzogc3RyaW5nIH1bXSA9IFtcbiAgICB7XG4gICAgICBmb2N1czogJ0Z1bGwgQm9keSBBJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnc3EtMDEnLCBuYW1lOiAnQmFyYmVsbCBCYWNrIFNxdWF0Jywgc2V0czogNCwgcmVwczogJzUtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBzcVBjdCB9LFxuICAgICAgICB7IGlkOiAnYnAtMDEnLCBuYW1lOiAnQmFyYmVsbCBCZW5jaCBQcmVzcycsIHNldHM6IDQsIHJlcHM6ICc2LTgnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCwgaW50ZW5zaXR5X3BjdDogYnBQY3QgfSxcbiAgICAgICAgeyBpZDogJ3Jvdy0wMScsIG5hbWU6ICdDaGVzdC1TdXBwb3J0ZWQgUm93Jywgc2V0czogMywgcmVwczogJzYtMTAnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAnY3VybC0wMScsIG5hbWU6ICdFWiBCYXIgQ3VybCcsIHNldHM6IDIsIHJlcHM6ICcxMC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgICAgeyBpZDogJ3RyaS0wMScsIG5hbWU6ICdPdmVyaGVhZCBUcmljZXBzIEV4dGVuc2lvbicsIHNldHM6IDIsIHJlcHM6ICcxMC0xNScsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIGZvY3VzOiAnRnVsbCBCb2R5IEInLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdkbC0wMScsIG5hbWU6ICdDb252ZW50aW9uYWwgRGVhZGxpZnQnLCBzZXRzOiAzLCByZXBzOiAnNC02JywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiAxODAsIGludGVuc2l0eV9wY3Q6IGRsUGN0IH0sXG4gICAgICAgIHsgaWQ6ICdvaHAtMDEnLCBuYW1lOiAnU2VhdGVkIER1bWJiZWxsIFNob3VsZGVyIFByZXNzJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAncHVsbC0wMScsIG5hbWU6ICdMYXQgUHVsbGRvd24nLCBzZXRzOiAzLCByZXBzOiAnOC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgICAgICB7IGlkOiAnbGVncC0wMScsIG5hbWU6ICdMZWcgUHJlc3MnLCBzZXRzOiAyLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2NhbGYtMDEnLCBuYW1lOiAnU2VhdGVkIENhbGYgUmFpc2UnLCBzZXRzOiAyLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfVxuICBdO1xuXG4gIGNvbnN0IHRocmVlRGF5ID0gW1xuICAgIHtcbiAgICAgIGZvY3VzOiAnVXBwZXInLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdicC0wMScsIG5hbWU6ICdCYXJiZWxsIEJlbmNoIFByZXNzJywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBicFBjdCB9LFxuICAgICAgICB7IGlkOiAncm93LTAxJywgbmFtZTogJ0NoZXN0LVN1cHBvcnRlZCBSb3cnLCBzZXRzOiA0LCByZXBzOiAnNi0xMCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgICAgIHsgaWQ6ICdvaHAtMDEnLCBuYW1lOiAnU2VhdGVkIER1bWJiZWxsIFNob3VsZGVyIFByZXNzJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ3B1bGwtMDEnLCBuYW1lOiAnTGF0IFB1bGxkb3duJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2xhdC0wMScsIG5hbWU6ICdMYXRlcmFsIFJhaXNlJywgc2V0czogMiwgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgICB7IGlkOiAndHJpLTAxJywgbmFtZTogJ092ZXJoZWFkIFRyaWNlcHMgRXh0ZW5zaW9uJywgc2V0czogMiwgcmVwczogJzEwLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdMb3dlcicsXG4gICAgICBleGVyY2lzZXM6IFtcbiAgICAgICAgeyBpZDogJ3NxLTAxJywgbmFtZTogJ0JhcmJlbGwgQmFjayBTcXVhdCcsIHNldHM6IDQsIHJlcHM6ICc2LTgnLCBycGU6IDcsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCwgaW50ZW5zaXR5X3BjdDogc3FQY3QgfSxcbiAgICAgICAgeyBpZDogJ3JkbC0wMScsIG5hbWU6ICdSb21hbmlhbiBEZWFkbGlmdCcsIHNldHM6IDMsIHJlcHM6ICc4LTEwJywgcnBlOiA4LCB0ZW1wbzogJzMtMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ2xlZ3AtMDEnLCBuYW1lOiAnTGVnIFByZXNzJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgICAgIHsgaWQ6ICdjdXJsLTAyJywgbmFtZTogJ0x5aW5nIExlZyBDdXJsJywgc2V0czogMiwgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA5MCB9LFxuICAgICAgICB7IGlkOiAnY2FsZi0wMScsIG5hbWU6ICdTZWF0ZWQgQ2FsZiBSYWlzZScsIHNldHM6IDMsIHJlcHM6ICcxMi0xNScsIHJwZTogOCwgdGVtcG86ICcyLTEtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIGZvY3VzOiAnRnVsbCBib2R5JyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnZGwtMDEnLCBuYW1lOiAnQ29udmVudGlvbmFsIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzQtNicsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogMTgwLCBpbnRlbnNpdHlfcGN0OiBkbFBjdCB9LFxuICAgICAgICB7IGlkOiAnaW5jbC0wMScsIG5hbWU6ICdJbmNsaW5lIER1bWJiZWxsIFByZXNzJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2ZzcS0wMScsIG5hbWU6ICdGcm9udCBTcXVhdCcsIHNldHM6IDMsIHJlcHM6ICc2LTgnLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAnZmFjZS0wMScsIG5hbWU6ICdGYWNlIFB1bGwnLCBzZXRzOiAyLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICAgIHsgaWQ6ICdhYnMtMDEnLCBuYW1lOiAnQ2FibGUgQ3J1bmNoJywgc2V0czogMiwgcmVwczogJzEwLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH1cbiAgXTtcblxuICBjb25zdCBmb3VyRGF5ID0gW1xuICAgIHtcbiAgICAgIGZvY3VzOiAnVXBwZXIgMScsXG4gICAgICBleGVyY2lzZXM6IFtcbiAgICAgICAgeyBpZDogJ2JwLTAxJywgbmFtZTogJ0JhcmJlbGwgQmVuY2ggUHJlc3MnLCBzZXRzOiA0LCByZXBzOiAnNi04JywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQsIGludGVuc2l0eV9wY3Q6IGJwUGN0IH0sXG4gICAgICAgIHsgaWQ6ICdyb3ctMDEnLCBuYW1lOiAnQ2hlc3QtU3VwcG9ydGVkIFJvdycsIHNldHM6IDQsIHJlcHM6ICc2LTEwJywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ2xhdC0wMScsIG5hbWU6ICdMYXRlcmFsIFJhaXNlJywgc2V0czogMiwgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgICB7IGlkOiAndHJpLTAxJywgbmFtZTogJ092ZXJoZWFkIFRyaWNlcHMgRXh0ZW5zaW9uJywgc2V0czogMiwgcmVwczogJzEwLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdMb3dlciAxJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnc3EtMDEnLCBuYW1lOiAnQmFyYmVsbCBCYWNrIFNxdWF0Jywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBzcVBjdCB9LFxuICAgICAgICB7IGlkOiAncmRsLTAxJywgbmFtZTogJ1JvbWFuaWFuIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzgtMTAnLCBycGU6IDgsIHRlbXBvOiAnMy0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RDb21wb3VuZCB9LFxuICAgICAgICB7IGlkOiAnbGVncC0wMScsIG5hbWU6ICdMZWcgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2NhbGYtMDEnLCBuYW1lOiAnU2VhdGVkIENhbGYgUmFpc2UnLCBzZXRzOiAzLCByZXBzOiAnMTItMTUnLCBycGU6IDgsIHRlbXBvOiAnMi0xLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBmb2N1czogJ1VwcGVyIDInLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdvaHAtMDInLCBuYW1lOiAnU3RhbmRpbmcgT3ZlcmhlYWQgUHJlc3MnLCBzZXRzOiA0LCByZXBzOiAnNi04JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ3B1bGwtMDEnLCBuYW1lOiAnTGF0IFB1bGxkb3duJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2luY2wtMDEnLCBuYW1lOiAnSW5jbGluZSBEdW1iYmVsbCBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgICAgIHsgaWQ6ICdjdXJsLTAxJywgbmFtZTogJ0VaIEJhciBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdMb3dlciAyJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnZGwtMDEnLCBuYW1lOiAnQ29udmVudGlvbmFsIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzQtNicsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogMTgwLCBpbnRlbnNpdHlfcGN0OiBkbFBjdCB9LFxuICAgICAgICB7IGlkOiAnZnNxLTAxJywgbmFtZTogJ0Zyb250IFNxdWF0Jywgc2V0czogMywgcmVwczogJzYtOCcsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgICAgIHsgaWQ6ICdjdXJsLTAyJywgbmFtZTogJ0x5aW5nIExlZyBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA5MCB9LFxuICAgICAgICB7IGlkOiAnYWJzLTAxJywgbmFtZTogJ0NhYmxlIENydW5jaCcsIHNldHM6IDMsIHJlcHM6ICcxMC0xNScsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgIF1cbiAgICB9XG4gIF07XG5cbiAgY29uc3QgZml2ZURheSA9IFtcbiAgICB7XG4gICAgICBmb2N1czogJ1B1c2gnLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdicC0wMScsIG5hbWU6ICdCYXJiZWxsIEJlbmNoIFByZXNzJywgc2V0czogNCwgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBicFBjdCB9LFxuICAgICAgICB7IGlkOiAnb2hwLTAxJywgbmFtZTogJ1NlYXRlZCBEdW1iYmVsbCBTaG91bGRlciBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgICAgIHsgaWQ6ICdpbmNsLTAxJywgbmFtZTogJ0luY2xpbmUgRHVtYmJlbGwgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2xhdC0wMScsIG5hbWU6ICdMYXRlcmFsIFJhaXNlJywgc2V0czogMywgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgICB7IGlkOiAndHJpLTAxJywgbmFtZTogJ092ZXJoZWFkIFRyaWNlcHMgRXh0ZW5zaW9uJywgc2V0czogMywgcmVwczogJzEwLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgZm9jdXM6ICdQdWxsJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAncm93LTAxJywgbmFtZTogJ0NoZXN0LVN1cHBvcnRlZCBSb3cnLCBzZXRzOiA0LCByZXBzOiAnNi0xMCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgICAgIHsgaWQ6ICdwdWxsLTAxJywgbmFtZTogJ0xhdCBQdWxsZG93bicsIHNldHM6IDMsIHJlcHM6ICc4LTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0QWNjZXNzb3J5IH0sXG4gICAgICAgIHsgaWQ6ICdmYWNlLTAxJywgbmFtZTogJ0ZhY2UgUHVsbCcsIHNldHM6IDMsIHJlcHM6ICcxMi0xNScsIHJwZTogOCwgdGVtcG86ICcyLTEtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgICAgeyBpZDogJ2N1cmwtMDEnLCBuYW1lOiAnRVogQmFyIEN1cmwnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBmb2N1czogJ0xlZ3MnLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdzcS0wMScsIG5hbWU6ICdCYXJiZWxsIEJhY2sgU3F1YXQnLCBzZXRzOiA0LCByZXBzOiAnNi04JywgcnBlOiA3LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQsIGludGVuc2l0eV9wY3Q6IHNxUGN0IH0sXG4gICAgICAgIHsgaWQ6ICdyZGwtMDEnLCBuYW1lOiAnUm9tYW5pYW4gRGVhZGxpZnQnLCBzZXRzOiAzLCByZXBzOiAnOC0xMCcsIHJwZTogOCwgdGVtcG86ICczLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgICAgIHsgaWQ6ICdsZWdwLTAxJywgbmFtZTogJ0xlZyBQcmVzcycsIHNldHM6IDMsIHJlcHM6ICcxMC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgICAgICB7IGlkOiAnY2FsZi0wMScsIG5hbWU6ICdTZWF0ZWQgQ2FsZiBSYWlzZScsIHNldHM6IDMsIHJlcHM6ICcxMi0xNScsIHJwZTogOCwgdGVtcG86ICcyLTEtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIGZvY3VzOiAnVXBwZXInLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHsgaWQ6ICdicC0wMicsIG5hbWU6ICdDbG9zZS1HcmlwIEJlbmNoIFByZXNzJywgc2V0czogMywgcmVwczogJzYtOCcsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kLCBpbnRlbnNpdHlfcGN0OiBNYXRoLm1heCgwLjY4LCBicFBjdCAtIDAuMDMpIH0sXG4gICAgICAgIHsgaWQ6ICdvaHAtMDInLCBuYW1lOiAnU3RhbmRpbmcgT3ZlcmhlYWQgUHJlc3MnLCBzZXRzOiAzLCByZXBzOiAnNi04JywgcnBlOiA4LCB0ZW1wbzogJzItMC0xJywgcmVzdF9zZWNvbmRzOiByZXN0Q29tcG91bmQgfSxcbiAgICAgICAgeyBpZDogJ3B1bGwtMDEnLCBuYW1lOiAnTGF0IFB1bGxkb3duJywgc2V0czogMywgcmVwczogJzgtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IHJlc3RBY2Nlc3NvcnkgfSxcbiAgICAgICAgeyBpZDogJ2N1cmwtMDEnLCBuYW1lOiAnRVogQmFyIEN1cmwnLCBzZXRzOiAyLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBmb2N1czogJ0xvd2VyJyxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAnZGwtMDEnLCBuYW1lOiAnQ29udmVudGlvbmFsIERlYWRsaWZ0Jywgc2V0czogMywgcmVwczogJzQtNicsIHJwZTogNywgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogMTgwLCBpbnRlbnNpdHlfcGN0OiBkbFBjdCB9LFxuICAgICAgICB7IGlkOiAnZnNxLTAxJywgbmFtZTogJ0Zyb250IFNxdWF0Jywgc2V0czogMywgcmVwczogJzYtOCcsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdENvbXBvdW5kIH0sXG4gICAgICAgIHsgaWQ6ICdjdXJsLTAyJywgbmFtZTogJ0x5aW5nIExlZyBDdXJsJywgc2V0czogMywgcmVwczogJzEwLTEyJywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA5MCB9LFxuICAgICAgICB7IGlkOiAnYWJzLTAxJywgbmFtZTogJ0NhYmxlIENydW5jaCcsIHNldHM6IDMsIHJlcHM6ICcxMC0xNScsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgIF1cbiAgICB9XG4gIF07XG5cbiAgY29uc3Qgc2l4RGF5Rm9jdXMgPSBpbnB1dC5mb2N1c19wb2ludCA/PyAnQXJtcyc7XG4gIGNvbnN0IHNpeERheSA9IFtcbiAgICBmaXZlRGF5WzBdLCAvLyBQdXNoXG4gICAgZml2ZURheVsxXSwgLy8gUHVsbFxuICAgIGZpdmVEYXlbMl0sIC8vIExlZ3NcbiAgICBmb3VyRGF5WzBdLCAvLyBVcHBlciAxXG4gICAgZm91ckRheVsxXSwgLy8gTG93ZXIgMVxuICAgIHtcbiAgICAgIGZvY3VzOiBgRm9jdXMg4oCUICR7c2l4RGF5Rm9jdXN9YCxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7IGlkOiAncm93LTAyJywgbmFtZTogJ0NoZXN0LVN1cHBvcnRlZCBSb3cnLCBzZXRzOiAzLCByZXBzOiAnOC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogcmVzdEFjY2Vzc29yeSB9LFxuICAgICAgICB7IGlkOiAnY3VybC0wMicsIG5hbWU6ICdJbmNsaW5lIER1bWJiZWxsIEN1cmwnLCBzZXRzOiAzLCByZXBzOiAnMTAtMTInLCBycGU6IDgsIHRlbXBvOiAnMi0wLTEnLCByZXN0X3NlY29uZHM6IDYwIH0sXG4gICAgICAgIHsgaWQ6ICd0cmktMDInLCBuYW1lOiAnQ2FibGUgVHJpY2VwcyBQdXNoZG93bicsIHNldHM6IDMsIHJlcHM6ICcxMC0xMicsIHJwZTogOCwgdGVtcG86ICcyLTAtMScsIHJlc3Rfc2Vjb25kczogNjAgfSxcbiAgICAgICAgeyBpZDogJ2xhdC0wMicsIG5hbWU6ICdDYWJsZSBMYXRlcmFsIFJhaXNlJywgc2V0czogMywgcmVwczogJzEyLTE1JywgcnBlOiA4LCB0ZW1wbzogJzItMS0xJywgcmVzdF9zZWNvbmRzOiA2MCB9LFxuICAgICAgXVxuICAgIH1cbiAgXTtcblxuICBjb25zdCBkYXlzUGVyV2VlayA9IGlucHV0LnRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlO1xuICBsZXQgc2VsZWN0ZWQ6IHsgZm9jdXM6IHN0cmluZzsgZXhlcmNpc2VzOiBFeGVyY2lzZVtdOyBub3Rlcz86IHN0cmluZyB9W107XG4gIGlmIChkYXlzUGVyV2VlayA9PT0gMikgc2VsZWN0ZWQgPSB0d29EYXk7XG4gIGVsc2UgaWYgKGRheXNQZXJXZWVrID09PSAzKSBzZWxlY3RlZCA9IHRocmVlRGF5IGFzIGFueTtcbiAgZWxzZSBpZiAoZGF5c1BlcldlZWsgPT09IDQpIHNlbGVjdGVkID0gZm91ckRheSBhcyBhbnk7XG4gIGVsc2UgaWYgKGRheXNQZXJXZWVrID09PSA1KSBzZWxlY3RlZCA9IGZpdmVEYXkgYXMgYW55O1xuICBlbHNlIGlmIChkYXlzUGVyV2VlayA9PT0gNikgc2VsZWN0ZWQgPSBzaXhEYXkgYXMgYW55O1xuICBlbHNlIHNlbGVjdGVkID0gdGhyZWVEYXkgYXMgYW55O1xuXG4gIC8vIEVuZm9yY2UgZXhlcmNpc2UgY291bnRzIHBlciBzZXNzaW9uIGxlbmd0aDogMzDihpI0LCA0NeKGkjUsIDYw4oaSNiwgOTDihpI3XG4gIGNvbnN0IGRlc2lyZWRDb3VudCA9IGRlc2lyZWRFeGVyY2lzZUNvdW50KGlucHV0LnNlc3Npb25fbGVuZ3RoX21pbik7XG5cbiAgcmV0dXJuIHtcbiAgICB3ZWVrX251bWJlcjogMSxcbiAgICBkYXlzOiBzZWxlY3RlZC5tYXAoKGQsIGkpID0+IHtcbiAgICAgIC8vIFN0YXJ0IGZyb20gdGVtcGxhdGUgdGhlbiBhcHBseSBjb25zdHJhaW50czogZGVkdXBlLCBzaW5nbGUgY29yZSwgZmlsbCB1bmlxdWUgYWNjZXNzb3JpZXMsIHRyaW0gaWYgbmVlZGVkXG4gICAgICBjb25zdCBtb2RlID0gZ2V0RXF1aXBtZW50TW9kZShpbnB1dCk7XG4gICAgICBsZXQgZXhzOiBFeGVyY2lzZVtdID0gZC5leGVyY2lzZXMubWFwKGUgPT4gKHsgLi4uZSwgaW50ZW5zaXR5X3BjdDogZS5pbnRlbnNpdHlfcGN0ID8/IHVuZGVmaW5lZCwgcmVzdF9zZWNvbmRzOiBpc01haW5Db21wb3VuZChlLm5hbWUpID8gMTgwIDogMTIwIH0gYXMgRXhlcmNpc2UpKTtcbiAgICAgIC8vIEVxdWlwbWVudCBzdWJzdGl0dXRpb25zIGJlZm9yZSBub3JtYWxpemF0aW9uXG4gICAgICBleHMgPSBleHMubWFwKGUgPT4gKHsgLi4uZSwgbmFtZTogc3Vic3RpdHV0ZUV4ZXJjaXNlRm9yRXF1aXBtZW50KGUubmFtZSwgbW9kZSkgfSkpO1xuICAgICAgZXhzID0gZGVkdXBlQnlOYW1lUHJlc2VydmVPcmRlcihleHMsIG1vZGUpO1xuICAgICAgLy8gQWxpZ24gaW5pdGlhbCB3ZWVrIHdpdGggdGhlIHNhbWUgdHdvLWNvcmUtZGF5IHBvbGljeSAoZXF1aXBtZW50LWF3YXJlKVxuICAgICAgY29uc3QgY29yZURheXMgPSBwaWNrQ29yZURheUluZGljZXMoc2VsZWN0ZWQubGVuZ3RoKTtcbiAgICAgIGNvbnN0IGNvcmVOYW1lcyA9IGVxdWlwbWVudENvcmVFeGVyY2lzZXMobW9kZSk7XG4gICAgICBjb25zdCBkZXNpcmVkQ29yZU5hbWUgPSBjb3JlRGF5cy5pbmNsdWRlcyhpKSA/IGNvcmVOYW1lc1tjb3JlRGF5cy5pbmRleE9mKGkpXSA6IG51bGw7XG4gICAgICAvLyBFbmZvcmNlIGNhbGYgcmFpc2UgY29uZmxpY3QgcnVsZVxuICAgICAgZXhzID0gZW5zdXJlTm9DYWxmUmFpc2VDb25mbGljdChleHMpO1xuICAgICAgZXhzID0gZW5mb3JjZUNvcmVGb3JEYXkoZXhzLCBkZXNpcmVkQ29yZU5hbWUpO1xuICAgICAgZXhzID0gZmlsbEFjY2Vzc29yaWVzVG9Db3VudChleHMsIGRlc2lyZWRDb3VudCwgZC5mb2N1cyk7XG4gICAgICAvLyBSZS1ydW4gZXF1aXBtZW50IHN1YnN0aXR1dGlvbnMgYWZ0ZXIgZmlsbGluZyBhY2Nlc3Nvcmllc1xuICAgICAgZXhzID0gZXhzLm1hcChlID0+ICh7IC4uLmUsIG5hbWU6IHN1YnN0aXR1dGVFeGVyY2lzZUZvckVxdWlwbWVudChlLm5hbWUsIG1vZGUpIH0pKTtcbiAgICAgIGV4cyA9IGRlZHVwZUJ5TmFtZVByZXNlcnZlT3JkZXIoZXhzLCBtb2RlKTtcbiAgICAgIGV4cyA9IGVuc3VyZU5vQ2FsZlJhaXNlQ29uZmxpY3QoZXhzKTtcbiAgICAgIGV4cyA9IHRyaW1SZXNwZWN0aW5nQ29yZUFuZENvbXBvdW5kKGV4cywgZGVzaXJlZENvdW50KTtcbiAgICAgIHJldHVybiB7IGRheV9udW1iZXI6IGkgKyAxLCBmb2N1czogZC5mb2N1cywgZXhlcmNpc2VzOiBleHMsIG5vdGVzOiBkLm5vdGVzIH07XG4gICAgfSlcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRnVsbFByb2dyYW0oaW5wdXQ6IE9uYm9hcmRpbmdJbnB1dCkge1xuICBjb25zdCB3ZWVrcyA9IFtdIGFzIEFycmF5PHsgd2Vla19udW1iZXI6IG51bWJlcjsgZGF5czogYW55W10gfT47XG4gIGNvbnN0IGRheXNQZXJXZWVrID0gaW5wdXQudHJhaW5pbmdfZnJlcXVlbmN5X3ByZWZlcmVuY2U7XG4gIGZvciAobGV0IHcgPSAxOyB3IDw9IDEyOyB3KyspIHtcbiAgICBjb25zdCBiYXNlV2VlayA9IGdlbmVyYXRlRGV0ZXJtaW5pc3RpY1dlZWsoaW5wdXQpO1xuICAgIC8vIFByb2dyZXNzaW9uOiAzLXdlZWsgYWNjdW11bGF0aW9uLCAxLXdlZWsgZGVsb2FkIGN5Y2xlXG4gICAgY29uc3QgY3ljbGVQb3MgPSAoKHcgLSAxKSAlIDQpICsgMTsgLy8gMS4uNFxuICAgIGNvbnN0IHZvbHVtZU11bHRpcGxpZXIgPSBjeWNsZVBvcyA9PT0gNCA/IDAuNiA6IDEgKyAwLjA1ICogKGN5Y2xlUG9zIC0gMSk7IC8vIDEuMCwgMS4wNSwgMS4xMCwgMC42XG4gICAgY29uc3QgaW50ZW5zaXR5QnVtcCA9IGN5Y2xlUG9zID09PSA0ID8gLTAuMDUgOiAwLjAxICogKHcgLSAxKTsgLy8gc2xpZ2h0IHVwd2FyZCB0cmVuZCwgZGVsb2FkIGRvd25cblxuICAgIGNvbnN0IGFkanVzdGVkRGF5cyA9IGJhc2VXZWVrLmRheXMubWFwKGRheSA9PiAoe1xuICAgICAgLi4uZGF5LFxuICAgIGV4ZXJjaXNlczogZGF5LmV4ZXJjaXNlcy5tYXAoZXggPT4ge1xuICAgICAgICBjb25zdCBzZXRzID0gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZChleC5zZXRzICogdm9sdW1lTXVsdGlwbGllcikpO1xuICAgICAgICBjb25zdCBpbnRlbnNpdHlfcGN0ID0gZXguaW50ZW5zaXR5X3BjdCAhPSBudWxsID8gTWF0aC5tYXgoMC41LCBNYXRoLm1pbigwLjksIChleC5pbnRlbnNpdHlfcGN0ICsgaW50ZW5zaXR5QnVtcCkpKSA6IHVuZGVmaW5lZDtcbiAgICAgIC8vIEVuc3VyZSByZXN0IHJ1bGVzIHBlcnNpc3QgYWNyb3NzIHdlZWtzXG4gICAgICBjb25zdCBpc0NvbXBvdW5kID0gL2JhcmJlbGxcXHMrYmVuY2hcXHMrcHJlc3N8YmFyYmVsbFxccytiYWNrXFxzK3NxdWF0fHN0YW5kaW5nXFxzK292ZXJoZWFkXFxzK3ByZXNzfGNvbnZlbnRpb25hbFxccytkZWFkbGlmdC9pLnRlc3QoZXgubmFtZSk7XG4gICAgICBjb25zdCByZXN0X3NlY29uZHMgPSBpc0NvbXBvdW5kID8gMTgwIDogTWF0aC5tYXgoMTIwLCBNYXRoLm1pbigxODAsIGV4LnJlc3Rfc2Vjb25kcyA/PyAxMjApKTtcbiAgICAgIHJldHVybiB7IC4uLmV4LCBzZXRzLCBpbnRlbnNpdHlfcGN0LCByZXN0X3NlY29uZHMgfTtcbiAgICAgIH0pXG4gICAgfSkpO1xuXG4gICAgd2Vla3MucHVzaCh7IHdlZWtfbnVtYmVyOiB3LCBkYXlzOiBhZGp1c3RlZERheXMgfSk7XG4gIH1cbiAgcmV0dXJuIHdlZWtzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5mb3JjZURheXNTcGxpdChwcm9ncmFtOiBQcm9ncmFtLCBpbnB1dDogT25ib2FyZGluZ0lucHV0KTogUHJvZ3JhbSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGVzaXJlZCA9IGdlbmVyYXRlRGV0ZXJtaW5pc3RpY1dlZWsoaW5wdXQpO1xuICAgIGNvbnN0IGRlc2lyZWRDb3VudCA9IGRlc2lyZWQuZGF5cy5sZW5ndGg7XG4gICAgY29uc3QgYWxpZ25lZFdlZWtzID0gKHByb2dyYW0ud2Vla3MgPz8gW10pLm1hcCh3ZWVrID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnREYXlzID0gd2Vlay5kYXlzID8/IFtdO1xuICAgICAgaWYgKGN1cnJlbnREYXlzLmxlbmd0aCA9PT0gZGVzaXJlZENvdW50KSB7XG4gICAgICAgIC8vIE5vcm1hbGl6ZSBkYXlfbnVtYmVyIHNlcXVlbmNlIG9ubHk7IHByZXNlcnZlIGNvbnRlbnRcbiAgICAgICAgcmV0dXJuIHsgLi4ud2VlaywgZGF5czogY3VycmVudERheXMubWFwKChkLCBpKSA9PiAoeyAuLi5kLCBkYXlfbnVtYmVyOiBpICsgMSB9KSkgfTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50RGF5cy5sZW5ndGggPCBkZXNpcmVkQ291bnQpIHtcbiAgICAgICAgLy8gUGFkIHdpdGggZW1wdHkgZGF5cyB1c2luZyBkZXNpcmVkIGRheSBmb2N1c2VzLCBidXQgZG8gbm90IHJlcGxhY2UgZXhpc3RpbmcgY29udGVudFxuICAgICAgICBjb25zdCBwYWRzID0gZGVzaXJlZC5kYXlzLnNsaWNlKGN1cnJlbnREYXlzLmxlbmd0aCwgZGVzaXJlZENvdW50KS5tYXAoKGQsIGkpID0+ICh7XG4gICAgICAgICAgZGF5X251bWJlcjogY3VycmVudERheXMubGVuZ3RoICsgaSArIDEsXG4gICAgICAgICAgZm9jdXM6IGQuZm9jdXMsXG4gICAgICAgICAgZXhlcmNpc2VzOiBkLmV4ZXJjaXNlcyxcbiAgICAgICAgICBub3RlczogZC5ub3Rlc1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB7IC4uLndlZWssIGRheXM6IFsuLi5jdXJyZW50RGF5cy5tYXAoKGQsIGkpID0+ICh7IC4uLmQsIGRheV9udW1iZXI6IGkgKyAxIH0pKSwgLi4ucGFkc10gfTtcbiAgICAgIH1cbiAgICAgIC8vIFRydW5jYXRlIGV4dHJhIGRheXMgYnV0IGtlZXAgb3JpZ2luYWwgY29udGVudCBmb3IgdGhlIHJldGFpbmVkIGRheXNcbiAgICAgIGNvbnN0IHRyaW1tZWQgPSBjdXJyZW50RGF5cy5zbGljZSgwLCBkZXNpcmVkQ291bnQpLm1hcCgoZCwgaSkgPT4gKHsgLi4uZCwgZGF5X251bWJlcjogaSArIDEgfSkpO1xuICAgICAgcmV0dXJuIHsgLi4ud2VlaywgZGF5czogdHJpbW1lZCB9O1xuICAgIH0pO1xuICAgIHJldHVybiB7IC4uLnByb2dyYW0sIHdlZWtzOiBhbGlnbmVkV2Vla3MgfTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHByb2dyYW07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZmluZVdpdGhHUFQoYmFzZVByb2dyYW06IGFueSwgY2l0YXRpb25zOiBzdHJpbmdbXSkge1xuICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSByZXR1cm4gYmFzZVByb2dyYW07XG4gIHRyeSB7XG4gICAgY29uc3QgeyBPcGVuQUkgfSA9IGF3YWl0IGltcG9ydCgnb3BlbmFpJyk7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IE9wZW5BSSh7IGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfSk7XG4gICAgY29uc3QgcHJvbXB0ID0gYFlvdSBhcmUgYSBzdHJlbmd0aCBjb2FjaC4gUmVmaW5lIHRoZSBwcm92aWRlZCAxMi13ZWVrIGh5cGVydHJvcGh5IHByb2dyYW0gSlNPTiBieSBhZGRpbmcgbWljcm9wcm9ncmVzc2lvbiBub3RlcywgZGVsb2FkIGFkanVzdG1lbnRzICgzOjEpLCBhbmQgc2FmZSBzd2FwcyByZXNwZWN0aW5nIGluanVyaWVzL2VxdWlwbWVudC4gUmV0dXJuIHZhbGlkIEpTT04gb25seS4gQ2l0YXRpb25zOiAke2NpdGF0aW9ucy5qb2luKCcsICcpfWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6ICdncHQtNG8nLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuMixcbiAgICAgIHJlc3BvbnNlX2Zvcm1hdDogeyB0eXBlOiAnanNvbl9vYmplY3QnIGFzIGFueSB9LFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1JldHVybiBKU09OIG9ubHkuJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBKU09OLnN0cmluZ2lmeShiYXNlUHJvZ3JhbSkgfVxuICAgICAgXVxuICAgIH0gYXMgYW55KTtcbiAgICBjb25zdCB0ZXh0ID0gKHJlc3BvbnNlIGFzIGFueSkuY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50O1xuICAgIGlmICghdGV4dCkgcmV0dXJuIGJhc2VQcm9ncmFtO1xuICAgIGNvbnN0IGpzb25TdGFydCA9IHRleHQuaW5kZXhPZigneycpO1xuICAgIGNvbnN0IGpzb25FbmQgPSB0ZXh0Lmxhc3RJbmRleE9mKCd9Jyk7XG4gICAgaWYgKGpzb25TdGFydCA+PSAwICYmIGpzb25FbmQgPiBqc29uU3RhcnQpIHtcbiAgICAgIGNvbnN0IHJlZmluZWQgPSBKU09OLnBhcnNlKHRleHQuc2xpY2UoanNvblN0YXJ0LCBqc29uRW5kICsgMSkpO1xuICAgICAgcmV0dXJuIHJlZmluZWQ7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gYmFzZVByb2dyYW07XG4gIH1cbiAgcmV0dXJuIGJhc2VQcm9ncmFtO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQcm9ncmFtV2l0aExMTShcbiAgaW5wdXQ6IE9uYm9hcmRpbmdJbnB1dCxcbiAgb3B0cz86IHsgcHJvZ3JhbUlkPzogc3RyaW5nOyBjaXRhdGlvbnM/OiBzdHJpbmdbXTsgdXNlcklkPzogc3RyaW5nIH1cbik6IFByb21pc2U8UHJvZ3JhbT4ge1xuICBjb25zdCBwcm9ncmFtSWQgPSBvcHRzPy5wcm9ncmFtSWQgPz8gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkge1xuICAgIGNvbnN0IHdlZWtzID0gZ2VuZXJhdGVGdWxsUHJvZ3JhbShpbnB1dCk7XG4gICAgY29uc3QgZmFsbGJhY2s6IFByb2dyYW0gPSB7XG4gICAgICBwcm9ncmFtX2lkOiBwcm9ncmFtSWQsXG4gICAgICB1c2VyX2lkOiBvcHRzPy51c2VySWQsXG4gICAgICBuYW1lOiAnMTItd2VlayBIeXBlcnRyb3BoeSBQcm9ncmFtJyxcbiAgICAgIHBhaWQ6IGZhbHNlLFxuICAgICAgd2Vla3MsXG4gICAgICBtZXRhZGF0YTogeyBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIHNvdXJjZTogWydzY2llbmNlLXJlZnMnLCAnSmVmZiBOaXBwYXJkJywgJ1RORicsICdNaWtlIElzcmFldGVsJ10sIHZvbHVtZV9wcm9maWxlOiB7fSwgYmlnM19wcnM6IGlucHV0LmJpZzNfUFJzID8/IHt9LCBleHBlcmllbmNlX2xldmVsOiBpbnB1dC5leHBlcmllbmNlX2xldmVsIH1cbiAgICB9IGFzIFByb2dyYW07XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgeyBPcGVuQUkgfSA9IGF3YWl0IGltcG9ydCgnb3BlbmFpJyk7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IE9wZW5BSSh7IGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfSk7XG4gICAgY29uc3QgdXNlclByb2ZpbGUgPSBidWlsZFVzZXJQcm9maWxlKGlucHV0KTtcbiAgICBjb25zdCBjaXRhdGlvbnMgPSBvcHRzPy5jaXRhdGlvbnMgPz8gWydTY2hvZW5mZWxkJywgJ051Y2tvbHMnLCAnSmVmZiBOaXBwYXJkJywgJ01pa2UgSXNyYWV0ZWwnLCAnSGVsbXMnXTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTRvJyxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjIsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogJ2pzb25fb2JqZWN0JyBhcyBhbnkgfSxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHN5c3RlbVByb21wdCB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogYFVzZXIgcHJvZmlsZTpcXG4ke3VzZXJQcm9maWxlfVxcblByb2dyYW0gaWQ6ICR7cHJvZ3JhbUlkfVxcbkNpdGF0aW9ucyB0byBpbmNsdWRlIGluIG1ldGFkYXRhLnNvdXJjZTogJHtjaXRhdGlvbnMuam9pbignLCAnKX1gIH1cbiAgICAgIF1cbiAgICB9IGFzIGFueSk7XG5cbiAgICBjb25zdCB0ZXh0ID0gKHJlc3BvbnNlIGFzIGFueSkuY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50ID8/ICcnO1xuICAgIGNvbnN0IGpzb25TdGFydCA9IHRleHQuaW5kZXhPZigneycpO1xuICAgIGNvbnN0IGpzb25FbmQgPSB0ZXh0Lmxhc3RJbmRleE9mKCd9Jyk7XG4gICAgaWYgKGpzb25TdGFydCA8IDAgfHwganNvbkVuZCA8PSBqc29uU3RhcnQpIHRocm93IG5ldyBFcnJvcignTm8gSlNPTiBpbiByZXNwb25zZScpO1xuICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UodGV4dC5zbGljZShqc29uU3RhcnQsIGpzb25FbmQgKyAxKSk7XG4gICAgbGV0IHByZXBhcmVkID0gZW5zdXJlTWV0YWRhdGEoY29lcmNlUHJvZ3JhbUlkKHBhcnNlZCwgcHJvZ3JhbUlkKSk7XG4gICAgKHByZXBhcmVkIGFzIGFueSkudXNlcl9pZCA9IG9wdHM/LnVzZXJJZDtcbiAgICAocHJlcGFyZWQgYXMgYW55KS5tZXRhZGF0YSA9IHtcbiAgICAgIC4uLihwcmVwYXJlZCBhcyBhbnkpLm1ldGFkYXRhLFxuICAgICAgYmlnM19wcnM6IGlucHV0LmJpZzNfUFJzID8/IHt9LFxuICAgICAgZXhwZXJpZW5jZV9sZXZlbDogaW5wdXQuZXhwZXJpZW5jZV9sZXZlbFxuICAgIH07XG4gICAgcHJlcGFyZWQgPSBlbmZvcmNlRGF5c1NwbGl0KHByZXBhcmVkIGFzIFByb2dyYW0sIGlucHV0KTtcbiAgICBwcmVwYXJlZCA9IGFwcGx5U2Vzc2lvbkNvbnN0cmFpbnRzKHByZXBhcmVkIGFzIFByb2dyYW0sIGlucHV0KTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRvUHJvZ3JhbU9yVGhyb3cocHJlcGFyZWQpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgY29uc3QgcmVwYWlyZWQgPSBhd2FpdCByZXBhaXJXaXRoTW9kZWwoSlNPTi5zdHJpbmdpZnkocHJlcGFyZWQpLCB2YWxpZGF0ZVByb2dyYW0uZXJyb3JzID8/IFtdKTtcbiAgICAgIGlmIChyZXBhaXJlZCkge1xuICAgICAgICBjb25zdCByZXBhcnNlZCA9IEpTT04ucGFyc2UocmVwYWlyZWQpO1xuICAgICAgICBsZXQgZmluYWwgPSBlbnN1cmVNZXRhZGF0YShjb2VyY2VQcm9ncmFtSWQocmVwYXJzZWQsIHByb2dyYW1JZCkpO1xuICAgICAgICBmaW5hbCA9IGVuZm9yY2VEYXlzU3BsaXQoZmluYWwgYXMgUHJvZ3JhbSwgaW5wdXQpO1xuICAgICAgICBmaW5hbCA9IGFwcGx5U2Vzc2lvbkNvbnN0cmFpbnRzKGZpbmFsIGFzIFByb2dyYW0sIGlucHV0KTtcbiAgICAgICAgKGZpbmFsIGFzIGFueSkubWV0YWRhdGEgPSB7XG4gICAgICAgICAgLi4uKGZpbmFsIGFzIGFueSkubWV0YWRhdGEsXG4gICAgICAgICAgYmlnM19wcnM6IGlucHV0LmJpZzNfUFJzID8/IHt9LFxuICAgICAgICAgIGV4cGVyaWVuY2VfbGV2ZWw6IGlucHV0LmV4cGVyaWVuY2VfbGV2ZWxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRvUHJvZ3JhbU9yVGhyb3coZmluYWwpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXBhaXIgZmFpbGVkJyk7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICBjb25zdCB3ZWVrcyA9IGdlbmVyYXRlRnVsbFByb2dyYW0oaW5wdXQpO1xuICAgIGNvbnN0IGZhbGxiYWNrOiBQcm9ncmFtID0ge1xuICAgICAgcHJvZ3JhbV9pZDogcHJvZ3JhbUlkLFxuICAgICAgdXNlcl9pZDogb3B0cz8udXNlcklkLFxuICAgICAgbmFtZTogJzEyLXdlZWsgSHlwZXJ0cm9waHkgUHJvZ3JhbScsXG4gICAgICBwYWlkOiBmYWxzZSxcbiAgICAgIHdlZWtzLFxuICAgICAgbWV0YWRhdGE6IHsgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBzb3VyY2U6IFsnc2NpZW5jZS1yZWZzJywgJ0plZmYgTmlwcGFyZCcsICdUTkYnLCAnTWlrZSBJc3JhZXRlbCddLCB2b2x1bWVfcHJvZmlsZToge30sIGJpZzNfcHJzOiBpbnB1dC5iaWczX1BScyA/PyB7fSwgZXhwZXJpZW5jZV9sZXZlbDogaW5wdXQuZXhwZXJpZW5jZV9sZXZlbCB9XG4gICAgfSBhcyBQcm9ncmFtO1xuICAgIHJldHVybiBmYWxsYmFjaztcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVByb2dyYW1Ub1N1cGFiYXNlKHByb2dyYW06IGFueSkge1xuICAvLyBEZXByZWNhdGVkOiBwcmVmZXIgY2FsbGluZyBjb2RlIHRvIHBlcmZvcm0gd3JpdGVzIHVzaW5nIGEgc2VydmljZSBjbGllbnQgYW5kIGhhbmRsZSBlcnJvcnNcbiAgdGhyb3cgbmV3IEVycm9yKCdzYXZlUHJvZ3JhbVRvU3VwYWJhc2UgaXMgZGVwcmVjYXRlZC4gVXNlIHNlcnZlciByb3V0ZSB3aXRoIHNlcnZpY2UgY2xpZW50IHRvIHBlcnNpc3QuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5WaWV3V2Vlayh3ZWVrOiBudW1iZXIsIHBhaWQ6IGJvb2xlYW4pIHtcbiAgcmV0dXJuIHdlZWsgPD0gMSB8fCBwYWlkO1xufVxuXG5cbiJdLCJuYW1lcyI6WyJ6IiwiQWp2IiwiYWRkRm9ybWF0cyIsInByb2dyYW1TY2hlbWEiLCJPbmJvYXJkaW5nSW5wdXQiLCJvYmplY3QiLCJpZCIsInN0cmluZyIsIm9wdGlvbmFsIiwiYWdlIiwibnVtYmVyIiwic2V4IiwiZW51bSIsIkJXIiwiZXhwZXJpZW5jZV9sZXZlbCIsInRyYWluaW5nX2ZyZXF1ZW5jeV9wcmVmZXJlbmNlIiwiaW50IiwibWluIiwibWF4IiwiZXF1aXBtZW50X2F2YWlsYWJsZSIsImFycmF5IiwiZGVmYXVsdCIsImdvYWxzIiwiYmlnM19QUnMiLCJiZW5jaCIsInNxdWF0IiwiZGVhZGxpZnQiLCJpbmp1cmllcyIsIm1vdmVtZW50X3ByZWZlcmVuY2VzIiwicHJlZmVycmVkX3NwbGl0IiwiZm9jdXNfcG9pbnQiLCJzZXNzaW9uX2xlbmd0aF9taW4iLCJyZXN0X3ByZWYiLCJudXRyaXRpb24iLCJhanYiLCJhbGxFcnJvcnMiLCJzdHJpY3QiLCJ2YWxpZGF0ZVByb2dyYW0iLCJjb21waWxlIiwiY29lcmNlUHJvZ3JhbUlkIiwicCIsInByb2dyYW1JZCIsInByb2dyYW1faWQiLCJlbnN1cmVNZXRhZGF0YSIsImNyZWF0ZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkZWZhdWx0cyIsImNyZWF0ZWRfYXQiLCJzb3VyY2UiLCJ2b2x1bWVfcHJvZmlsZSIsIm1ldGFkYXRhIiwicGFpZCIsIkJvb2xlYW4iLCJ0b1Byb2dyYW1PclRocm93Iiwib2siLCJlcnJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9ycyIsIkVycm9yIiwicmVwYWlyV2l0aE1vZGVsIiwicmF3IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiT3BlbkFJIiwiY2xpZW50IiwiYXBpS2V5IiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwicmVzcG9uc2VfZm9ybWF0IiwidHlwZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZXh0IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJidWlsZFVzZXJQcm9maWxlIiwiaW5wdXQiLCJqb2luIiwiZXEiLCJwcmVmcyIsImluaiIsInByIiwiZm9jdXMiLCJzeXN0ZW1Qcm9tcHQiLCJDT1JFX0VYRVJDSVNFUyIsImlzQ29yZUV4ZXJjaXNlIiwibmFtZSIsInRlc3QiLCJpc01haW5Db21wb3VuZCIsInNsdWdpZnlJZCIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInNsaWNlIiwiYnVpbGRBY2Nlc3NvcnkiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzZXRzIiwicmVwcyIsInJwZSIsInRlbXBvIiwicmVzdF9zZWNvbmRzIiwiZ2V0RXF1aXBtZW50TW9kZSIsImZpcnN0Iiwibm9ybWFsaXplTmFtZUZvckVxdWlwbWVudCIsIm9yaWdpbmFsTmFtZSIsIm1vZGUiLCJzdWJzdGl0dXRlRXhlcmNpc2VGb3JFcXVpcG1lbnQiLCJuIiwiZXF1aXBtZW50Q29yZUV4ZXJjaXNlcyIsImFjY2Vzc29yeVBvb2xGb3JGb2N1cyIsInVwcGVyUG9vbCIsImxvd2VyUG9vbCIsInB1bGxQb29sIiwicHVzaFBvb2wiLCJsZWdzUG9vbCIsImZ1bGxQb29sIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwiZiIsInJlbW92ZUxhdGVyYWxSYWlzZXMiLCJhcnIiLCJmaWx0ZXIiLCJpbmNsdWRlcyIsInBpY2tDb3JlRGF5SW5kaWNlcyIsInRvdGFsRGF5cyIsInNlY29uZCIsImZsb29yIiwiZW5mb3JjZUNvcmVGb3JEYXkiLCJleHMiLCJkZXNpcmVkQ29yZU5hbWUiLCJub25Db3JlIiwiZSIsImNvcmVFeCIsImRlZHVwZUJ5TmFtZVByZXNlcnZlT3JkZXIiLCJzZWVuIiwib3V0IiwiZXgiLCJub3JtYWxpemVkTmFtZSIsImtleSIsInRyaW0iLCJoYXMiLCJhZGQiLCJwdXNoIiwiZW5zdXJlTm9DYWxmUmFpc2VDb25mbGljdCIsImlzU3RhbmRpbmciLCJpc1NlYXRlZCIsInN0YW5kaW5nSW5kZXgiLCJzZWF0ZWRJbmRleCIsImZvckVhY2giLCJpIiwicmVtb3ZlSW5kZXgiLCJfIiwiZmlsbEFjY2Vzc29yaWVzVG9Db3VudCIsImRlc2lyZWRDb3VudCIsImxlbmd0aCIsIm5hbWVzIiwibWFwIiwicG9vbCIsImZhbGxiYWNrTmFtZSIsImZpbGxlciIsInNvbWUiLCJ0cmltUmVzcGVjdGluZ0NvcmVBbmRDb21wb3VuZCIsImNvcmVJbmRleCIsImZpbmRJbmRleCIsIm1haW5Db21wb3VuZEluZGV4Iiwia2VlcFNldCIsImlkeCIsImoiLCJzcGxpY2UiLCJwb3AiLCJkZXNpcmVkRXhlcmNpc2VDb3VudCIsInNlc3Npb25NaW51dGVzIiwiYXBwbHlTZXNzaW9uQ29uc3RyYWludHMiLCJwcm9ncmFtIiwidGFyZ2V0IiwidXBkYXRlZFdlZWtzIiwid2Vla3MiLCJ3ZWVrIiwiZGF5cyIsImRheSIsImRpIiwiZXhlcmNpc2VzIiwiaW50ZW5zaXR5X3BjdCIsInVuZGVmaW5lZCIsImNvcmVEYXlzIiwiY29yZU5hbWVzIiwiaW5kZXhPZiIsImdlbmVyYXRlRGV0ZXJtaW5pc3RpY1dlZWsiLCJleHAiLCJiYXNlUGN0IiwicmVzdENvbXBvdW5kIiwicmVzdEFjY2Vzc29yeSIsImJwUGN0Iiwic3FQY3QiLCJkbFBjdCIsInR3b0RheSIsInRocmVlRGF5IiwiZm91ckRheSIsImZpdmVEYXkiLCJzaXhEYXlGb2N1cyIsInNpeERheSIsImRheXNQZXJXZWVrIiwic2VsZWN0ZWQiLCJ3ZWVrX251bWJlciIsImQiLCJkYXlfbnVtYmVyIiwibm90ZXMiLCJnZW5lcmF0ZUZ1bGxQcm9ncmFtIiwidyIsImJhc2VXZWVrIiwiY3ljbGVQb3MiLCJ2b2x1bWVNdWx0aXBsaWVyIiwiaW50ZW5zaXR5QnVtcCIsImFkanVzdGVkRGF5cyIsInJvdW5kIiwiaXNDb21wb3VuZCIsImVuZm9yY2VEYXlzU3BsaXQiLCJkZXNpcmVkIiwiYWxpZ25lZFdlZWtzIiwiY3VycmVudERheXMiLCJwYWRzIiwidHJpbW1lZCIsInJlZmluZVdpdGhHUFQiLCJiYXNlUHJvZ3JhbSIsImNpdGF0aW9ucyIsInByb21wdCIsImpzb25TdGFydCIsImpzb25FbmQiLCJsYXN0SW5kZXhPZiIsInJlZmluZWQiLCJwYXJzZSIsImdlbmVyYXRlUHJvZ3JhbVdpdGhMTE0iLCJvcHRzIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImZhbGxiYWNrIiwidXNlcl9pZCIsInVzZXJJZCIsImJpZzNfcHJzIiwidXNlclByb2ZpbGUiLCJwYXJzZWQiLCJwcmVwYXJlZCIsInJlcGFpcmVkIiwicmVwYXJzZWQiLCJmaW5hbCIsInNhdmVQcm9ncmFtVG9TdXBhYmFzZSIsImNhblZpZXdXZWVrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/program-generator.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.ts":
/*!********************************!*\
  !*** ./lib/supabase-server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServiceSupabaseClient: () => (/* binding */ getServiceSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nfunction getServiceSupabaseClient() {\n    const url = \"https://ltozsbrlhquklxtvgjrx.supabase.co\";\n    const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!url || !serviceKey) {\n        throw new Error(\"Missing Supabase service role env vars\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, serviceKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRTlDLFNBQVNDO0lBQ2QsTUFBTUMsTUFBTUMsMENBQW9DO0lBQ2hELE1BQU1HLGFBQWFILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0lBQ3hELElBQUksQ0FBQ0wsT0FBTyxDQUFDSSxZQUFZO1FBQ3ZCLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtJQUNBLE9BQU9SLG1FQUFZQSxDQUFDRSxLQUFLSTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJhbGlmdC8uL2xpYi9zdXBhYmFzZS1zZXJ2ZXIudHM/MDk0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVN1cGFiYXNlQ2xpZW50KCkge1xuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gIGNvbnN0IHNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuICBpZiAoIXVybCB8fCAhc2VydmljZUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBzZXJ2aWNlIHJvbGUgZW52IHZhcnMnKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHVybCwgc2VydmljZUtleSk7XG59XG5cblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImdldFNlcnZpY2VTdXBhYmFzZUNsaWVudCIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.ts\n");

/***/ }),

/***/ "(rsc)/./types/program.schema.json":
/*!***********************************!*\
  !*** ./types/program.schema.json ***!
  \***********************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://neuralift.app/schemas/program.schema.json","title":"NeuralLiftProgram","type":"object","required":["program_id","name","weeks","metadata"],"properties":{"program_id":{"type":"string"},"name":{"type":"string"},"paid":{"type":"boolean","default":false},"weeks":{"type":"array","minItems":12,"items":{"type":"object","required":["week_number","days"],"properties":{"week_number":{"type":"integer","minimum":1,"maximum":12},"days":{"type":"array","minItems":2,"maxItems":6,"items":{"type":"object","required":["day_number","focus","exercises"],"properties":{"day_number":{"type":"integer","minimum":1},"focus":{"type":"string"},"exercises":{"type":"array","items":{"type":"object","required":["id","name","sets","reps","rpe","tempo","rest_seconds"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"sets":{"type":"integer","minimum":1,"maximum":8},"reps":{"type":"string"},"rpe":{"type":"number","minimum":5,"maximum":10},"tempo":{"type":"string"},"rest_seconds":{"type":"integer","minimum":30,"maximum":300},"intensity_pct":{"type":"number","minimum":0.4,"maximum":0.9}}}},"notes":{"type":"string"}}}}}}},"metadata":{"type":"object","required":["created_at","source","volume_profile"],"properties":{"created_at":{"type":"string","format":"date-time"},"source":{"type":"array","items":{"type":"string"}},"volume_profile":{"type":"object","additionalProperties":{"type":"integer"}}},"additionalProperties":true}},"additionalProperties":false}');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/ajv","vendor-chunks/zod","vendor-chunks/fast-uri","vendor-chunks/ajv-formats","vendor-chunks/json-schema-traverse","vendor-chunks/fast-deep-equal","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-program%2Froute&page=%2Fapi%2Fgenerate-program%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-program%2Froute.ts&appDir=%2FUsers%2Fkyler%2FNeuralLift%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkyler%2FNeuralLift&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();